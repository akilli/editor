class e extends Map{constructor(e=[]){super(),e.forEach(e=>this.set(e))}get(e){return super.get(e)||null}set(e){if(!(e instanceof m))throw"Invalid argument";super.set(e.name,e)}execute(e){if(!this.has(e))throw"Invalid argument";this.get(e).execute()}}class t{editor;name;constructor(e,t){if(!(e instanceof h&&t&&"string"==typeof t))throw"Invalid argument";this.editor=e,this.name=t}open(e,t={}){this.editor.document.querySelectorAll("dialog.editor-dialog").forEach(e=>e.parentElement.removeChild(e));const i=this.editor.window.getSelection(),r=i.rangeCount>0?i.getRangeAt(0):null,n=this.editor.createElement("dialog",{attributes:{class:"editor-dialog"}}),s=this.editor.createElement("form"),o=this.editor.createElement("fieldset"),a=this.editor.createElement("button",{attributes:{class:"editor-cancel",type:"button"},html:this.t("Cancel")}),l=this.editor.createElement("button",{attributes:{class:"editor-save"},html:this.t("Save")}),d=()=>{r&&(i.removeAllRanges(),i.addRange(r)),n.parentElement.removeChild(n)};n.appendChild(s),n.addEventListener("click",e=>{e.target===n&&d()}),"boolean"!=typeof n.open&&this.polyfill(n),n.open=!0,o.insertAdjacentHTML("beforeend",this.getFieldsetHtml());for(let[e,i]of Object.entries(t))o.elements[e]&&(o.elements[e].value=i);s.appendChild(o),s.addEventListener("submit",t=>{t.preventDefault(),d();const i={};Array.from(o.elements).forEach(e=>i[e.name]=e.value),e(i)}),a.addEventListener("click",d),s.appendChild(a),s.appendChild(l),this.editor.element.appendChild(n)}getFieldsetHtml(){return""}t(e){return this.editor.i18n.translate(this.name,e)}polyfill(e){Object.defineProperty(e,"open",{get:function(){return e.hasAttribute("open")},set:function(t){t?e.setAttribute("open",""):e.removeAttribute("open")}})}}class i extends Map{constructor(e=[]){super(),e.forEach(e=>this.set(e))}get(e){return super.get(e)||null}set(e){if(!(e instanceof t))throw"Invalid argument";super.set(e.name,e)}}class r{editor;name;constructor(e,t){if(!(e instanceof h&&t&&"string"==typeof t))throw"Invalid argument";this.editor=e,this.name=t}filter(e){throw"Not implemented"}}class n extends Map{constructor(e=[]){super(),e.forEach(e=>this.set(e))}get(e){return super.get(e)||null}set(e){if(!(e instanceof r))throw"Invalid argument";super.set(e.name,e)}filter(e){if(!(e instanceof HTMLElement))throw"Invalid argument";this.forEach(t=>{e.normalize(),t.filter(e)})}}class s extends Map{get(e){return super.get(e)||null}set(e,t){if(!(e&&"string"==typeof e&&t instanceof Object))throw"Invalid argument";super.set(e,t)}translate(e,t){const i=this.get(e);return i&&i[t]?i[t]:t}}class o{editor;constructor(e){if(!(e instanceof h))throw"Invalid argument";this.editor=e}observe(e){throw"Not implemented"}}class a{editor;name;constructor(e,t){if(!(e instanceof h&&t&&"string"==typeof t))throw"Invalid argument";this.editor=e,this.name=t}init(){throw"Not implemented"}registerTranslator(e){e[this.editor.config.base.lang]&&this.editor.i18n.set(this.name,e[this.editor.config.base.lang])}registerCommand(e,t=null){this.editor.commands.set(new m(this.editor,e,t))}static defaultConfig(){return{}}}class l extends Map{constructor(e=[]){super(),e.forEach(e=>this.set(e))}get(e){return super.get(e)||null}set(e){if(!(e instanceof a))throw"Invalid argument";super.set(e.name,e)}init(){this.forEach(e=>e.init())}}class d{name;group;attributes=[];children=[];deletable=!1;editable=!1;empty=!1;enter=null;navigable=!1;sortable=!1;constructor({name:e,group:t,...i}={}){if(!e||"string"!=typeof e||!t||"string"!=typeof t)throw"Invalid argument";this.name=e,this.group=t,this.enter=i.enter&&"string"==typeof i.enter?i.enter:null,["attributes","children"].forEach(e=>this[e]=Array.isArray(i[e])?i[e]:[]),["deletable","editable","empty","navigable","sortable"].forEach(e=>this[e]=!0===i[e])}}class c extends Map{constructor(e=[]){super(),e.forEach(e=>this.set(e))}get(e){return super.get(e)||null}set(e){if(!(e instanceof d))throw"Invalid argument";super.set(e.name,e)}create(e){this.set(new d(e))}isAllowed(e,t){const i=this.get(e),r=this.get(t);return i&&r&&r.children.includes(i.group)}isAllowedElement(e,t){return e instanceof HTMLElement&&t instanceof HTMLElement&&this.isAllowed(e.tagName.toLowerCase(),t.tagName.toLowerCase())}isAllowedText(e){const t=this.get(e);return t&&t.children.includes("text")}deletable(){return Array.from(this.values()).filter(e=>e.deletable).map(e=>e.name)}editable(){return Array.from(this.values()).filter(e=>e.editable).map(e=>e.name)}empty(){return Array.from(this.values()).filter(e=>e.empty).map(e=>e.name)}navigable(){return Array.from(this.values()).filter(e=>e.navigable).map(e=>e.name)}sortable(){return Array.from(this.values()).filter(e=>e.sortable).map(e=>e.name)}isDeletable(e){const t=this.get(e);return t&&t.deletable}isEditable(e){const t=this.get(e);return t&&t.editable}isEmpty(e){const t=this.get(e);return t&&t.empty}isNavigable(e){const t=this.get(e);return t&&t.navigable}isSortable(e){const t=this.get(e);return t&&t.sortable}isElementDeletable(e){return e instanceof HTMLElement&&this.isDeletable(e.tagName.toLowerCase())}isElementEmpty(e){return e instanceof HTMLElement&&this.isEmpty(e.tagName.toLowerCase())}isElementEditable(e){return e instanceof HTMLElement&&this.isEditable(e.tagName.toLowerCase())}isElementNavigable(e){return e instanceof HTMLElement&&this.isNavigable(e.tagName.toLowerCase())}isElementSortable(e){return e instanceof HTMLElement&&this.isSortable(e.tagName.toLowerCase())}}class h{orig;document;window;origin;element;toolbar;content;config={};i18n=new s;tags=new c;filters=new n;dialogs=new i;commands=new e;plugins=new l;constructor(e,t={}){if(!(e instanceof HTMLElement&&t instanceof Object))throw"Invalid argument";this.orig=e,this.document=this.orig.ownerDocument,this.window=this.document.defaultView,this.origin=this.window.origin||this.window.location.origin,this.toolbar=this.createElement("editor-toolbar",{attributes:{role:"toolbar"}}),this.content=this.createElement("editor-content"),this.element=this.createElement("akilli-editor"),this.element.appendChild(this.toolbar),this.element.appendChild(this.content),this.config=t}init(){0===this.plugins.size&&(this.initConfig(),this.initPlugins(),this.initToolbar()),this.initContent(),this.initDom()}initConfig(){for(let[e,t]of Object.entries(this.constructor.defaultConfig()))this.config[e]=Object.assign({},t,this.config[e]||{})}initPlugins(){this.config.base.plugins.map(e=>{const t=e.defaultConfig(),i=new e(this);Object.keys(t).length>0&&(this.config[i.name]=Object.assign({},t,this.config[i.name]||{})),this.plugins.set(i)}),this.plugins.init()}initToolbar(){this.config.base.toolbar.forEach(e=>this.toolbar.appendChild(this.createElement("button",{attributes:{type:"button","data-command":e,title:e},html:e})))}initContent(){this.orig instanceof HTMLTextAreaElement?(this.orig.form.addEventListener("submit",()=>this.save()),this.setHtml(this.orig.value.replace("/&nbsp;/g"," "))):this.setHtml(this.orig.innerHTML)}initDom(){this.orig.insertAdjacentElement("afterend",this.element),this.orig.hidden=!0}destroy(){this.element.parentElement.removeChild(this.element),this.orig.hidden=!1}getHtml(){const e=this.content.cloneNode(!0);return this.filters.filter(e),e.innerHTML}setHtml(e){const t=this.content.cloneNode(!1);t.innerHTML=e,this.filters.filter(t),this.content.innerHTML=t.innerHTML}save(){this.orig instanceof HTMLTextAreaElement?this.orig.value=this.getHtml():this.orig.innerHTML=this.getHtml()}insert(e){if(!(e instanceof HTMLElement))throw"Invalid argument";const t=this.getSelectedEditable();if(t&&t instanceof HTMLSlotElement&&this.tags.isAllowedElement(e,t.parentElement))t.insertAdjacentElement("beforebegin",e);else{if(!this.tags.isAllowedElement(e,this.content))throw"Invalid argument";this.content.appendChild(e)}}insertText(e){this.document.execCommand("inserttext",!1,e)}format(e){if(!(e instanceof HTMLElement))throw"Invalid argument";const t=this.window.getSelection(),i=t.anchorNode instanceof Text?t.anchorNode.parentElement:t.anchorNode,r=this.getSelectedEditable();if(t.isCollapsed||!t.toString().trim()||!(i instanceof HTMLElement)||!r)return;const n=t.getRangeAt(0),s=this.tags.get(i.tagName.toLowerCase()),o=s&&"format"!==s.group?i:i.parentElement;n.startContainer instanceof Text&&n.startContainer.parentElement!==o&&n.setStartBefore(n.startContainer.parentElement),n.endContainer instanceof Text&&n.endContainer.parentElement!==o&&n.setEndAfter(n.endContainer.parentElement);const a=n.toString(),l=n.cloneContents().childNodes;let d=Array.from(l).every(t=>t instanceof Text&&!t.textContent.trim()||t instanceof HTMLElement&&t.tagName===e.tagName);n.deleteContents(),!(o.isContentEditable&&this.tags.isAllowedElement(e,o)&&a.trim())||s&&d?n.insertNode(this.createText(a)):(e.textContent=a,n.insertNode(e)),o.normalize()}registerElement(e,t,i=null){void 0===this.window.customElements.get(e)&&this.window.customElements.define(e,t,i?{extends:i}:null)}createElement(e,{attributes:t={},html:i="",is:r=null}={}){const n=this.document.createElement(e,r?{is:r}:null);n.innerHTML=i;for(let[e,i]of Object.entries(t))i&&n.setAttribute(e,""+i);return n}createText(e){return this.document.createTextNode(e)}getSelectedElement(){const e=this.window.getSelection(),t=e.anchorNode instanceof Text?e.anchorNode.parentElement:e.anchorNode,i=e.focusNode instanceof Text?e.focusNode.parentElement:e.focusNode;return t instanceof HTMLElement&&i instanceof HTMLElement&&t===i&&this.content.contains(t)?t:null}getSelectedEditable(){const e=this.window.getSelection(),t=e.anchorNode instanceof Text?e.anchorNode.parentElement:e.anchorNode,i=e.focusNode instanceof Text?e.focusNode.parentElement:e.focusNode;if(t instanceof HTMLElement&&i instanceof HTMLElement){const e=t.closest("[contenteditable=true]"),r=i.closest("[contenteditable=true]");if(e&&r&&e===r&&this.content.contains(e))return e}return null}focusEnd(e){if(!(e instanceof HTMLElement))throw"Invalid argument";const t=this.document.createRange(),i=this.window.getSelection();e.focus(),t.selectNodeContents(e),t.collapse(),i.removeAllRanges(),i.addRange(t)}observe(e,{target:t=null,config:i={childList:!0,subtree:!0}}={}){if(!(e instanceof o)||t&&!(t instanceof HTMLElement))throw"Invalid argument";new MutationObserver(t=>e.observe(t)).observe(t||this.content,i)}isContent(e){if(!(e instanceof HTMLElement))throw"Invalid argument";return this.content===e||"editor-content"===e.tagName.toLowerCase()}url(e){const t=this.createElement("a",{attributes:{href:e}});return t.origin===this.origin?t.pathname:t.href}static defaultConfig(){return{}}static create(e,t={}){const i=new this(e,t);return i.init(),i}}class m{editor;name;tagName=null;constructor(e,t,i=null){if(!(e instanceof h)||!t||"string"!=typeof t||i&&"string"!=typeof i)throw"Invalid argument";this.editor=e,this.name=t,this.tagName=i}execute(){const e=this.editor.dialogs.get(this.name);e?e.open(e=>this.insert(e),this.selectedAttributes()):this.insert()}insert(e={}){const t=this.tagName?this.editor.tags.get(this.tagName):null;if(t){Object.keys(e).forEach(i=>t.attributes.includes(i)||delete e[i]);const i=this.editor.createElement(t.name,{attributes:e});"format"===t.group?this.editor.format(i):this.editor.insert(i)}}selectedAttributes(){const e={},t=this.editor.getSelectedElement();return t instanceof HTMLElement&&t.tagName.toLowerCase()===this.tagName&&Array.from(t.attributes).forEach(t=>e[t.nodeName]=t.nodeValue),e}}class u extends m{constructor(e){super(e,"audio")}insert({src:e,caption:t="",width:i="",height:r="",controls:n="controls"}={}){if(!e)throw"Invalid argument";const s=this.editor.createElement("figure",{attributes:{class:"audio"}});s.appendChild(this.editor.createElement("audio",{attributes:{src:this.editor.url(e),width:i,height:r,controls:n}})),s.appendChild(this.editor.createElement("figcaption",{html:t})),this.editor.insert(s)}}class g extends t{constructor(e){super(e,"audio")}getFieldsetHtml(){return`\n            <legend>${this.t("Audio")}</legend>\n            <div class="editor-required">\n                <label for="editor-src">${this.t("URL")}</label>\n                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />\n            </div>\n            <div>\n                <label for="editor-width">${this.t("Width")}</label>\n                <input id="editor-width" name="width" type="number" />\n            </div>\n            <div>\n                <label for="editor-height">${this.t("Height")}</label>\n                <input id="editor-height" name="height" type="number" />\n            </div>\n        `}}class f extends t{url;opts=Object.assign({alwaysRaised:"yes",dependent:"yes",height:""+this.editor.window.screen.height,location:"no",menubar:"no",minimizable:"no",modal:"yes",resizable:"yes",scrollbars:"yes",toolbar:"no",width:""+this.editor.window.screen.width},this.editor.config.base.browser);constructor(e,t,i){if(super(e,t),!i||"string"!=typeof i)throw"Invalid argument";this.url=i}open(e,t={}){const i=Object.entries(this.opts).map(e=>`${e[0]}=${e[1]}`).join(","),r=this.editor.window.open(this.url,this.name,i),n=this.editor.createElement("a",{attributes:{href:this.url}});this.editor.window.addEventListener("message",t=>{t.origin===n.origin&&t.source===r&&(e(t.data),r.close())},!1)}}const b={de:{Audio:"Audio",Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class p extends a{constructor(e){super(e,"audio")}init(){this.editor.tags.create({name:"audio",group:"media",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(b),this.editor.config.audio.browser?this.editor.dialogs.set(new f(this.editor,"audio",this.editor.config.audio.browser)):this.editor.dialogs.set(new g(this.editor)),this.editor.commands.set(new u(this.editor))}static defaultConfig(){return{browser:null}}}class E extends r{constructor(e){super(e,"base")}filter(e){const t=e.tagName.toLowerCase(),i=this.editor.isContent(e);Array.from(e.childNodes).forEach(r=>{if(r instanceof HTMLElement){const n=(r=this.convert(r)).tagName.toLowerCase(),s=this.editor.tags.get(n),o=r.textContent.trim();s&&(this.editor.tags.isAllowed(n,t)||i&&"format"===s.group&&this.editor.tags.isAllowed("p",t))?(Array.from(r.attributes).forEach(e=>{s.attributes.includes(e.name)||r.removeAttribute(e.name)}),r.hasChildNodes()&&this.editor.filters.filter(r),r.hasChildNodes()||s.empty?this.editor.tags.isAllowed(n,t)||e.replaceChild(this.editor.createElement("p",{html:r.outerHTML}),r):e.removeChild(r)):i&&o&&this.editor.tags.isAllowed("p",t)?e.replaceChild(this.editor.createElement("p",{html:o}),r):o&&this.editor.tags.isAllowedText(t)?e.replaceChild(this.editor.createText(o),r):e.removeChild(r)}else if(r instanceof Text){const n=r.textContent.trim();i&&n&&this.editor.tags.isAllowed("p",t)?e.replaceChild(this.editor.createElement("p",{html:n}),r):n&&this.editor.tags.isAllowedText(t)||e.removeChild(r)}else e.removeChild(r)}),this.linebreaks(e)}convert(e){const t=this.editor.config.base.filter[e.tagName.toLowerCase()];if(!t)return e;const i=this.editor.createElement(t,{html:e.innerHTML});return e.parentElement.replaceChild(i,e),i}linebreaks(e){e.innerHTML=e.innerHTML.replace(/^\s*(<br\s*\/?>\s*)+/gi,"").replace(/\s*(<br\s*\/?>\s*)+$/gi,""),e instanceof HTMLParagraphElement?e.outerHTML=e.outerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"</p><p>"):e.innerHTML=e.innerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"<br>")}}class w extends o{observe(e){const t=this.editor.tags.deletable(),i=t.join(", ");e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&(t.includes(e.tagName.toLowerCase())&&this.keyboard(e),i&&e.querySelectorAll(i).forEach(e=>this.keyboard(e)))}))}keyboard(e){e.addEventListener("keyup",t=>{t.target===e&&t.ctrlKey&&"Delete"===t.key&&(e.previousElementSibling&&this.editor.focusEnd(e.previousElementSibling),e.parentElement.removeChild(e),t.preventDefault(),t.cancelBubble=!0)})}}class v extends o{observe(e){const t=this.editor.tags.editable(),i=t.join(", ");e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&(t.includes(e.tagName.toLowerCase())?this.init(e):i&&e.querySelectorAll(i).forEach(e=>this.init(e)))}))}init(e){e.contentEditable="true",e.addEventListener("keydown",e=>{this.onKeydownEnter(e),this.onKeydownBackspace(e)}),e.addEventListener("keyup",e=>this.onKeyupEnter(e))}onKeydownEnter(e){"Enter"!==e.key||e.shiftKey&&this.editor.tags.isAllowed("br",e.target.tagName.toLowerCase())||(e.preventDefault(),e.cancelBubble=!0)}onKeyupEnter(e){let t;if("Enter"===e.key&&!e.shiftKey&&(t=this.editor.tags.get(e.target.tagName.toLowerCase()))&&t.enter){let i,r=e.target;e.preventDefault(),e.cancelBubble=!0;do{if(i=r.parentElement.tagName.toLowerCase(),this.editor.tags.isAllowed(t.enter,i)){r.insertAdjacentElement("afterend",this.editor.createElement(t.enter));break}}while((r=r.parentElement)&&this.editor.content.contains(r)&&!this.editor.isContent(r))}}onKeydownBackspace(e){"Backspace"!==e.key||e.shiftKey||e.target.textContent||!this.editor.tags.isElementDeletable(e.target)||(e.target.previousElementSibling&&this.editor.focusEnd(e.target.previousElementSibling),e.target.parentElement.removeChild(e.target),e.preventDefault(),e.cancelBubble=!0)}}class y extends r{constructor(e){super(e,"figure")}filter(e){e.querySelectorAll("figure > figcaption:only-child").forEach(e=>e.parentElement.removeChild(e))}}class L extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&"figure"===e.tagName.toLowerCase()?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("figure").forEach(e=>this.init(e))}))}init(e){e.querySelector(":scope > figcaption")||e.appendChild(this.editor.createElement("figcaption")),e.parentElement instanceof HTMLElement&&this.editor.isContent(e.parentElement)&&this.keyboard(e)}keyboard(e){e.addEventListener("keyup",t=>{const i={ArrowLeft:"left",ArrowRight:"right"};if(t.target===e&&t.ctrlKey&&Object.keys(i).includes(t.key)){t.preventDefault(),t.cancelBubble=!0;const r=i[t.key]&&e.classList.contains(i[t.key]);e.classList.remove(...Object.values(i)),r||e.classList.add(i[t.key])}})}}class C extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{(this.editor.tags.isElementNavigable(e)||this.editor.tags.isElementEditable(e))&&(e.tabIndex=0,e.focus())}))}}class x extends o{observe(e){const t=this.editor.tags.navigable(),i=t.join(", ");e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&(t.includes(e.tagName.toLowerCase())&&this.keyboard(e),i&&e.querySelectorAll(i).forEach(e=>this.keyboard(e)))}))}keyboard(e){e.addEventListener("keyup",t=>{if(t.target===e&&!t.ctrlKey&&["ArrowUp","ArrowDown","Home","End"].includes(t.key)){const i=e.previousElementSibling,r=e.nextElementSibling,n=e.parentElement.firstElementChild,s=e.parentElement.lastElementChild,o=e===n,a=e===s;"ArrowUp"!==t.key||o?"ArrowDown"!==t.key||a?"Home"===t.key||"ArrowDown"===t.key&&a?n.focus():("End"===t.key||"ArrowUp"===t.key&&o)&&s.focus():r.focus():i.focus(),t.preventDefault(),t.cancelBubble=!0}})}}class T extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLSlotElement?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("slot").forEach(e=>this.init(e))}))}init(e){const t=e=>{e.preventDefault(),e.cancelBubble=!0};e.addEventListener("keydown",t),e.addEventListener("keyup",t)}}class A extends o{observe(e){const t=this.editor.tags.sortable(),i=t.join(", ");e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&(t.includes(e.tagName.toLowerCase())&&this.init(e),i&&e.querySelectorAll(i).forEach(e=>this.init(e)))}))}init(e){this.keyboard(e),this.dragndrop(e)}keyboard(e){e.addEventListener("keyup",t=>{if(t.target===e&&t.ctrlKey&&["ArrowUp","ArrowDown","Home","End"].includes(t.key)){const i=e.parentElement,r=e.previousElementSibling,n=e.nextElementSibling,s=i.firstElementChild,o=i.lastElementChild,a=e===s,l=e===o;"ArrowUp"===t.key&&!a&&this.editor.tags.isElementSortable(r)?(r.insertAdjacentHTML("beforebegin",e.outerHTML),i.removeChild(e)):"ArrowDown"===t.key&&!l&&this.editor.tags.isElementSortable(n)?(n.insertAdjacentHTML("afterend",e.outerHTML),i.removeChild(e)):("Home"===t.key&&!a||"ArrowDown"===t.key&&l)&&this.editor.tags.isElementSortable(s)?(s.insertAdjacentHTML("beforebegin",e.outerHTML),i.removeChild(e)):("End"===t.key&&!l||"ArrowUp"===t.key&&a)&&this.editor.tags.isElementSortable(o)&&(o.insertAdjacentHTML("afterend",e.outerHTML),i.removeChild(e)),t.preventDefault(),t.cancelBubble=!0}})}dragndrop(e){const t="text/x-editor-name",i=e.parentElement.tagName.toLowerCase(),r=()=>{this.editor.content.querySelectorAll(".editor-dragover").forEach(e=>{e.classList.length>1?e.classList.remove("editor-dragover"):e.removeAttribute("class")})},n=()=>{const t=e.hasAttribute("draggable");this.editor.content.querySelectorAll("[draggable]").forEach(e=>{e.removeAttribute("draggable"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","true")}),t||(e.setAttribute("draggable","true"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false"))},s=r=>{if(r.target===e){const n=r.dataTransfer.getData(t);n&&this.editor.tags.isAllowed(n,i)&&(r.preventDefault(),r.cancelBubble=!0,e.classList.add("editor-dragover"),r.dataTransfer.dropEffect="move")}};e.addEventListener("dblclick",t=>{t.target===e&&(t.preventDefault(),t.cancelBubble=!0,n())}),e.addEventListener("dragstart",i=>{i.target===e&&(i.dataTransfer.effectAllowed="move",i.dataTransfer.setData(t,e.tagName.toLowerCase()),i.dataTransfer.setData("text/x-editor-html",e.outerHTML))}),e.addEventListener("dragend",t=>{t.target===e&&("move"===t.dataTransfer.dropEffect&&e.parentElement.removeChild(e),n())}),e.addEventListener("dragenter",s),e.addEventListener("dragover",s),e.addEventListener("dragleave",r),e.addEventListener("drop",n=>{if(r(),n.target===e){const r=n.dataTransfer.getData(t),s=n.dataTransfer.getData("text/x-editor-html");n.preventDefault(),n.cancelBubble=!0,r&&this.editor.tags.isAllowed(r,i)&&s&&e.insertAdjacentHTML("beforebegin",s)}})}}class H extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLButtonElement?this.click(e):e instanceof HTMLElement&&e.querySelectorAll("button").forEach(e=>this.click(e)),e instanceof HTMLElement&&this.editor.toolbar===e.parentElement&&(e.tabIndex=-1,this.keyboard(e))}))}click(e){e.addEventListener("click",()=>this.editor.commands.execute(e.getAttribute("data-command")))}keyboard(e){e.addEventListener("keyup",t=>{["ArrowLeft","ArrowRight","Home","End"].includes(t.key)&&("ArrowLeft"===t.key?e.previousElementSibling?e.previousElementSibling.focus():e.parentElement.lastElementChild.focus():"ArrowRight"===t.key?e.nextElementSibling?e.nextElementSibling.focus():e.parentElement.firstElementChild.focus():"Home"===t.key?e.parentElement.firstElementChild.focus():"End"===t.key&&e.parentElement.lastElementChild.focus(),t.preventDefault(),t.cancelBubble=!0)})}}class k extends a{constructor(e){super(e,"base")}init(){this.editor.tags.create({name:"editor-content",group:"root",children:["figure","heading","list","paragraph","section"]}),this.editor.tags.create({name:"slot",group:"slot",editable:!0,navigable:!0}),this.editor.tags.create({name:"br",group:"break",empty:!0}),this.editor.tags.create({name:"figure",group:"figure",attributes:["class"],children:["caption","figure","media","quote","table"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"figcaption",group:"caption",children:["format","text"],editable:!0,enter:"p",navigable:!0}),this.editor.observe(new H(this.editor),{target:this.editor.toolbar}),this.editor.observe(new v(this.editor)),this.editor.observe(new T(this.editor)),this.editor.observe(new w(this.editor)),this.editor.observe(new x(this.editor)),this.editor.observe(new A(this.editor)),this.editor.observe(new C(this.editor)),this.editor.observe(new L(this.editor)),this.editor.filters.set(new E(this.editor)),this.editor.filters.set(new y(this.editor))}static defaultConfig(){return{browser:{},filter:{},lang:null,plugins:[],tags:[],toolbar:[]}}}class S extends m{constructor(e){super(e,"block")}insert({id:e}={}){if(!e)throw"Invalid argument";this.editor.insert(this.editor.createElement("app-block",{attributes:{id:e}}))}}class M extends t{constructor(e){super(e,"block")}getFieldsetHtml(){return`\n            <legend>${this.t("Block")}</legend>\n            <div class="editor-required">\n                <label for="editor-id">${this.t("ID")}</label>\n                <input id="editor-id" name="id" type="text" required />\n            </div>\n        `}}class N extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}get content(){return this.shadowRoot.innerHTML}set content(e){this.shadowRoot.innerHTML=e}}class I extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof N&&e.id&&this.editor.config.block.api?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("app-block").forEach(e=>this.init(e))}))}async init(e){if(e.id&&this.editor.config.block.api)try{const t=await fetch(this.editor.config.block.api.replace("{id}",e.id),{mode:"no-cors"});if(t.ok){let i="";this.editor.config.block.css&&(i=this.editor.config.block.css.split(",").map(e=>`<link rel="stylesheet" href="${e}">`).join(""));const r=await t.text();e.content=i+r}}catch(e){console.error(e)}}}const R={de:{Cancel:"Abbrechen",Height:"Höhe",Ifrane:"Iframe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class q extends a{constructor(e){super(e,"block")}init(){this.editor.registerElement("app-block",N),this.editor.tags.create({name:"app-block",group:"section",attributes:["id"],deletable:!0,empty:!0,navigable:!0,sortable:!0}),this.registerTranslator(R),this.editor.observe(new I(this.editor)),this.editor.config.block.browser?this.editor.dialogs.set(new f(this.editor,"block",this.editor.config.block.browser)):this.editor.dialogs.set(new M(this.editor)),this.editor.commands.set(new S(this.editor))}static defaultConfig(){return{api:null,browser:null,css:null}}}class D extends a{constructor(e){super(e,"bold")}init(){this.editor.tags.create({name:"b",group:"format",children:["text"]}),this.registerCommand("bold","b")}}class U extends m{constructor(e){super(e,"details")}insert(e={}){this.editor.insert(this.editor.createElement("details"))}}class $ extends r{constructor(e){super(e,"details")}filter(e){e.querySelectorAll("details > summary:only-child").forEach(e=>e.parentElement.removeChild(e))}}class j extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{if(e instanceof HTMLDetailsElement)this.init(e);else if(e instanceof HTMLElement){e.querySelectorAll("details").forEach(e=>this.init(e));const t=e.closest("details");t&&this.editor.content.contains(t)&&(t.open=!0)}}))}init(e){e.open=!0,e.querySelectorAll(":scope > summary:not(:first-child)").forEach(t=>e.removeChild(t)),e.querySelector(":scope > summary:first-child")||e.insertAdjacentElement("afterbegin",this.editor.createElement("summary")),e.querySelector(":scope > slot")||e.appendChild(this.editor.createElement("slot"))}}class B extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&"summary"===e.tagName.toLowerCase()?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("summary").forEach(e=>this.init(e))}))}init(e){const t=()=>{e.textContent.trim()||(e.textContent=this.editor.i18n.translate("details","Details"))};t(),e.addEventListener("blur",t),e.addEventListener("keydown",e=>{" "===e.key&&(e.preventDefault(),e.cancelBubble=!0)}),e.addEventListener("keyup",e=>{" "===e.key&&(this.editor.insertText(" "),e.preventDefault(),e.cancelBubble=!0)})}}const K={de:{Details:"Details"}};class O extends a{constructor(e){super(e,"details")}init(){this.editor.tags.create({name:"details",group:"section",children:["figure","list","paragraph","summary"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"summary",group:"summary",children:["text"],editable:!0,enter:"p",navigable:!0}),this.editor.observe(new j(this.editor)),this.editor.observe(new B(this.editor)),this.registerTranslator(K),this.editor.commands.set(new U(this.editor)),this.editor.filters.set(new $(this.editor))}}class F extends m{constructor(e){super(e,"div")}insert(e={}){this.editor.insert(this.editor.createElement("div",{attributes:e}))}}class z extends t{constructor(e){super(e,"div")}getFieldsetHtml(){return`\n            <legend>${this.t("Division")}</legend>\n            <div>\n                <label for="editor-class">${this.t("CSS class")}</label>\n                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />\n            </div>\n        `}}class W extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLDivElement?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("div").forEach(e=>this.init(e))}))}init(e){e.querySelector(":scope > slot")||e.appendChild(this.editor.createElement("slot"))}}const V={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse",Division:"Division","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern"}};class P extends a{constructor(e){super(e,"div")}init(){this.editor.tags.create({name:"div",group:"section",attributes:["class"],children:["block","figure"],deletable:!0,navigable:!0,sortable:!0}),this.editor.observe(new W(this.editor)),this.registerTranslator(V),this.editor.dialogs.set(new z(this.editor)),this.editor.commands.set(new F(this.editor))}}class Z extends m{constructor(e){super(e,"fullscreen")}execute(){this.editor.element.classList.contains("editor-fullscreen")?this.editor.element.classList.remove("editor-fullscreen"):this.editor.element.classList.add("editor-fullscreen")}}class G extends a{constructor(e){super(e,"fullscreen")}init(){this.editor.commands.set(new Z(this.editor))}}class J extends m{constructor(e){super(e,"gallery")}insert(e={}){this.editor.insert(this.editor.createElement("figure",{attributes:{class:"gallery"}}))}}class Q extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&"figure"===e.tagName.toLowerCase()&&e.classList.contains("gallery")?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("figure.gallery").forEach(e=>this.init(e))}))}init(e){if(!e.querySelector(":scope > slot")){const t=this.editor.createElement("slot"),i=e.querySelector(":scope > figcaption");i?i.insertAdjacentElement("beforebegin",t):e.appendChild(t)}}}class X extends a{constructor(e){super(e,"gallery")}init(){this.editor.observe(new Q(this.editor)),this.editor.commands.set(new J(this.editor))}}class Y extends a{constructor(e){super(e,"heading")}init(){this.editor.tags.create({name:"h2",group:"heading",children:["text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("heading","h2")}}class _ extends m{constructor(e){super(e,"iframe")}insert({src:e,caption:t="",width:i="",height:r="",allowfullscreen:n="allowfullscreen"}={}){if(!e)throw"Invalid argument";const s=this.editor.createElement("figure",{attributes:{class:"iframe"}});s.appendChild(this.editor.createElement("iframe",{attributes:{src:this.editor.url(e),width:i,height:r,allowfullscreen:n}})),s.appendChild(this.editor.createElement("figcaption",{html:t})),this.editor.insert(s)}}class ee extends t{constructor(e){super(e,"iframe")}getFieldsetHtml(){return`\n            <legend>${this.t("Iframe")}</legend>\n            <div class="editor-required">\n                <label for="editor-src">${this.t("URL")}</label>\n                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />\n            </div>\n            <div>\n                <label for="editor-width">${this.t("Width")}</label>\n                <input id="editor-width" name="width" type="number" />\n            </div>\n            <div>\n                <label for="editor-height">${this.t("Height")}</label>\n                <input id="editor-height" name="height" type="number" />\n            </div>\n        `}}class te extends a{constructor(e){super(e,"iframe")}init(){this.editor.tags.create({name:"iframe",group:"media",attributes:["allowfullscreen","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(R),this.editor.config.iframe.browser?this.editor.dialogs.set(new f(this.editor,"iframe",this.editor.config.iframe.browser)):this.editor.dialogs.set(new ee(this.editor)),this.editor.commands.set(new _(this.editor))}static defaultConfig(){return{browser:null}}}class ie extends m{constructor(e){super(e,"image")}insert({src:e,caption:t="",width:i="",height:r="",alt:n=""}={}){if(!e)throw"Invalid argument";const s=this.editor.createElement("figure",{attributes:{class:"image"}});s.appendChild(this.editor.createElement("img",{attributes:{src:this.editor.url(e),width:i,height:r,alt:n}})),s.appendChild(this.editor.createElement("figcaption",{html:t})),this.editor.insert(s)}}class re extends t{constructor(e){super(e,"image")}getFieldsetHtml(){return`\n            <legend>${this.t("Image")}</legend>\n            <div class="editor-required">\n                <label for="editor-src">${this.t("URL")}</label>\n                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />\n            </div>\n            <div>\n                <label for="editor-alt">${this.t("Alternative text")}</label>\n                <input id="editor-alt" name="alt" type="text" placeholder="${this.t("Replacement text for use when media elements are not available")}" />\n            </div>\n            <div>\n                <label for="editor-width">${this.t("Width")}</label>\n                <input id="editor-width" name="width" type="number" />\n            </div>\n            <div>\n                <label for="editor-height">${this.t("Height")}</label>\n                <input id="editor-height" name="height" type="number" />\n            </div>\n        `}}const ne={de:{"Alternative text":"Alternativtext",Cancel:"Abbrechen",Height:"Höhe",Image:"Bild","Insert URL to media element":"URL zum Medienelement eingeben","Replacement text for use when media elements are not available":"Ersatztext, falls Medienelemente nicht verfügbar sind",Save:"Speichern",URL:"URL",Width:"Breite"}};class se extends a{constructor(e){super(e,"image")}init(){this.editor.tags.create({name:"img",group:"media",attributes:["alt","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(ne),this.editor.config.image.browser?this.editor.dialogs.set(new f(this.editor,"image",this.editor.config.image.browser)):this.editor.dialogs.set(new re(this.editor)),this.editor.commands.set(new ie(this.editor))}static defaultConfig(){return{browser:null}}}class oe extends a{constructor(e){super(e,"italic")}init(){this.editor.tags.create({name:"i",group:"format",children:["text"]}),this.registerCommand("italic","i")}}class ae extends m{constructor(e){super(e,"link")}insert({href:e=null}={}){const t=this.editor.getSelectedElement(),i=t instanceof HTMLAnchorElement?t:null;e&&i?i.setAttribute("href",this.editor.url(e)):e?this.editor.format(this.editor.createElement("a",{attributes:{href:this.editor.url(e)}})):i&&i.parentElement.replaceChild(this.editor.createText(i.textContent),i)}}class le extends t{constructor(e){super(e,"link")}getFieldsetHtml(){return`\n            <legend>${this.t("Link")}</legend>\n            <div>\n                <label for="editor-href">${this.t("URL")}</label>\n                <input id="editor-href" name="href" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to add a link or leave empty to unlink")}" />\n            </div>\n        `}}const de={de:{Cancel:"Abbrechen","Insert URL to add a link or leave empty to unlink":"URL eingeben um zu verlinken oder leer lassen um Link zu entfernen",Link:"Link",Save:"Speichern",URL:"URL"}};class ce extends a{constructor(e){super(e,"link")}init(){this.editor.tags.create({name:"a",group:"format",attributes:["href"]}),this.registerTranslator(de),this.editor.dialogs.set(new le(this.editor)),this.editor.commands.set(new ae(this.editor))}}class he extends o{observe(e){e.forEach(e=>e.removedNodes.forEach(t=>{t instanceof HTMLLIElement&&e.target.children.length<=0&&e.target.parentElement.removeChild(e.target)}))}}class me extends m{constructor(e){super(e,"orderedlist")}insert(e={}){const t=this.editor.createElement("ol");t.appendChild(this.editor.createElement("li")),this.editor.insert(t)}}class ue extends m{constructor(e){super(e,"unorderedlist")}insert(e={}){const t=this.editor.createElement("ul");t.appendChild(this.editor.createElement("li")),this.editor.insert(t)}}class ge extends a{constructor(e){super(e,"list")}init(){this.editor.tags.create({name:"ul",group:"list",children:["listitem"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"ol",group:"list",children:["listitem"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"li",group:"listitem",children:["break","format","text"],deletable:!0,editable:!0,enter:"li",navigable:!0,sortable:!0}),this.editor.commands.set(new ue(this.editor)),this.editor.commands.set(new me(this.editor)),this.editor.observe(new he(this.editor))}}class fe extends a{constructor(e){super(e,"paragraph")}init(){this.editor.tags.create({name:"p",group:"paragraph",children:["break","format","text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("paragraph","p")}}class be extends m{constructor(e){super(e,"quote")}insert(e={}){const t=this.editor.createElement("figure",{attributes:{class:"quote"}});t.appendChild(this.editor.createElement("blockquote")),t.appendChild(this.editor.createElement("figcaption")),this.editor.insert(t)}}class pe extends o{observe(e){e.forEach(e=>e.removedNodes.forEach(t=>{t instanceof HTMLElement&&"blockquote"===t.tagName.toLowerCase()&&"figure"===e.target.tagName.toLowerCase()&&e.target.classList.contains("quote")&&e.target.parentElement.removeChild(e.target)}))}}class Ee extends a{constructor(e){super(e,"quote")}init(){this.editor.tags.create({name:"blockquote",group:"quote",children:["break","format","text"],deletable:!0,editable:!0,enter:"p",navigable:!0}),this.editor.commands.set(new be(this.editor)),this.editor.observe(new pe(this.editor))}}class we extends m{constructor(e){super(e,"section")}insert(e={}){this.editor.insert(this.editor.createElement("section",{attributes:e}))}}class ve extends t{constructor(e){super(e,"section")}getFieldsetHtml(){return`\n            <legend>${this.t("Section")}</legend>\n            <div>\n                <label for="editor-class">${this.t("CSS class")}</label>\n                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />\n            </div>\n        `}}class ye extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLElement&&"section"===e.tagName.toLowerCase()?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("section").forEach(e=>this.init(e))}))}init(e){e.querySelector(":scope > slot")||e.appendChild(this.editor.createElement("slot"))}}const Le={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern",Section:"Sektion"}};class Ce extends a{constructor(e){super(e,"section")}init(){this.editor.tags.create({name:"section",group:"section",attributes:["class"],children:["figure","heading","list","paragraph"],deletable:!0,navigable:!0,sortable:!0}),this.editor.observe(new ye(this.editor)),this.registerTranslator(Le),this.editor.dialogs.set(new ve(this.editor)),this.editor.commands.set(new we(this.editor))}}class xe extends a{constructor(e){super(e,"subheading")}init(){this.editor.tags.create({name:"h3",group:"heading",children:["text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("subheading","h3")}}class Te extends m{constructor(e){super(e,"table")}insert({rows:e=1,cols:t=1}={}){if(e<=0||t<=0)throw"Invalid argument";const i=this.editor.createElement("table");["thead","tbody","tfoot"].forEach(r=>{const n=this.editor.createElement(r),s="thead"===r?"th":"td",o="tbody"===r?e:1;let a;i.appendChild(n);for(let e=0;e<o;e++){a=this.editor.createElement("tr"),n.appendChild(a);for(let e=0;e<t;++e)a.appendChild(this.editor.createElement(s))}});const r=this.editor.createElement("figure",{attributes:{class:"table"}});r.appendChild(i),r.appendChild(this.editor.createElement("figcaption")),this.editor.insert(r)}}class Ae extends t{constructor(e){super(e,"table")}getFieldsetHtml(){return`\n            <legend>${this.t("Table")}</legend>\n            <div class="editor-required">\n                <label for="editor-rows">${this.t("Rows")}</label>\n                <input id="editor-rows" name="rows" type="number" value="1" min="1" required />\n            </div>\n            <div class="editor-required">\n                <label for="editor-cols">${this.t("Columns")}</label>\n                <input id="editor-cols" name="cols" type="number" value="1" min="1" required />\n            </div>\n        `}}class He extends r{constructor(e){super(e,"table")}filter(e){if(e instanceof HTMLTableRowElement&&!e.querySelector("th:not(:empty), td:not(:empty)")||e instanceof HTMLTableSectionElement&&e.rows.length<=0||e instanceof HTMLTableElement&&e.querySelector("thead, tfoot")&&!e.querySelector("tbody"))for(;e.firstChild;)e.removeChild(e.firstChild)}}class ke extends o{observe(e){e.forEach(e=>e.addedNodes.forEach(e=>{e instanceof HTMLTableElement?this.init(e):e instanceof HTMLElement&&e.querySelectorAll("table").forEach(e=>this.init(e))}))}init(e){this.sections(e),this.keyboard(e)}sections(e){if(e.tBodies.length>0&&e.tBodies[0].rows[0]&&(!e.tHead||!e.tFoot)){const t=e.tBodies[0].rows[0].cells.length;let i;if(!e.tHead){i=e.createTHead().insertRow();for(let e=0;e<t;e++)i.appendChild(this.editor.createElement("th"))}if(!e.tFoot){i=e.createTFoot().insertRow();for(let e=0;e<t;e++)i.insertCell()}}}keyboard(e){e.addEventListener("keydown",t=>{const i=t.target,r=i.parentElement,n=r.parentElement;if(i instanceof HTMLTableCellElement&&r instanceof HTMLTableRowElement&&(n instanceof HTMLTableElement||n instanceof HTMLTableSectionElement)&&t.altKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){const s=r.cells.length,o=n.rows.length,a=n instanceof HTMLTableElement?r.rowIndex:r.sectionRowIndex;let l;if(t.shiftKey&&("ArrowLeft"===t.key&&i.cellIndex>0||"ArrowRight"===t.key&&i.cellIndex<s-1))l=i.cellIndex+("ArrowLeft"===t.key?-1:1),Array.from(e.rows).forEach(e=>e.deleteCell(l));else if(t.shiftKey&&("ArrowUp"===t.key&&a>0||"ArrowDown"===t.key&&a<o-1))l=a+("ArrowUp"===t.key?-1:1),n.deleteRow(l);else if(t.shiftKey||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key){if(!t.shiftKey&&("ArrowUp"===t.key||"ArrowDown"===t.key)){l=a+("ArrowUp"===t.key?0:1);const e=n.insertRow(l);for(let t=0;t<s;t++)e.insertCell()}}else l=i.cellIndex+("ArrowLeft"===t.key?0:1),Array.from(e.rows).forEach(e=>{e.querySelector(":scope > td")?e.insertCell(l):e.insertBefore(this.editor.createElement("th"),e.cells[l])});t.preventDefault(),t.cancelBubble=!0}})}}const Se={de:{Cancel:"Abbrechen",Columns:"Spalten",Rows:"Zeilen",Save:"Speichern",Table:"Tabelle"}};class Me extends a{constructor(e){super(e,"table")}init(){this.editor.tags.create({name:"table",group:"table",children:["tablesection"],deletable:!0,navigable:!0,sortable:!0}),["thead","tbody","tfoot"].forEach(e=>this.editor.tags.create({name:e,group:"tablesection",children:["tablerow"]})),this.editor.tags.create({name:"tr",group:"tablerow",children:["tablecell"]}),["td","th"].forEach(e=>this.editor.tags.create({name:e,group:"tablecell",children:["break","format","text"],editable:!0,empty:!0})),this.editor.observe(new ke(this.editor)),this.registerTranslator(Se),this.editor.filters.set(new He(this.editor)),this.editor.dialogs.set(new Ae(this.editor)),this.editor.commands.set(new Te(this.editor))}}class Ne extends m{constructor(e){super(e,"video")}insert({src:e,caption:t="",width:i="",height:r="",controls:n="controls"}={}){if(!e)throw"Invalid argument";const s=this.editor.createElement("figure",{attributes:{class:"video"}});s.appendChild(this.editor.createElement("video",{attributes:{src:this.editor.url(e),width:i,height:r,controls:n}})),s.appendChild(this.editor.createElement("figcaption",{html:t})),this.editor.insert(s)}}class Ie extends t{constructor(e){super(e,"video")}getFieldsetHtml(){return`\n            <legend>${this.t("Video")}</legend>\n            <div class="editor-required">\n                <label for="editor-src">${this.t("URL")}</label>\n                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />\n            </div>\n            <div>\n                <label for="editor-width">${this.t("Width")}</label>\n                <input id="editor-width" name="width" type="number" />\n            </div>\n            <div>\n                <label for="editor-height">${this.t("Height")}</label>\n                <input id="editor-height" name="height" type="number" />\n            </div>\n        `}}const Re={de:{Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Video:"Video",Width:"Breite"}};class qe extends a{constructor(e){super(e,"video")}init(){this.editor.tags.create({name:"video",group:"media",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(Re),this.editor.config.video.browser?this.editor.dialogs.set(new f(this.editor,"video",this.editor.config.video.browser)):this.editor.dialogs.set(new Ie(this.editor)),this.editor.commands.set(new Ne(this.editor))}static defaultConfig(){return{browser:null}}}export default class extends h{static defaultConfig(){return{base:{filter:{em:"i",strong:"b"},plugins:[k,p,q,D,O,P,G,X,Y,te,se,oe,ce,ge,fe,Ee,Ce,xe,Me,qe],toolbar:["fullscreen","bold","italic","link","paragraph","heading","subheading","unorderedlist","orderedlist","quote","image","video","audio","iframe","table","section","details","block","div","gallery"]}}}}
