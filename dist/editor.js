var So=Object.defineProperty;var Ho=(r,t,e)=>t in r?So(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var y=(r,t,e)=>(Ho(r,typeof t!="symbol"?t+"":t,e),e),Wt=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)};var m=(r,t,e)=>(Wt(r,t,"read from private field"),e?e.call(r):t.get(r)),n=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},g=(r,t,e,i)=>(Wt(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e);var h=(r,t,e)=>(Wt(r,t,"access private method"),e);var K,W,V,$,Vt=class{constructor(t,e,i=null){n(this,K,void 0);n(this,W,void 0);n(this,V,null);n(this,$,null);if(!(t instanceof T)||!e||typeof e!="string"||i&&typeof i!="string")throw"Invalid argument";g(this,K,t),g(this,W,e),g(this,V,i&&this.editor.tags.get(i)),g(this,$,this.editor.dialogs.get(e))}get editor(){return m(this,K)}get name(){return m(this,W)}get tag(){return m(this,V)}get dialog(){return m(this,$)}execute(){this.dialog?this._openDialog():this._insert(this._selectedAttributes())}_insert(t={}){if(this.tag){Object.keys(t).forEach(i=>this.tag.attributes.includes(i)&&t[i]||delete t[i]);let e=this._selectedElement();this.tag.group!=="format"?this.editor.dom.insert(this.editor.dom.createElement(this.tag.name,{attributes:t})):e&&Object.keys(t).length>0?e.parentElement.replaceChild(this.editor.dom.createElement(this.tag.name,{attributes:t,html:e.textContent}),e):e?e.parentElement.replaceChild(this.editor.dom.createText(e.textContent),e):this.editor.dom.format(this.editor.dom.createElement(this.tag.name,{attributes:t}))}}_openDialog(){this.dialog?.open(t=>this._insert(t),this._selectedAttributes())}_selectedElement(){let t=this.editor.dom.getSelectedElement();return t&&t.localName===this.tag?.name?t:null}_selectedAttributes(){let t=this._selectedElement(),e={};return t&&this.tag&&Array.from(t.attributes).forEach(i=>{this.tag.attributes.includes(i.nodeName)&&(e[i.nodeName]=i.nodeValue)}),e}};K=new WeakMap,W=new WeakMap,V=new WeakMap,$=new WeakMap;var R=Vt;var S,$t=class{constructor(t=[]){n(this,S,new Map);t.forEach(e=>this.set(e))}get(t){return m(this,S).get(t)||null}set(t){if(!(t instanceof R))throw"Invalid argument";m(this,S).set(t.name,t)}execute(t){this.get(t).execute()}freeze(){m(this,S).forEach(t=>Object.freeze(t)),Object.freeze(m(this,S)),Object.freeze(this)}};S=new WeakMap;var Qi=$t;var H,Gt=class{constructor(t=[]){n(this,H,new Map);t.forEach(e=>this.set(e))}get(t){return m(this,H).get(t)||null}set(t){if(!(t instanceof b))throw"Invalid argument";m(this,H).set(t.name,t)}freeze(){m(this,H).forEach(t=>Object.freeze(t)),Object.freeze(m(this,H)),Object.freeze(this)}};H=new WeakMap;var Zi=Gt;var O,z,Zt,yt,Io,Qt=class{constructor(t){n(this,z);n(this,yt);n(this,O,void 0);if(!(t instanceof HTMLElement))throw"Invalid argument";g(this,O,t),this.register(h(this,yt,Io).bind(this))}dispatch(t,e=null,i=null){if(!t||typeof t!="string"||e&&!(e instanceof HTMLElement)||i&&!(i instanceof HTMLElement))throw"Invalid argument";m(this,O).dispatchEvent(new CustomEvent(t,{detail:{element:e,target:i}}))}register(t,e={childList:!0,subtree:!0}){if(typeof t!="function")throw"Invalid argument";new MutationObserver(t).observe(m(this,O),e)}};O=new WeakMap,z=new WeakSet,Zt=function(t,e,i){e instanceof HTMLElement&&i instanceof HTMLElement&&(this.dispatch(t,e,i),this.dispatch(`${t}${e.localName.replace("-","")}`,e,i))},yt=new WeakSet,Io=function(t){t.forEach(e=>{e.addedNodes.forEach(i=>{i instanceof HTMLElement&&(h(this,z,Zt).call(this,"insert",i,e.target),Array.from(i.getElementsByTagName("*")).forEach(s=>h(this,z,Zt).call(this,"insert",s,e.target)))}),e.removedNodes.forEach(i=>i instanceof HTMLElement&&h(this,z,Zt).call(this,"delete",i,e.target))})};var Tt=Qt;var G,Q,Z,Ct,kt,Mo,Jt=class{constructor(t,e){n(this,kt);n(this,G,void 0);n(this,Q,void 0);n(this,Z,void 0);n(this,Ct,{alwaysRaised:"yes",dependent:"yes",height:"",location:"no",menubar:"no",minimizable:"no",modal:"yes",resizable:"yes",scrollbars:"yes",toolbar:"no",width:""});if(!(t instanceof T)||!(e instanceof Document))throw"Invalid argument";g(this,G,t),g(this,Q,e),g(this,Z,this.document.defaultView)}get editor(){return m(this,G)}get document(){return m(this,Q)}get window(){return m(this,Z)}getSelection(){return this.window.getSelection()}getRange(){let t=this.window.getSelection();return t.rangeCount>0?t.getRangeAt(0):null}setRange(t){let e=this.getSelection();e.removeAllRanges(),e.addRange(t)}registerElement(t,e,i=null){typeof this.window.customElements.get(t)=="undefined"&&this.window.customElements.define(t,e,i?{extends:i}:null)}createElement(t,{attributes:e={},html:i=""}={}){let s=this.document.createElement(t);return s.innerHTML=i,Object.entries(e).forEach(([d,c])=>c&&s.setAttribute(d,`${c}`)),s}insert(t){if(!(t instanceof HTMLElement))throw"Invalid argument";let e=this.getSelectedEditable();if(e instanceof HTMLSlotElement&&this.editor.tags.allowed(e.parentElement,t))e.insertAdjacentElement("beforebegin",t);else if(e)this.closest(e,t)?.insertAdjacentElement("afterend",t),e.hasAttribute("data-deletable")&&!e.textContent.trim()&&e.parentElement.removeChild(e);else if(this.editor.tags.allowed(this.editor.root,t))this.editor.root.appendChild(t);else throw"Invalid argument"}insertText(t){let e=this.getSelectedEditable();if(e){let i=this.getRange();i.deleteContents(),i.insertNode(this.createText(t)),i.collapse(),e.normalize()}}format(t){if(!(t instanceof HTMLElement))throw"Invalid argument";let e=this.getRange(),i=this.getSelectedEditable();if(!e||e.collapsed||!e.toString().trim()||!i||!this.editor.tags.allowed(i,t))return;e.startContainer instanceof Text&&e.startContainer.parentElement!==i&&e.setStartBefore(e.startContainer.parentElement),e.endContainer instanceof Text&&e.endContainer.parentElement!==i&&e.setEndAfter(e.endContainer.parentElement);let s=e.toString(),d=Array.from(e.cloneContents().childNodes).every(c=>c instanceof Text&&!c.textContent.trim()||c instanceof HTMLElement&&c.localName===t.localName);e.deleteContents(),d?e.insertNode(this.createText(s)):(t.textContent=s,e.insertNode(t)),i.normalize()}createText(t){return this.document.createTextNode(t)}arbitrary(t){return t===this.editor.root||t?.hasAttribute("data-arbitrary")}contains(t){if(!(t instanceof HTMLElement))throw"Invalid argument";return this.editor.root.contains(t)||t.closest(this.editor.root.localName)?.parentElement===null}closest(t,e){if(!(t instanceof HTMLElement)||!this.contains(t.parentElement))throw"Invalid argument";let i=t,s=t.parentElement;do if(this.arbitrary(s)&&this.editor.tags.allowed(s,e))return i;while((i=s)&&(s=s.parentElement)&&this.contains(s));return null}wrap(t,e,i={}){let s;if(t instanceof HTMLElement){if(t.parentElement.localName!==e&&(s=this.editor.dom.closest(t,e))){let d=this.createElement(e,i);s.insertAdjacentElement("afterend",d),d.appendChild(t)}}else throw"Invalid argument"}getSelectedElement(){let t=this.getSelection(),e=t.anchorNode instanceof Text?t.anchorNode.parentElement:t.anchorNode,i=t.focusNode instanceof Text?t.focusNode.parentElement:t.focusNode;return e instanceof HTMLElement&&i instanceof HTMLElement&&e===i&&this.contains(e)?e:null}getSelectedEditable(){let t=this.getSelection(),e=t.anchorNode instanceof Text?t.anchorNode.parentElement:t.anchorNode,i=t.focusNode instanceof Text?t.focusNode.parentElement:t.focusNode;if(e instanceof HTMLElement&&i instanceof HTMLElement){let s=e.closest("[contenteditable=true]"),d=i.closest("[contenteditable=true]");if(s instanceof HTMLElement&&s===d&&this.contains(s))return s}return null}focusEnd(t){if(!(t instanceof HTMLElement))throw"Invalid argument";t.focus();let e=this.document.createRange();e.selectNodeContents(t),e.collapse(),this.setRange(e)}open({url:t,name:e,call:i,params:s={}}){if(!t||typeof t!="string"||!e||typeof e!="string"||typeof i!="function")throw"Invalid argument";let d=this.createElement("a",{attributes:{href:t}}),c=new URL(d.href);Object.entries(s).forEach(([p,L])=>c.searchParams.set(p,`${L}`));let u=this.window.open(c.toString(),e,h(this,kt,Mo).call(this));this.window.addEventListener("message",p=>{p.origin===c.origin&&p.source===u&&(i(p.data),u.close())},!1)}getWidth(){return this.window.screen.width}getHeight(){return this.window.screen.height}};G=new WeakMap,Q=new WeakMap,Z=new WeakMap,Ct=new WeakMap,kt=new WeakSet,Mo=function(){let t=Object.assign({},m(this,Ct),{height:`${this.getHeight()}`,width:`${this.getWidth()}`},this.editor.config.base.browser);return Object.entries(t).filter(([,e])=>!!e).map(([e,i])=>`${e}=${i}`).join(",")};var Ji=Jt;var J,Xt=class{constructor(t){n(this,J,void 0);if(!(t instanceof T))throw"Invalid argument";g(this,J,t)}get editor(){return m(this,J)}filter(t){throw"Not implemented"}};J=new WeakMap;var _=Xt;var I,Yt=class{constructor(){n(this,I,new Set)}add(t){if(!(t instanceof _))throw"Invalid argument";m(this,I).add(t)}filter(t){if(!(t instanceof HTMLElement))throw"Invalid argument";m(this,I).forEach(e=>{t.normalize(),e.filter(t)})}freeze(){m(this,I).forEach(t=>Object.freeze(t)),Object.freeze(m(this,I)),Object.freeze(this)}};I=new WeakMap;var Xi=Yt;var te=class{constructor({name:t,group:e,...i}={}){y(this,"name");y(this,"group");y(this,"children",[]);y(this,"attributes",[]);y(this,"alignable",!1);y(this,"arbitrary",!1);y(this,"deletable",!1);y(this,"editable",!1);y(this,"empty",!1);y(this,"focusable",!1);y(this,"navigable",!1);y(this,"slotable",!1);y(this,"sortable",!1);y(this,"enter",null);let s=u=>u&&typeof u=="string",d=u=>typeof u=="undefined"||u&&typeof u=="string",c=u=>typeof u=="undefined"||Array.isArray(u)&&!u.find(p=>!s(p));if(!s(t)||!s(e)||!d(i.enter)||!c(i.children)||!c(i.attributes))throw"Invalid argument";this.name=t,this.group=e,this.children=i.children||[],this.attributes=i.attributes||[],this.arbitrary=i.arbitrary===!0,this.alignable=i.alignable===!0,this.deletable=i.deletable===!0,this.editable=i.editable===!0,this.empty=i.empty===!0,this.focusable=i.focusable===!0,this.navigable=i.navigable===!0,this.slotable=i.slotable===!0,this.sortable=i.sortable===!0,this.enter=i.enter||null}},Bt=te;var X,ee=class{constructor(t){n(this,X,void 0);if(!(t instanceof T))throw"Invalid argument";g(this,X,t)}get editor(){return m(this,X)}static get name(){throw"Missing plugin name"}static get dependencies(){return[]}static get config(){return{}}init(){throw"Not implemented"}_(t){return this.editor.translator.translate(this.constructor.name,t)}_i18n(t){t[this.editor.config.base.lang]&&this.editor.translator.set(this.constructor.name,t[this.editor.config.base.lang])}_command(t){this.editor.commands.set(new R(this.editor,this.constructor.name,t))}_tag(t){this.editor.tags.set(new Bt(t))}_toolbar(t,e=null,i=!1){if(!t||typeof t!="string"||e&&typeof e!="string")throw"Invalid argument";let s=this._(t),d=this.editor.dom.createElement("button",{attributes:{type:"button","data-command":this.constructor.name,title:s,"data-key":e},html:s});i?this.editor.formatbar.appendChild(d):this.editor.toolbar.appendChild(d)}};X=new WeakMap;var o=ee;var P,ie=class{constructor(t=[]){n(this,P,new Map);t.forEach(e=>this.set(e))}get(t){return m(this,P).get(t)||null}set(t){if(!(t instanceof o))throw"Invalid argument";m(this,P).set(t.constructor.name,t)}init(){m(this,P).forEach(t=>t.init())}freeze(){m(this,P).forEach(t=>Object.freeze(t)),Object.freeze(m(this,P)),Object.freeze(this)}};P=new WeakMap;var Yi=ie;var M,re=class{constructor(t=[]){n(this,M,new Map);t.forEach(e=>this.set(e))}get(t){return m(this,M).get(t instanceof HTMLElement?t.localName:t)||null}set(t){if(!(t instanceof Bt))throw"Invalid argument";m(this,M).set(t.name,t)}allowed(t,e,i=!1){let s=i?e:this.get(e)?.group;return!!this.get(t)?.children.includes(s)}freeze(){m(this,M).forEach(t=>{Object.freeze(t.children),Object.freeze(t.attributes),Object.freeze(t)}),Object.freeze(m(this,M)),Object.freeze(this)}};M=new WeakMap;var tr=re;var v,se=class{constructor(){n(this,v,new Map)}get(t){return m(this,v).get(t)||null}set(t,e){if(!t||typeof t!="string"||!(e instanceof Object))throw"Invalid argument";m(this,v).set(t,e)}translate(t,e){return this.get(t)?.[e]||e}freeze(){m(this,v).forEach(t=>Object.freeze(t)),Object.freeze(m(this,v)),Object.freeze(this)}};v=new WeakMap;var er=se;var Y,q,tt,et,it,rt,st,ot,at,nt,At,Dt,Pt,St,Ht,It,oe=class{constructor(t,e={}){n(this,Y,void 0);n(this,q,{});n(this,tt,void 0);n(this,et,void 0);n(this,it,void 0);n(this,rt,void 0);n(this,st,void 0);n(this,ot,void 0);n(this,at,void 0);n(this,nt,void 0);n(this,At,new er);n(this,Dt,new tr);n(this,Pt,new Xi);n(this,St,new Zi);n(this,Ht,new Qi);n(this,It,new Yi);if(!(t instanceof HTMLElement)||!(e instanceof Object))throw"Invalid argument";g(this,Y,t),g(this,q,e),g(this,tt,new Ji(this,this.orig.ownerDocument)),g(this,et,this.dom.createElement("akilli-editor")),g(this,it,this.dom.createElement("editor-toolbar",{attributes:{role:"toolbar"}})),this.element.appendChild(this.toolbar),g(this,rt,new Tt(this.toolbar)),g(this,st,this.dom.createElement("editor-formatbar",{attributes:{role:"toolbar"}})),this.formatbar.hidden=!0,this.element.appendChild(this.formatbar),g(this,ot,new Tt(this.formatbar)),g(this,at,this.dom.createElement("editor-root")),this.element.appendChild(this.root),g(this,nt,new Tt(this.root))}get orig(){return m(this,Y)}get config(){return m(this,q)}get dom(){return m(this,tt)}get element(){return m(this,et)}get toolbar(){return m(this,it)}get toolbarDispatcher(){return m(this,rt)}get formatbar(){return m(this,st)}get formatbarDispatcher(){return m(this,ot)}get root(){return m(this,at)}get rootDispatcher(){return m(this,nt)}get translator(){return m(this,At)}get tags(){return m(this,Dt)}get filters(){return m(this,Pt)}get dialogs(){return m(this,St)}get commands(){return m(this,Ht)}get plugins(){return m(this,It)}static get defaultConfig(){return{}}init(){let t=this.config;g(this,q,{});let e=this.constructor.defaultConfig.base?.plugins||[],i=e;Array.isArray(t.base?.plugins)&&t.base.plugins.length>0&&(i=[],t.base.plugins.forEach(c=>{let u=e.find(p=>p.name===c);u&&i.push(u)}));let s=new Set,d=c=>{c.dependencies?.forEach(d),s.add(c)};i.map(d),s.forEach(c=>{Object.entries(c.config).forEach(([u,p])=>{var L,w;(L=this.config)[w=c.name]??(L[w]={}),this.config[c.name][u]=t[c.name]?.[u]||this.constructor.defaultConfig[c.name]?.[u]||p}),this.plugins.set(new c(this))}),this.plugins.init(),this.toolbarDispatcher.dispatch("init"),this.formatbarDispatcher.dispatch("init"),this.rootDispatcher.dispatch("init")}freeze(){Object.freeze(this.config),this.translator.freeze(),this.tags.freeze(),this.filters.freeze(),this.dialogs.freeze(),this.commands.freeze(),this.plugins.freeze()}load(){this.orig instanceof HTMLTextAreaElement?(this.orig.form.addEventListener("submit",()=>this.save()),this.setHtml(this.orig.value.replace("/&nbsp;/g"," "))):this.setHtml(this.orig.innerHTML),this.orig.insertAdjacentElement("afterend",this.element),this.orig.hidden=!0}destroy(){this.element.parentElement.removeChild(this.element),this.orig.hidden=!1}getHtml(){let t=this.dom.createElement(this.root.localName,{html:this.root.innerHTML});return this.filters.filter(t),this.rootDispatcher.dispatch("gethtml",t),t.innerHTML}setHtml(t){let e=this.dom.createElement(this.root.localName,{html:t});this.rootDispatcher.dispatch("sethtml",e),this.filters.filter(e),this.root.innerHTML=e.innerHTML}save(){this.orig instanceof HTMLTextAreaElement?this.orig.value=this.getHtml():this.orig.innerHTML=this.getHtml()}url(t){let e=this.dom.window.origin||this.dom.window.location.origin,i=this.dom.createElement("a",{attributes:{href:t}});return e===i.origin?i.pathname:i.href}static create(t,e={}){let i=new this(t,e);return i.init(),i.freeze(),i.load(),i}};Y=new WeakMap,q=new WeakMap,tt=new WeakMap,et=new WeakMap,it=new WeakMap,rt=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakMap,nt=new WeakMap,At=new WeakMap,Dt=new WeakMap,Pt=new WeakMap,St=new WeakMap,Ht=new WeakMap,It=new WeakMap;var T=oe;var lt,dt,mt,ir,ae=class{constructor(t,e){n(this,mt);n(this,lt,void 0);n(this,dt,void 0);if(!(t instanceof T)||!e||typeof e!="string")throw"Invalid argument";g(this,lt,t),g(this,dt,e)}get editor(){return m(this,lt)}get name(){return m(this,dt)}open(t,e={}){let i=this.editor.dom.getRange(),s=()=>{i&&this.editor.dom.setRange(i),h(this,mt,ir).call(this)};h(this,mt,ir).call(this);let d=this.editor.dom.createElement("form",{attributes:{method:"dialog"}}),c=this.editor.dom.createElement("fieldset"),u=this.editor.dom.createElement("button",{attributes:{type:"button"},html:this._("Cancel")});u.addEventListener("click",s),d.appendChild(c),d.appendChild(u),d.appendChild(this.editor.dom.createElement("button",{html:this._("Save")})),this._initFieldset(c),d.addEventListener("submit",L=>{L.preventDefault(),L.stopPropagation(),s();let w={};Array.from(c.elements).forEach(E=>w[E.name]=E.value),t(w)}),Object.entries(e).forEach(([L,w])=>c.elements[L]&&(c.elements[L].value=w));let p=this.editor.dom.createElement("editor-dialog");p.addEventListener("close",s),p.appendChild(d),p.show(),this.editor.element.appendChild(p)}_(t){return this.editor.translator.translate(this.name,t)}_initFieldset(t){throw"Not implemented"}_createInput(t,e,i,s={}){if(!t||typeof t!="string"||!e||typeof e!="string"||!i||typeof i!="string")throw"Invalid argument";Object.assign(s,{id:`editor-${t}`,name:t,type:e});let d=this.editor.dom.createElement("div");return d.appendChild(this.editor.dom.createElement("label",{attributes:{for:s.id},html:i})),d.appendChild(this.editor.dom.createElement("input",{attributes:s})),s.required&&d.setAttribute("data-required",""),d}};lt=new WeakMap,dt=new WeakMap,mt=new WeakSet,ir=function(){Array.from(this.editor.element.getElementsByTagName("editor-dialog")).forEach(t=>{t.parentElement.removeChild(t)})};var b=ae;var ne=class extends b{constructor(t){super(t,"abbreviation")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Abbreviation")})),t.appendChild(this._createInput("title","text",this._("Full term"),{placeholder:this._("Insert full term or leave empty to remove it")}))}},rr=ne;var ct,le=class{constructor(t){n(this,ct,void 0);if(!(t instanceof T))throw"Invalid argument";g(this,ct,t)}get editor(){return m(this,ct)}handleEvent(t){typeof this[t.type]=="function"&&this[t.type](t)}};ct=new WeakMap;var f=le;var l=Object.freeze({BACKSPACE:"Backspace",DEL:"Delete",DOWN:"ArrowDown",END:"End",ENTER:"Enter",ESC:"Escape",HOME:"Home",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SPACE:" ",UP:"ArrowUp"});function x(r,t,{alt:e=!1,ctrl:i=!1,shift:s=!1}={}){return(Array.isArray(t)&&t.includes(r.key)||r.key===t)&&r.altKey===e&&r.ctrlKey===i&&r.shiftKey===s}var de=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.hasAttribute("data-alignable")&&t.detail.element.addEventListener("keydown",this)}keydown(t){let e={[l.UP]:null,[l.LEFT]:"left",[l.DOWN]:"center",[l.RIGHT]:"right"};t.target===t.currentTarget&&x(t,Object.keys(e),{shift:!0})&&(t.preventDefault(),t.stopPropagation(),t.target.classList.remove(...Object.values(e)),e[t.key]&&t.target.classList.add(e[t.key]))}},sr=de;var Mt,vo,ht,or,me=class extends _{constructor(){super(...arguments);n(this,Mt);n(this,ht)}filter(t){let e=this.editor.tags.get(t),i=this.editor.tags.allowed(t,"p"),s=e.editable||e.group==="format",d=[],c=(u=null)=>{i&&d.length>0&&(t.insertBefore(this.editor.dom.createElement("p",{html:d.join(" ")}),u),d=[])};Array.from(t.childNodes).forEach(u=>{let p=u.textContent.trim();if(u instanceof HTMLElement){let L=h(this,Mt,vo).call(this,u),w=this.editor.tags.get(L);if(w&&this.editor.tags.allowed(t,L))c(L),h(this,ht,or).call(this,L,w);else if(w&&w.group==="format"&&i){let E=h(this,ht,or).call(this,L,w);E&&(d.push(E.outerHTML),t.removeChild(E))}else!s&&p&&i?(d.push(p),t.removeChild(L)):s&&p?t.replaceChild(this.editor.dom.createText(p),L):t.removeChild(L)}else u instanceof Text?(!s&&p&&i&&d.push(p),(!s||!p)&&t.removeChild(u)):u instanceof Node&&t.removeChild(u)}),c()}};Mt=new WeakSet,vo=function(t){let e=this.editor.config.base.filter[t.localName];if(!e)return t;let i=this.editor.dom.createElement(e,{html:t.innerHTML});return t.parentElement.replaceChild(i,t),i},ht=new WeakSet,or=function(t,e){return Array.from(t.attributes).forEach(i=>!e.attributes.includes(i.name)&&t.removeAttribute(i.name)),t.hasChildNodes()&&this.editor.filters.filter(t),t.hasChildNodes()||e.empty?t:(t.parentElement.removeChild(t),null)};var ar=me;var ce=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.hasAttribute("data-deletable")&&t.detail.element.addEventListener("keydown",this)}keydown(t){t.target===t.currentTarget&&x(t,l.DEL,{ctrl:!0})&&(t.target.previousElementSibling instanceof HTMLElement&&this.editor.dom.focusEnd(t.target.previousElementSibling),t.target.parentElement.removeChild(t.target),t.preventDefault(),t.stopPropagation())}},nr=ce;var he=class extends HTMLElement{get open(){return this.hasAttribute("open")}set open(t){t===!0?this.setAttribute("open",""):this.removeAttribute("open")}constructor(){super();this.addEventListener("keydown",t=>t.key===l.ESC&&this.close()),this.addEventListener("click",t=>t.target===this&&this.close())}connectedCallback(){this.setAttribute("role","dialog"),this.tabIndex=-1,this.focus()}show(){this.open=!0,this.dispatchEvent(new CustomEvent("show",{detail:{element:this,target:this}}))}close(){this.open=!1,this.dispatchEvent(new CustomEvent("close",{detail:{element:this,target:this}}))}},lr=he;var ue=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.contentEditable==="true"&&t.detail.element.addEventListener("keydown",this)}keydown(t){if(x(t,l.ENTER,{shift:!0})&&!this.editor.tags.allowed(t.target,"br"))t.preventDefault(),t.stopPropagation();else if(x(t,l.ENTER)){t.preventDefault(),t.stopPropagation();let e=this.editor.tags.get(t.target)?.enter;e&&(t.target.textContent.trim()||!t.target.hasAttribute("data-deletable")?this.editor.dom.closest(t.target,e)?.insertAdjacentElement("afterend",this.editor.dom.createElement(e)):t.target instanceof HTMLParagraphElement||(this.editor.dom.closest(t.target,"p")?.insertAdjacentElement("afterend",this.editor.dom.createElement("p")),t.target.parentElement.removeChild(t.target)))}else x(t,l.BACKSPACE)&&!t.target.textContent&&t.target.hasAttribute("data-deletable")?(t.target.previousElementSibling instanceof HTMLElement&&this.editor.dom.focusEnd(t.target.previousElementSibling),t.target.parentElement.removeChild(t.target),t.preventDefault(),t.stopPropagation()):/^[A-Z]$/.test(t.key)&&x(t,t.key,{alt:!0,shift:!0})&&(t.preventDefault(),t.stopPropagation(),this.editor.formatbar.querySelector(`button[data-key=${t.key.toLowerCase()}]`)?.click())}},dr=ue;var fe=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.hasAttribute("data-focusable")&&t.detail.element.focus()}},mr=fe;var pe=class extends f{insertbutton(t){let e=t.detail.element.getAttribute("data-key");if(e){let i=this.editor.translator.translate(a.name,"Alt"),s=this.editor.translator.translate(a.name,"Shift");t.detail.element.title+=` [${i} + ${s} + ${e}]`}t.detail.element.getAttribute("data-command")&&t.detail.element.addEventListener("click",this),t.detail.element.parentElement===this.editor.toolbar&&(t.detail.element.tabIndex=-1,t.detail.element.addEventListener("keydown",this))}click(t){this.editor.commands.execute(t.target.getAttribute("data-command"))}keydown(t){if(x(t,[l.LEFT,l.RIGHT,l.HOME,l.END])){let e=t.target.previousElementSibling,i=t.target.nextElementSibling,s=t.target.parentElement.firstElementChild,d=t.target.parentElement.lastElementChild,c=t.target===s,u=t.target===d;t.key===l.LEFT&&!c?e.focus():t.key===l.RIGHT&&!u?i.focus():t.key===l.HOME||t.key===l.RIGHT&&u?s.focus():(t.key===l.END||t.key===l.LEFT&&c)&&d.focus(),t.preventDefault(),t.stopPropagation()}}},vt=pe;var ge=class extends vt{constructor(t){super(t);this.editor.formatbar.addEventListener("insertbutton",this),this.editor.dom.document.addEventListener("selectionchange",this)}selectionchange(){let t=this.editor.dom.getSelectedEditable();if(t&&!this.editor.dom.getSelection().isCollapsed&&this.editor.tags.allowed(t,"format",!0)){let e=t.offsetTop+t.offsetParent.offsetTop-this.editor.formatbar.clientHeight;this.editor.formatbar.style.top=`${e}px`,this.editor.formatbar.hidden=!1}else this.editor.formatbar.hidden=!0,this.editor.formatbar.removeAttribute("style")}},cr=ge;var Ft,Fo,be=class extends f{constructor(t){super(t);n(this,Ft);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.hasAttribute("data-navigable")&&(t.detail.element.tabIndex=0,t.detail.element.addEventListener("keydown",this))}keydown(t){if(t.target===t.currentTarget&&x(t,[l.UP,l.DOWN,l.HOME,l.END])&&h(this,Ft,Fo).call(this,t.target)){let e=t.target.previousElementSibling,i=t.target.nextElementSibling,s=t.target.parentElement.firstElementChild,d=t.target.parentElement.lastElementChild,c=t.target===s,u=t.target===d;t.key===l.UP&&!c&&e.hasAttribute("data-navigable")?e.focus():t.key===l.DOWN&&!u&&i.hasAttribute("data-navigable")?i.focus():(t.key===l.HOME||t.key===l.DOWN&&u)&&s.hasAttribute("data-navigable")?s.focus():(t.key===l.END||t.key===l.UP&&c)&&d.hasAttribute("data-navigable")&&d.focus(),t.preventDefault(),t.stopPropagation()}}};Ft=new WeakSet,Fo=function(t){if(t.contentEditable!=="true")return!0;let e=this.editor.dom.getSelection(),i=this.editor.dom.getSelectedEditable(),s=this.editor.dom.getSelectedElement();return e.isCollapsed&&e.anchorOffset===0&&[i,t.firstChild].includes(s)};var hr=be;var Ee=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element instanceof HTMLSlotElement?t.detail.element.addEventListener("keydown",this):t.detail.element.hasAttribute("data-slotable")&&!t.detail.element.querySelector(":scope > slot")&&t.detail.element.appendChild(this.editor.dom.createElement("slot"))}keydown(t){t.preventDefault(),t.stopPropagation()}},ur=Ee;var ut,fr,ft,pr,je=class extends f{constructor(t){super(t);n(this,ut);n(this,ft);this.editor.root.addEventListener("insert",this)}insert(t){t.detail.element.hasAttribute("data-sortable")&&(t.detail.element.addEventListener("keydown",this),t.detail.element.addEventListener("pointerdown",this),t.detail.element.addEventListener("pointermove",this),t.detail.element.addEventListener("pointerup",this))}keydown(t){if(t.target===t.currentTarget&&x(t,[l.UP,l.DOWN,l.HOME,l.END],{ctrl:!0})){let e=t.target.parentElement,i=t.target.previousElementSibling,s=t.target.nextElementSibling,d=e.firstElementChild,c=e.lastElementChild,u=t.target===d,p=t.target===c;t.key===l.UP&&!u&&i.hasAttribute("data-sortable")?(i.insertAdjacentHTML("beforebegin",t.target.outerHTML),e.removeChild(t.target)):t.key===l.DOWN&&!p&&s.hasAttribute("data-sortable")?(s.insertAdjacentHTML("afterend",t.target.outerHTML),e.removeChild(t.target)):(t.key===l.HOME&&!u||t.key===l.DOWN&&p)&&d.hasAttribute("data-sortable")?(d.insertAdjacentHTML("beforebegin",t.target.outerHTML),e.removeChild(t.target)):(t.key===l.END&&!p||t.key===l.UP&&u)&&c.hasAttribute("data-sortable")&&(c.insertAdjacentHTML("afterend",t.target.outerHTML),e.removeChild(t.target)),t.preventDefault(),t.stopPropagation()}}pointerdown(t){t.target.hasAttribute("data-sortable")&&(t.target.setAttribute("data-sort",""),t.target.setPointerCapture(t.pointerId))}pointermove(t){let e=this.editor.dom.document.elementFromPoint(t.x,t.y);h(this,ut,fr).call(this),h(this,ft,pr).call(this,t.target,e)&&e.setAttribute("data-sortover","")}pointerup(t){if(t.target.hasAttribute("data-sortable")){let e=this.editor.dom.document.elementFromPoint(t.x,t.y);h(this,ut,fr).call(this),t.target.removeAttribute("data-sort"),t.target.releasePointerCapture(t.pointerId),h(this,ft,pr).call(this,t.target,e)&&e.insertAdjacentElement("beforebegin",t.target)}}};ut=new WeakSet,fr=function(){this.editor.root.querySelectorAll("[data-sortover]").forEach(t=>t.removeAttribute("data-sortover"))},ft=new WeakSet,pr=function(t,e){return t instanceof HTMLElement&&e instanceof HTMLElement&&this.editor.dom.contains(e)&&![this.editor.root,t].includes(e)&&e.hasAttribute("data-sortable")&&(t.parentElement===e.parentElement||this.editor.dom.arbitrary(t.parentElement)&&this.editor.dom.arbitrary(e.parentElement))&&this.editor.tags.allowed(e.parentElement,t)};var gr=je;var xe=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insert",this)}insert(t){let e=this.editor.tags.get(t.detail.element);e&&(e.editable&&(t.detail.element.contentEditable="true"),["alignable","arbitrary","deletable","focusable","navigable","slotable","sortable"].forEach(i=>{e[i]&&(t.detail.element.dataset[i]="")}))}},br=xe;var Le=class extends vt{constructor(t){super(t);this.editor.toolbar.addEventListener("insertbutton",this)}},Er=Le;var jr={de:{Alt:"Alt",Shift:"Umschalt"}};var we=class extends o{static get name(){return"base"}static get config(){return{browser:{},filter:{},lang:null,plugins:[]}}init(){this._i18n(jr),this.editor.dom.registerElement("editor-dialog",lr),this._tag({name:"editor-root",group:"root",children:["audio","block","container","figure","heading","iframe","image","list","paragraph","preformat","quote","rule","table","video"]}),this._tag({name:"slot",group:"slot",editable:!0,focusable:!0,navigable:!0,sortable:!0}),new br(this.editor),new Er(this.editor),new cr(this.editor),new dr(this.editor),new nr(this.editor),new hr(this.editor),new gr(this.editor),new sr(this.editor),new mr(this.editor),new ur(this.editor),this.editor.filters.add(new ar(this.editor))}},a=we;var xr={de:{Abbreviation:"Abk\xFCrzung",Cancel:"Abbrechen","Full term":"Langform","Insert full term or leave empty to remove it":"Langform eingeben oder zum Entfernen leer lassen",Save:"Speichern"}};var _e=class extends o{static get name(){return"abbreviation"}static get dependencies(){return[a]}init(){this._i18n(xr),this._tag({name:"abbr",group:"format",attributes:["title"]}),this.editor.dialogs.set(new rr(this.editor)),this._command("abbr"),this._toolbar("Abbreviation","a",!0)}},Lr=_e;var ye=class extends b{constructor(t){super(t,"audio")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Audio")})),t.appendChild(this._createInput("src","text",this._("URL"),{pattern:"(https?|/).+",placeholder:this._("Insert URL to audio"),required:"required"}))}},wr=ye;var pt,_r,Te=class extends f{constructor(t){super(t);n(this,pt);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertaudio",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("audio")).forEach(e=>h(this,pt,_r).call(this,e))}insertaudio(t){h(this,pt,_r).call(this,t.detail.element)}};pt=new WeakSet,_r=function(t){let e=t.getAttribute("src");e?(t.setAttribute("src",this.editor.url(e)),t.controls=!0,this.editor.dom.wrap(t,"figure",{attributes:{class:"audio"}})):t.parentElement.removeChild(t)};var yr=Te;var gt,Ce=class extends b{constructor(t,e,i){super(t,e);n(this,gt,void 0);if(!i||typeof i!="string")throw"Invalid argument";g(this,gt,i)}open(t,e={}){this.editor.dom.open({url:m(this,gt),name:this.name,call:t,params:e})}};gt=new WeakMap;var B=Ce;var ke=class extends _{filter(t){t.querySelectorAll("figure > figcaption:only-child").forEach(e=>e.parentElement.removeChild(e))}},Tr=ke;var Be=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insertfigure",this)}insertfigure(t){t.detail.element.querySelector(":scope > figcaption")||t.detail.element.appendChild(this.editor.dom.createElement("figcaption"))}},Cr=Be;var Ae=class extends o{static get name(){return"figure"}static get dependencies(){return[a]}init(){this._tag({name:"figure",group:"figure",children:["audio","caption","iframe","image","preformat","quote","table","video"],attributes:["class"],alignable:!0,deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this._tag({name:"figcaption",group:"caption",children:["format"],editable:!0,navigable:!0,enter:"p"}),new Cr(this.editor),this.editor.filters.add(new Tr(this.editor))}},C=Ae;var kr={de:{Audio:"Audio",Cancel:"Abbrechen","Insert URL to audio":"URL zur Audiodatei eingeben",Save:"Speichern",URL:"URL"}};var De=class extends o{static get name(){return"audio"}static get dependencies(){return[a,C]}static get config(){return{browser:null}}init(){this._i18n(kr),this._tag({name:"audio",group:"audio",attributes:["controls","src"],empty:!0,navigable:!0}),new yr(this.editor),this.editor.config.audio.browser?this.editor.dialogs.set(new B(this.editor,"audio",this.editor.config.audio.browser)):this.editor.dialogs.set(new wr(this.editor)),this._command("audio"),this._toolbar("Audio")}},Br=De;var Pe=class extends b{constructor(t){super(t,"block")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Block")})),t.appendChild(this._createInput("id","text",this._("ID"),{required:"required"}))}},Ar=Pe;var Se=class extends HTMLElement{get content(){return this.shadowRoot.innerHTML}set content(t){this.shadowRoot.innerHTML=t}constructor(){super();this.attachShadow({mode:"open"})}},Dr=Se;var He=class extends f{constructor(t){super(t);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertappblock",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("app-block")).forEach(e=>e.id||e.parentElement.removeChild(e))}async insertappblock(t){if(!t.detail.element.id){t.detail.element.parentElement.removeChild(t.detail.element);return}if(!this.editor.config.block.api)return;let e=this.editor.config.block.api.replace("{id}",t.detail.element.id),i=await fetch(e,{mode:"no-cors"});if(!i.ok)return;let s="";this.editor.config.block.css&&(s=this.editor.config.block.css.split(",").map(c=>`<link rel="stylesheet" href="${c}">`).join(""));let d=await i.text();t.detail.element.content=s+d}},Pr=He;var Nt={de:{Cancel:"Abbrechen",Height:"H\xF6he",Ifrane:"Iframe","Insert URL to embedded page":"URL zur eingebetteten Seite eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};var Ie=class extends o{static get name(){return"block"}static get dependencies(){return[a]}static get config(){return{api:null,browser:null,css:null}}init(){this._i18n(Nt),this.editor.dom.registerElement("app-block",Dr),this._tag({name:"app-block",group:"block",attributes:["id"],deletable:!0,empty:!0,focusable:!0,navigable:!0,sortable:!0}),new Pr(this.editor),this.editor.config.block.browser?this.editor.dialogs.set(new B(this.editor,"block",this.editor.config.block.browser)):this.editor.dialogs.set(new Ar(this.editor)),this._command("app-block"),this._toolbar("Block")}},Sr=Ie;var Me=class extends _{filter(t){t instanceof HTMLElement&&t.localName==="figure"&&t.classList.contains("quote")&&t.querySelector(":scope > blockquote")&&!t.querySelector(":scope > figcaption")&&(t.insertAdjacentElement("beforebegin",t.querySelector(":scope > blockquote")),t.innerHTML="")}},Hr=Me;var ve=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insertblockquote",this),this.editor.root.addEventListener("deleteblockquote",this)}insertblockquote(t){this.editor.dom.wrap(t.detail.element,"figure",{attributes:{class:"quote"}})}deleteblockquote(t){t.detail.target.localName==="figure"&&t.detail.target.classList.contains("quote")&&t.detail.target.parentElement.removeChild(t.detail.target)}},Ir=ve;var Fe=class extends _{filter(t){if(t instanceof HTMLPreElement){t.outerHTML=t.outerHTML.replace(/(<br\s*\/?>)/gi,`
`);return}t.innerHTML=t.innerHTML.replace(/^\s*(<br\s*\/?>\s*)+/gi,"").replace(/\s*(<br\s*\/?>\s*)+$/gi,""),t instanceof HTMLParagraphElement?t.outerHTML=t.outerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"</p><p>"):t.innerHTML=t.innerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"<br>")}},Mr=Fe;var Ne=class extends o{static get name(){return"break"}static get dependencies(){return[a]}init(){this._tag({name:"br",group:"break",empty:!0}),this.editor.filters.add(new Mr(this.editor))}},A=Ne;var vr={de:{"Block Quote":"Blockzitat"}};var Re=class extends o{static get name(){return"blockquote"}static get dependencies(){return[a,A,C]}init(){this._i18n(vr),this._tag({name:"blockquote",group:"quote",children:["break","format"],deletable:!0,editable:!0,navigable:!0,enter:"p"}),new Ir(this.editor),this._command("blockquote"),this._toolbar("Block Quote"),this.editor.filters.add(new Hr(this.editor))}},Fr=Re;var Nr={de:{bold:"fett"}};var Oe=class extends o{static get name(){return"bold"}static get dependencies(){return[a]}init(){this._i18n(Nr),this._tag({name:"b",group:"format"}),this._command("b"),this._toolbar("bold","b",!0)}},Rr=Oe;var Or={de:{Citation:"Zitatquelle"}};var ze=class extends o{static get name(){return"cite"}static get dependencies(){return[a]}init(){this._i18n(Or),this._tag({name:"cite",group:"format"}),this._command("cite"),this._toolbar("Citation","z",!0)}},zr=ze;var qr={de:{Code:"Quelltext"}};var qe=class extends o{static get name(){return"code"}static get dependencies(){return[a]}init(){this._i18n(qr),this._tag({name:"code",group:"format"}),this._command("code"),this._toolbar("Code","c",!0)}},Ur=qe;var Ue=class extends b{constructor(t){super(t,"data")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Data")})),t.appendChild(this._createInput("value","text",this._("Machine-readable Value"),{placeholder:this._("Insert value or leave empty to remove it")}))}},Kr=Ue;var Wr={de:{Cancel:"Abbrechen",Data:"Data","Machine-readable Value":"Maschinenlesbarer Wert","Insert value or leave empty to remove it":"Wert eingeben oder zum Entfernen leer lassen",Save:"Speichern"}};var Ke=class extends o{static get name(){return"data"}static get dependencies(){return[a]}init(){this._i18n(Wr),this._tag({name:"data",group:"format",attributes:["value"]}),this.editor.dialogs.set(new Kr(this.editor)),this._command("data"),this._toolbar("Data","j",!0)}},Vr=Ke;var $r={de:{Definition:"Definition"}};var We=class extends o{static get name(){return"definition"}static get dependencies(){return[a]}init(){this._i18n($r),this._tag({name:"dfn",group:"format"}),this._command("dfn"),this._toolbar("Definition","d",!0)}},Gr=We;var Qr={de:{"Text Deletion":"Textl\xF6schung"}};var Ve=class extends o{static get name(){return"deletion"}static get dependencies(){return[a]}init(){this._i18n(Qr),this._tag({name:"del",group:"format"}),this._command("del"),this._toolbar("Text Deletion","g",!0)}},Zr=Ve;var $e=class extends _{filter(t){t.querySelectorAll("summary:not(:first-child)").forEach(e=>e.parentElement.removeChild(e)),t.querySelectorAll("summary:only-child").forEach(e=>e.parentElement.removeChild(e))}},Jr=$e;var bt,Xr,Ge=class extends f{constructor(t){super(t);n(this,bt);this.editor.root.addEventListener("insertdetails",this),this.editor.root.addEventListener("insertsummary",this)}insertdetails(t){t.detail.element.open=!0,t.detail.element.querySelector(":scope > summary:first-child")||t.detail.element.insertAdjacentElement("afterbegin",this.editor.dom.createElement("summary"))}insertsummary(t){h(this,bt,Xr).call(this,t.detail.element),t.detail.element.addEventListener("blur",this),t.detail.element.addEventListener("keydown",this)}blur(t){h(this,bt,Xr).call(this,t.target)}keydown(t){x(t,l.SPACE)?(t.preventDefault(),t.stopPropagation(),this.editor.dom.insertText(" ")):x(t,l.ENTER)&&(t.preventDefault(),t.stopPropagation(),t.target.parentElement.open=!0)}};bt=new WeakSet,Xr=function(t){t.textContent.trim()?t.querySelectorAll("br:not(:last-child)").forEach(e=>e.parentElement.removeChild(e)):t.textContent=this.editor.translator.translate(Rt.name,"Details"),t.lastElementChild instanceof HTMLBRElement||t.appendChild(this.editor.dom.createElement("br"))};var Yr=Ge;var ts={de:{Details:"Details"}};var Qe=class extends o{static get name(){return"details"}static get dependencies(){return[a]}init(){this._i18n(ts),this._tag({name:"details",group:"container",children:["audio","figure","iframe","image","list","paragraph","preformat","quote","rule","summary","table","video"],arbitrary:!0,deletable:!0,focusable:!0,navigable:!0,slotable:!0,sortable:!0}),this._tag({name:"summary",group:"summary",editable:!0,navigable:!0,enter:"p"}),new Yr(this.editor),this._command("details"),this._toolbar("Details"),this.editor.filters.add(new Jr(this.editor))}},Rt=Qe;var Ze=class extends b{constructor(t){super(t,"division")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Division")})),t.appendChild(this._createInput("class","text",this._("CSS class"),{placeholder:this._("Insert CSS class")}))}},es=Ze;var is={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse",Division:"Division","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern"}};var Je=class extends o{static get name(){return"division"}static get dependencies(){return[a]}init(){this._i18n(is),this._tag({name:"div",group:"container",children:["audio","block","figure","iframe","image","preformat","quote","rule","table","video"],attributes:["class"],arbitrary:!0,deletable:!0,focusable:!0,navigable:!0,slotable:!0,sortable:!0}),this.editor.dialogs.set(new es(this.editor)),this._command("div"),this._toolbar("Division")}},rs=Je;var ss={de:{emphasized:"betont"}};var Xe=class extends o{static get name(){return"emphasis"}static get dependencies(){return[a]}init(){this._i18n(ss),this._tag({name:"em",group:"format"}),this._command("em"),this._toolbar("emphasized","e",!0)}},os=Xe;var as={de:{Heading:"\xDCberschrift"}};var Ye=class extends o{static get name(){return"heading"}static get dependencies(){return[a]}init(){this._i18n(as),this._tag({name:"h2",group:"heading",deletable:!0,editable:!0,focusable:!0,navigable:!0,sortable:!0,enter:"p"}),this._command("h2"),this._toolbar("Heading")}},ns=Ye;var ls={de:{"Horizontal Rule":"Horizontale Linie"}};var ti=class extends o{static get name(){return"horizontalrule"}static get dependencies(){return[a]}init(){this._i18n(ls),this._tag({name:"hr",group:"rule",deletable:!0,empty:!0,focusable:!0,navigable:!0,sortable:!0}),this._command("hr"),this._toolbar("Horizontal Rule")}},ds=ti;var ei=class extends b{constructor(t){super(t,"iframe")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Iframe")})),t.appendChild(this._createInput("src","text",this._("URL"),{pattern:"(https?|/).+",placeholder:this._("Insert URL to embedded page"),required:"required"})),t.appendChild(this._createInput("width","number",this._("Width"))),t.appendChild(this._createInput("height","number",this._("Height")))}},ms=ei;var Et,cs,ii=class extends f{constructor(t){super(t);n(this,Et);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertiframe",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("iframe")).forEach(e=>h(this,Et,cs).call(this,e))}insertiframe(t){h(this,Et,cs).call(this,t.detail.element)}};Et=new WeakSet,cs=function(t){let e=t.getAttribute("src");e?(t.setAttribute("src",this.editor.url(e)),t.allowFullscreen=!0,this.editor.dom.wrap(t,"figure",{attributes:{class:"iframe"}})):t.parentElement.removeChild(t)};var hs=ii;var ri=class extends o{static get name(){return"iframe"}static get dependencies(){return[a,C]}static get config(){return{browser:null}}init(){this._i18n(Nt),this._tag({name:"iframe",group:"iframe",attributes:["allowfullscreen","height","src","width"],empty:!0,navigable:!0}),new hs(this.editor),this.editor.config.iframe.browser?this.editor.dialogs.set(new B(this.editor,"iframe",this.editor.config.iframe.browser)):this.editor.dialogs.set(new ms(this.editor)),this._command("iframe"),this._toolbar("Iframe")}},us=ri;var si=class extends b{constructor(t){super(t,"image")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Image")})),t.appendChild(this._createInput("src","text",this._("URL"),{pattern:"(https?|/).+",placeholder:this._("Insert URL to image"),required:"required"})),t.appendChild(this._createInput("alt","text",this._("Alternative text"),{placeholder:this._("Text shown when media element is not available")})),t.appendChild(this._createInput("width","number",this._("Width"))),t.appendChild(this._createInput("height","number",this._("Height")))}},fs=si;var jt,ps,oi=class extends f{constructor(t){super(t);n(this,jt);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertimg",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("img")).forEach(e=>h(this,jt,ps).call(this,e))}insertimg(t){h(this,jt,ps).call(this,t.detail.element)}};jt=new WeakSet,ps=function(t){let e=t.getAttribute("src");e?(t.setAttribute("src",this.editor.url(e)),this.editor.dom.wrap(t,"figure",{attributes:{class:"image"}})):t.parentElement.removeChild(t)};var gs=oi;var bs={de:{"Alternative text":"Alternativtext",Cancel:"Abbrechen",Height:"H\xF6he",Image:"Bild","Insert URL to image":"URL zur Bilddatei eingeben",Save:"Speichern","Text shown when media element is not available":"Ersatztext, falls Medienelement nicht verf\xFCgbar ist",URL:"URL",Width:"Breite"}};var ai=class extends o{static get name(){return"image"}static get dependencies(){return[a,C]}static get config(){return{browser:null}}init(){this._i18n(bs),this._tag({name:"img",group:"image",attributes:["alt","height","src","width"],empty:!0,navigable:!0}),new gs(this.editor),this.editor.config.image.browser?this.editor.dialogs.set(new B(this.editor,"image",this.editor.config.image.browser)):this.editor.dialogs.set(new fs(this.editor)),this._command("img"),this._toolbar("Image")}},Es=ai;var js={de:{"Text Insertion":"Texteinf\xFCgung"}};var ni=class extends o{static get name(){return"insertion"}static get dependencies(){return[a]}init(){this._i18n(js),this._tag({name:"ins",group:"format"}),this._command("ins"),this._toolbar("Text Insertion","f",!0)}},xs=ni;var Ls={de:{italic:"kursiv"}};var li=class extends o{static get name(){return"italic"}static get dependencies(){return[a]}init(){this._i18n(Ls),this._tag({name:"i",group:"format"}),this._command("i"),this._toolbar("italic","i",!0)}},ws=li;var _s={de:{"User Input":"Benutzereingabe"}};var di=class extends o{static get name(){return"keyboard"}static get dependencies(){return[a]}init(){this._i18n(_s),this._tag({name:"kbd",group:"format"}),this._command("kbd"),this._toolbar("User Input","k",!0)}},ys=di;var mi=class extends b{constructor(t){super(t,"link")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Link")})),t.appendChild(this._createInput("href","text",this._("URL"),{pattern:"(https?|/|mailto:|tel:).+",placeholder:this._("Insert link or leave empty to unlink")}))}},Ts=mi;var xt,Cs,ci=class extends f{constructor(t){super(t);n(this,xt);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("inserta",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("a")).forEach(e=>h(this,xt,Cs).call(this,e))}inserta(t){h(this,xt,Cs).call(this,t.detail.element)}};xt=new WeakSet,Cs=function(t){let e=t.getAttribute("href");e?t.setAttribute("href",this.editor.url(e)):t.parentElement.replaceChild(this.editor.dom.createText(t.textContent),t)};var ks=ci;var Bs={de:{Cancel:"Abbrechen","Insert link or leave empty to unlink":"Link eingeben oder zum Entfernen leer lassen",Link:"Link",Save:"Speichern",URL:"URL"}};var hi=class extends o{static get name(){return"link"}static get dependencies(){return[a]}init(){this._i18n(Bs),this._tag({name:"a",group:"format",attributes:["href"]}),new ks(this.editor),this.editor.dialogs.set(new Ts(this.editor)),this._command("a"),this._toolbar("Link","l",!0)}},As=hi;var Ds={de:{mark:"markiert"}};var ui=class extends o{static get name(){return"mark"}static get dependencies(){return[a]}init(){this._i18n(Ds),this._tag({name:"mark",group:"format"}),this._command("mark"),this._toolbar("mark","m",!0)}},Ps=ui;var Lt,Ss,fi=class extends f{constructor(t){super(t);n(this,Lt);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertli",this),this.editor.root.addEventListener("deleteli",this),this.editor.root.addEventListener("insertol",this),this.editor.root.addEventListener("insertul",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("li")).forEach(e=>h(this,Lt,Ss).call(this,e))}insertli(t){h(this,Lt,Ss).call(this,t.detail.element)}deleteli(t){t.detail.target.children.length===0&&t.detail.target.parentElement.removeChild(t.detail.target)}insertol(t){t.detail.element.children.length===0&&t.detail.element.appendChild(this.editor.dom.createElement("li"))}insertul(t){this.insertol(t)}};Lt=new WeakSet,Ss=function(t){!(t.parentElement instanceof HTMLOListElement)&&!(t.parentElement instanceof HTMLUListElement)&&this.editor.dom.wrap(t,"ul")};var Hs=fi;var pi=class extends o{static get name(){return"list"}static get dependencies(){return[a,A]}init(){this._tag({name:"li",group:"listitem",children:["break","format"],deletable:!0,editable:!0,focusable:!0,navigable:!0,sortable:!0,enter:"li"}),new Hs(this.editor)}},Ot=pi;var Is={de:{"Ordered List":"Geordnete Liste"}};var gi=class extends o{static get name(){return"orderedlist"}static get dependencies(){return[a,Ot]}init(){this._i18n(Is),this._tag({name:"ol",group:"list",children:["listitem"],arbitrary:!0,deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this._command("ol"),this._toolbar("Ordered List")}},Ms=gi;var wt,vs,bi=class extends f{constructor(t){super(t);n(this,wt);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertp",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("p")).forEach(e=>h(this,wt,vs).call(this,e))}insertp(t){h(this,wt,vs).call(this,t.detail.element)}paste(t){this.editor.dom.window.setTimeout(()=>this.editor.filters.filter(t.target))}};wt=new WeakSet,vs=function(t){t.addEventListener("paste",this)};var Fs=bi;var Ns={de:{Paragraph:"Absatz"}};var Ei=class extends o{static get name(){return"paragraph"}static get dependencies(){return[a,A]}init(){this._i18n(Ns),this._tag({name:"p",group:"paragraph",children:["break","format"],deletable:!0,editable:!0,focusable:!0,navigable:!0,sortable:!0,enter:"p"}),new Fs(this.editor),this._command("p"),this._toolbar("Paragraph")}},Rs=Ei;var ji=class extends _{filter(t){t instanceof HTMLElement&&t.localName==="figure"&&t.classList.contains("preformat")&&t.querySelector(":scope > pre")&&!t.querySelector(":scope > figcaption")&&(t.insertAdjacentElement("beforebegin",t.querySelector(":scope > pre")),t.innerHTML="")}},Os=ji;var xi=class extends f{constructor(t){super(t);this.editor.root.addEventListener("insertpre",this),this.editor.root.addEventListener("deletepre",this)}insertpre(t){this.editor.dom.wrap(t.detail.element,"figure",{attributes:{class:"preformat"}})}deletepre(t){t.detail.target.localName==="figure"&&t.detail.target.classList.contains("preformat")&&t.detail.target.parentElement.removeChild(t.detail.target)}},zs=xi;var qs={de:{"Preformatted Text":"Vorformatierter Text"}};var Li=class extends o{static get name(){return"preformat"}static get dependencies(){return[a,A,C]}init(){this._i18n(qs),this._tag({name:"pre",group:"preformat",children:["break"],deletable:!0,editable:!0,navigable:!0,enter:"p"}),new zs(this.editor),this._command("pre"),this._toolbar("Preformatted Text"),this.editor.filters.add(new Os(this.editor))}},Us=Li;var Ks={de:{Quote:"Zitat"}};var wi=class extends o{static get name(){return"quote"}static get dependencies(){return[a]}init(){this._i18n(Ks),this._tag({name:"q",group:"format"}),this._command("q"),this._toolbar("Quote","q",!0)}},Ws=wi;var Vs={de:{"Sample Output":"Beispielausgabe"}};var _i=class extends o{static get name(){return"sample"}static get dependencies(){return[a]}init(){this._i18n(Vs),this._tag({name:"samp",group:"format"}),this._command("samp"),this._toolbar("Sample Output","o",!0)}},$s=_i;var yi=class extends b{constructor(t){super(t,"section")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Section")})),t.appendChild(this._createInput("class","text",this._("CSS class"),{placeholder:this._("Insert CSS class")}))}},Gs=yi;var Qs={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern",Section:"Sektion"}};var Ti=class extends o{static get name(){return"section"}static get dependencies(){return[a]}init(){this._i18n(Qs),this._tag({name:"section",group:"container",children:["audio","figure","heading","iframe","image","list","paragraph","preformat","quote","rule","table","video"],attributes:["class"],arbitrary:!0,deletable:!0,focusable:!0,navigable:!0,slotable:!0,sortable:!0}),this.editor.dialogs.set(new Gs(this.editor)),this._command("section"),this._toolbar("Section")}},Zs=Ti;var Js={de:{small:"klein"}};var Ci=class extends o{static get name(){return"small"}static get dependencies(){return[a]}init(){this._i18n(Js),this._tag({name:"small",group:"format"}),this._command("small"),this._toolbar("small","w",!0)}},Xs=Ci;var Ys={de:{strikethrough:"durchgestrichen"}};var ki=class extends o{static get name(){return"strikethrough"}static get dependencies(){return[a]}init(){this._i18n(Ys),this._tag({name:"s",group:"format"}),this._command("s"),this._toolbar("strikethrough","r",!0)}},to=ki;var eo={de:{"strongly emphasized":"stark betont"}};var Bi=class extends o{static get name(){return"strong"}static get dependencies(){return[a]}init(){this._i18n(eo),this._tag({name:"strong",group:"format"}),this._command("strong"),this._toolbar("strongly emphasized","s",!0)}},io=Bi;var ro={de:{Subheading:"Unter\xFCberschrift"}};var Ai=class extends o{static get name(){return"subheading"}static get dependencies(){return[a]}init(){this._i18n(ro),this._tag({name:"h3",group:"heading",deletable:!0,editable:!0,focusable:!0,navigable:!0,sortable:!0,enter:"p"}),this._command("h3"),this._toolbar("Subheading")}},so=Ai;var oo={de:{subscript:"tiefgestellt"}};var Di=class extends o{static get name(){return"subscript"}static get dependencies(){return[a]}init(){this._i18n(oo),this._tag({name:"sub",group:"format"}),this._command("sub"),this._toolbar("subscript","x",!0)}},ao=Di;var no={de:{superscript:"hochgestellt"}};var Pi=class extends o{static get name(){return"superscript"}static get dependencies(){return[a]}init(){this._i18n(no),this._tag({name:"sup",group:"format"}),this._command("sup"),this._toolbar("superscript","y",!0)}},lo=Pi;var Si=class extends R{constructor(t){super(t,"table","table")}_insert({rows:t=1,cols:e=1}={}){let i=this.editor.dom.createElement("figure",{attributes:{class:"table"}}),s=this.editor.dom.createElement("table"),d=this.editor.dom.createElement("tbody");for(let c=0;c<t;c++){let u=this.editor.dom.createElement("tr");d.appendChild(u);for(let p=0;p<e;++p)u.appendChild(this.editor.dom.createElement("td"))}s.appendChild(d),i.appendChild(s),this.editor.dom.insert(i)}},mo=Si;var Hi=class extends b{constructor(t){super(t,"table")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Table")})),t.appendChild(this._createInput("rows","number",this._("Rows"),{min:"1",required:"required",value:"1"})),t.appendChild(this._createInput("cols","number",this._("Columns"),{min:"1",required:"required",value:"1"}))}},co=Hi;var Ii=class extends _{filter(t){t instanceof HTMLElement&&t.localName==="figure"&&t.classList.contains("table")&&t.querySelector(":scope > table")&&!t.querySelector(":scope > figcaption")?(t.insertAdjacentElement("beforebegin",t.querySelector(":scope > table")),t.innerHTML=""):(t instanceof HTMLTableElement&&t.querySelector(":scope > thead, :scope > tfoot")&&!t.querySelector(":scope > tbody")||t instanceof HTMLTableSectionElement&&t.rows.length<=0||t instanceof HTMLTableRowElement&&!t.querySelector(":scope > th:not(:empty), :scope > td:not(:empty)"))&&(t.innerHTML="")}},ho=Ii;var F,zt,U,vi,qt,No,Mi=class extends f{constructor(t){super(t);n(this,F);n(this,U);n(this,qt);this.editor.root.addEventListener("inserttable",this),this.editor.root.addEventListener("inserttd",this),this.editor.root.addEventListener("insertth",this)}inserttable(t){this.editor.dom.wrap(t.detail.element,"figure",{attributes:{class:"table"}}),t.detail.element.tBodies.length>0&&t.detail.element.tBodies[0].rows[0]&&(!t.detail.element.tHead||!t.detail.element.tFoot)&&(t.detail.element.tHead||h(this,F,zt).call(this,t.detail.element.createTHead(),t.detail.element.tBodies[0].rows[0].cells.length),t.detail.element.tFoot||h(this,F,zt).call(this,t.detail.element.createTFoot(),t.detail.element.tBodies[0].rows[0].cells.length))}inserttd(t){t.detail.element.addEventListener("keydown",this)}insertth(t){t.detail.element.addEventListener("keydown",this)}keydown(t){let e=t.target,i=e.parentElement,s=i.parentElement,d=s instanceof HTMLTableElement?s:s.parentElement,c=[l.LEFT,l.RIGHT,l.UP,l.DOWN],u=x(t,c),p=x(t,c,{ctrl:!0}),L=x(t,c,{alt:!0}),w=x(t,c,{alt:!0,shift:!0});if(e instanceof HTMLTableCellElement&&i instanceof HTMLTableRowElement&&(s instanceof HTMLTableElement||s instanceof HTMLTableSectionElement)&&d instanceof HTMLTableElement&&(u&&h(this,qt,No).call(this,e,t.key)||p||L||w)){let E=e.cellIndex,D=i.cells.length,N=s.rows.length,k=s instanceof HTMLTableElement?i.rowIndex:i.sectionRowIndex,Ut=E===0,Kt=E===D-1,Do=k===0,Po=k===N-1,$i=i.rowIndex===0,Gi=i.rowIndex===d.rows.length-1;t.preventDefault(),t.stopPropagation(),u?t.key===l.LEFT&&!Ut?this.editor.dom.focusEnd(i.cells[E-1]):t.key===l.LEFT&&$i?this.editor.dom.focusEnd(d.rows[d.rows.length-1].cells[D-1]):t.key===l.LEFT?this.editor.dom.focusEnd(d.rows[i.rowIndex-1].cells[D-1]):t.key===l.RIGHT&&!Kt?i.cells[E+1].focus():t.key===l.RIGHT&&Gi?d.rows[0].cells[0].focus():t.key===l.RIGHT?d.rows[i.rowIndex+1].cells[0].focus():t.key===l.UP&&$i?d.rows[d.rows.length-1].cells[E].focus():t.key===l.UP?d.rows[i.rowIndex-1].cells[E].focus():t.key===l.DOWN&&Gi?d.rows[0].cells[E].focus():t.key===l.DOWN&&d.rows[i.rowIndex+1].cells[E].focus():p?(t.key===l.LEFT&&D>1&&Ut?Array.from(d.rows).forEach(j=>j.appendChild(j.cells[E])):t.key===l.LEFT&&D>1?Array.from(d.rows).forEach(j=>j.insertBefore(j.cells[E],j.cells[E-1])):t.key===l.RIGHT&&D>1&&Kt?Array.from(d.rows).forEach(j=>j.insertBefore(j.cells[E],j.cells[0])):t.key===l.RIGHT&&D>1?Array.from(d.rows).forEach(j=>j.insertBefore(j.cells[E+1],j.cells[E])):t.key===l.UP&&N>1&&Do?s.appendChild(i):t.key===l.UP&&N>1?s.insertBefore(i,s.rows[k-1]):t.key===l.DOWN&&N>1&&Po?s.insertBefore(i,s.rows[0]):t.key===l.DOWN&&N>1&&s.insertBefore(s.rows[k+1],i),e.focus()):L?t.key===l.LEFT?Array.from(d.rows).forEach(j=>h(this,U,vi).call(this,j,j.cells[E])):t.key===l.RIGHT?Array.from(d.rows).forEach(j=>h(this,U,vi).call(this,j,j.cells[E+1])):t.key===l.UP?h(this,F,zt).call(this,s,D,k):t.key===l.DOWN&&h(this,F,zt).call(this,s,D,k+1):w&&(t.key===l.LEFT&&!Ut?Array.from(d.rows).forEach(j=>j.deleteCell(E-1)):t.key===l.RIGHT&&!Kt?Array.from(d.rows).forEach(j=>j.deleteCell(E+1)):t.key===l.UP&&k>0?s.deleteRow(k-1):t.key===l.DOWN&&k<N-1&&s.deleteRow(k+1))}}};F=new WeakSet,zt=function(t,e,i=0){let s=t.insertRow(i);for(let d=0;d<e;d++)h(this,U,vi).call(this,s)},U=new WeakSet,vi=function(t,e=null){let i=t.parentElement.localName==="thead"?"th":"td";t.insertBefore(this.editor.dom.createElement(i),e)},qt=new WeakSet,No=function(t,e){if([l.UP,l.DOWN].includes(e))return!0;let i=this.editor.dom.getSelection(),s=i.anchorNode instanceof HTMLElement&&i.anchorNode;if(!i.isCollapsed)return!1;if(e===l.LEFT){let c=t.firstChild;return c instanceof HTMLElement&&(c=c.firstChild),i.anchorOffset===0&&[t,c].includes(s)}let d=t.lastChild;return t.lastChild instanceof HTMLBRElement&&t.lastChild.previousSibling&&(d=t.lastChild.previousSibling),d instanceof HTMLElement&&(d=d.lastChild),i.anchorOffset===s.textContent.length&&[t,d].includes(s)};var uo=Mi;var fo={de:{Cancel:"Abbrechen",Columns:"Spalten",Rows:"Zeilen",Save:"Speichern",Table:"Tabelle"}};var Fi=class extends o{static get name(){return"table"}static get dependencies(){return[a,A,C]}init(){this._i18n(fo),this._tag({name:"table",group:"table",children:["tablesection"],deletable:!0,navigable:!0}),this._tag({name:"thead",group:"tablesection",children:["tablerow"]}),this._tag({name:"tbody",group:"tablesection",children:["tablerow"]}),this._tag({name:"tfoot",group:"tablesection",children:["tablerow"]}),this._tag({name:"tr",group:"tablerow",children:["tablecell"]}),this._tag({name:"th",group:"tablecell",children:["break","format"],editable:!0,empty:!0}),this._tag({name:"td",group:"tablecell",children:["break","format"],editable:!0,empty:!0}),new uo(this.editor),this.editor.filters.add(new ho(this.editor)),this.editor.dialogs.set(new co(this.editor)),this.editor.commands.set(new mo(this.editor)),this._toolbar("Table")}},po=Fi;var Ni=class extends b{constructor(t){super(t,"time")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Time")})),t.appendChild(this._createInput("datetime","text",this._("Machine-readable Datetime"),{placeholder:this._("Insert date/time or leave empty to remove it")}))}},go=Ni;var bo={de:{Cancel:"Abbrechen","Insert date/time or leave empty to remove it":"Datum/Zeit eingeben oder zum Entfernen leer lassen","Machine-readable Datetime":"Maschinenlesbare Datums-/Zeitangabe",Save:"Speichern",Time:"Zeit"}};var Ri=class extends o{static get name(){return"time"}static get dependencies(){return[a]}init(){this._i18n(bo),this._tag({name:"time",group:"format",attributes:["datetime"]}),this.editor.dialogs.set(new go(this.editor)),this._command("time"),this._toolbar("Time","t",!0)}},Eo=Ri;var jo={de:{underline:"unterstrichen"}};var Oi=class extends o{static get name(){return"underline"}static get dependencies(){return[a]}init(){this._i18n(jo),this._tag({name:"u",group:"format"}),this._command("u"),this._toolbar("underline","u",!0)}},xo=Oi;var Lo={de:{"Unordered List":"Ungeordnete Liste"}};var zi=class extends o{static get name(){return"unorderedlist"}static get dependencies(){return[a,Ot]}init(){this._i18n(Lo),this._tag({name:"ul",group:"list",children:["listitem"],arbitrary:!0,deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this._command("ul"),this._toolbar("Unordered List")}},wo=zi;var _o={de:{Variable:"Variable"}};var qi=class extends o{static get name(){return"variable"}static get dependencies(){return[a]}init(){this._i18n(_o),this._tag({name:"var",group:"format"}),this._command("var"),this._toolbar("Variable","v",!0)}},yo=qi;var Ui=class extends b{constructor(t){super(t,"video")}_initFieldset(t){t.appendChild(this.editor.dom.createElement("legend",{html:this._("Video")})),t.appendChild(this._createInput("src","text",this._("URL"),{pattern:"(https?|/).+",placeholder:this._("Insert URL to video"),required:"required"})),t.appendChild(this._createInput("width","number",this._("Width"))),t.appendChild(this._createInput("height","number",this._("Height")))}},To=Ui;var _t,Co,Ki=class extends f{constructor(t){super(t);n(this,_t);this.editor.root.addEventListener("sethtml",this),this.editor.root.addEventListener("insertvideo",this)}sethtml(t){Array.from(t.detail.element.getElementsByTagName("video")).forEach(e=>h(this,_t,Co).call(this,e))}insertvideo(t){h(this,_t,Co).call(this,t.detail.element)}};_t=new WeakSet,Co=function(t){let e=t.getAttribute("src");e?(t.setAttribute("src",this.editor.url(e)),t.controls=!0,this.editor.dom.wrap(t,"figure",{attributes:{class:"video"}})):t.parentElement.removeChild(t)};var ko=Ki;var Bo={de:{Cancel:"Abbrechen",Height:"H\xF6he","Insert URL to video":"URL zur Videodatei eingeben",Save:"Speichern",URL:"URL",Video:"Video",Width:"Breite"}};var Wi=class extends o{static get name(){return"video"}static get dependencies(){return[a,C]}static get config(){return{browser:null}}init(){this._i18n(Bo),this._tag({name:"video",group:"video",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),new ko(this.editor),this.editor.config.video.browser?this.editor.dialogs.set(new B(this.editor,"video",this.editor.config.video.browser)):this.editor.dialogs.set(new To(this.editor)),this._command("video"),this._toolbar("Video")}},Ao=Wi;var Vi=class extends T{static get defaultConfig(){return{base:{plugins:[Rr,ws,io,os,xo,to,As,Ps,Xs,Gr,Lr,Ws,zr,Ur,ys,$s,yo,ao,lo,Eo,Vr,xs,Zr,Rs,ns,so,wo,Ms,ds,Fr,Es,Ao,Br,us,po,Us,Zs,Rt,rs,Sr]}}}},_f=Vi;export{_f as default};
