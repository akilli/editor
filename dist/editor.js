class J extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof o))throw"Invalid argument";super.set(a.name,a)}execute(a){this.get(a).execute()}}class q{constructor(a,b){this.editor=void 0,this.name=void 0;if(!(a instanceof s)||!b||typeof b!=="string")throw"Invalid argument";this.editor=a,this.name=b}open(a,b={}){const c=()=>this.editor.document.querySelectorAll("dialog.editor-dialog").forEach(p=>p.parentElement.removeChild(p)),d=this.editor.window.getSelection(),f=d.rangeCount>0?d.getRangeAt(0):null,g=()=>{f&&(d.removeAllRanges(),d.addRange(f)),c()};c();const e=this.editor.createElement("dialog",{attributes:{class:"editor-dialog","data-name":this.name}});typeof e.open==="boolean"||this.polyfill(e),e.addEventListener("click",p=>{p.target===e&&g()});const h=this.editor.createElement("fieldset");h.insertAdjacentHTML("beforeend",this.getFieldsetHtml()),Object.entries(b).forEach(([p,v])=>{h.elements[p]&&(h.elements[p].value=v)});const m=this.editor.createElement("button",{attributes:{class:"editor-save"},html:this.t("Save")}),n=this.editor.createElement("button",{attributes:{class:"editor-cancel",type:"button"},html:this.t("Cancel")});n.addEventListener("click",g);const k=this.editor.createElement("form");k.addEventListener("submit",p=>{p.preventDefault(),g();const v={};Array.from(h.elements).forEach(E=>v[E.name]=E.value),a(v)}),k.appendChild(h),k.appendChild(n),k.appendChild(m),e.appendChild(k),e.open=!0,this.editor.element.appendChild(e)}getFieldsetHtml(){return""}t(a){return this.editor.i18n.translate(this.name,a)}polyfill(a){Object.defineProperty(a,"open",{get:function(){return a.hasAttribute("open")},set:function(b){b?a.setAttribute("open",""):a.removeAttribute("open")}})}}class K extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof q))throw"Invalid argument";super.set(a.name,a)}}class t{constructor(a){this.editor=void 0;if(!(a instanceof s))throw"Invalid argument";this.editor=a}filter(a){throw"Not implemented"}}class L extends Set{add(a){if(!(a instanceof t))throw"Invalid argument";super.add(a)}filter(a){if(!(a instanceof HTMLElement))throw"Invalid argument";this.forEach(b=>{a.normalize(),b.filter(a)})}}class M extends Map{get(a){return super.get(a)||null}set(a,b){if(!a||typeof a!=="string"||!(b instanceof Object))throw"Invalid argument";super.set(a,b)}translate(a,b){return this.get(a)?.[b]||b}}class l{constructor(a){this.editor=void 0;if(!(a instanceof s))throw"Invalid argument";this.editor=a}observe(a){throw"Not implemented"}}class i{constructor(a){this.editor=void 0;if(!(a instanceof s))throw"Invalid argument";this.editor=a}static get name(){throw"Missing plugin name"}static get dependencies(){return[]}static get config(){return{}}init(){throw"Not implemented"}registerTranslator(a){a[this.editor.config.base.lang]&&this.editor.i18n.set(this.constructor.name,a[this.editor.config.base.lang])}registerCommand(a,b=null){this.editor.commands.set(new o(this.editor,a,b))}}class N extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof i))throw"Invalid argument";super.set(a.constructor.name,a)}init(){this.forEach(a=>a.init())}}class A{constructor({name:a,group:b,...c}={}){this.name=void 0,this.group=void 0,this.alignable=!1,this.attributes=[],this.children=[],this.deletable=!1,this.editable=!1,this.empty=!1,this.enter=null,this.focusable=!1,this.navigable=!1,this.sortable=!1;if(!a||typeof a!=="string"||!b||typeof b!=="string")throw"Invalid argument";this.name=a,this.group=b,this.alignable=c.alignable===!0,this.attributes=Array.isArray(c.attributes)?c.attributes:[],this.children=Array.isArray(c.children)?c.children:[],this.deletable=c.deletable===!0,this.editable=c.editable===!0,this.empty=c.empty===!0,this.enter=c.enter&&typeof c.enter==="string"?c.enter:null,this.focusable=c.focusable===!0,this.navigable=c.navigable===!0,this.sortable=c.sortable===!0}}class O extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a instanceof HTMLElement?a.localName:a)||null}set(a){if(!(a instanceof A))throw"Invalid argument";super.set(a.name,a)}create(a){this.set(new A(a))}isAllowed(a,b){return this.get(b)?.children.includes(this.get(a)?.group)}}class s{constructor(a,b={}){this.orig=void 0,this.document=void 0,this.window=void 0,this.element=void 0,this.toolbar=void 0,this.content=void 0,this.config={},this.i18n=new M(),this.tags=new O(),this.filters=new L(),this.dialogs=new K(),this.commands=new J(),this.plugins=new N();if(!(a instanceof HTMLElement)||!(b instanceof Object))throw"Invalid argument";this.orig=a,this.document=this.orig.ownerDocument,this.window=this.document.defaultView,this.toolbar=this.createElement("editor-toolbar",{attributes:{role:"toolbar"}}),this.content=this.createElement("editor-content"),this.element=this.createElement("akilli-editor"),this.element.appendChild(this.toolbar),this.element.appendChild(this.content),this.config=b}static get defaultConfig(){return{}}init(){this.plugins.size===0&&(this.initPlugins(),this.initToolbar()),this.initContent(),this.initDom()}initPlugins(){const a=this.config,b=a.base?.plugins||this.constructor.defaultConfig.base?.plugins||[],c=new Set(),d=f=>{f.dependencies&&f.dependencies.forEach(d),c.add(f)};this.config={},b.map(d),c.forEach(f=>{Object.entries(f.config).forEach(([g,e])=>{this.config.hasOwnProperty(f.name)||(this.config[f.name]={}),this.config[f.name][g]=a[f.name]?.[g]||this.constructor.defaultConfig[f.name]?.[g]||e}),this.plugins.set(new f(this))}),this.plugins.init()}initToolbar(){this.config.base.toolbar.forEach(a=>this.toolbar.appendChild(this.createElement("button",{attributes:{type:"button","data-command":a,title:a},html:a})))}initContent(){this.orig instanceof HTMLTextAreaElement?(this.orig.form.addEventListener("submit",()=>this.save()),this.setHtml(this.orig.value.replace("/&nbsp;/g"," "))):this.setHtml(this.orig.innerHTML)}initDom(){this.orig.insertAdjacentElement("afterend",this.element),this.orig.hidden=!0}destroy(){this.element.parentElement.removeChild(this.element),this.orig.hidden=!1}getHtml(){const a=this.content.cloneNode(!0);return this.filters.filter(a),a.innerHTML}setHtml(a){const b=this.content.cloneNode(!1);b.innerHTML=a,this.filters.filter(b),this.content.innerHTML=b.innerHTML}save(){this.orig instanceof HTMLTextAreaElement?this.orig.value=this.getHtml():this.orig.innerHTML=this.getHtml()}insert(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.getSelectedEditable();if(b&&b instanceof HTMLSlotElement&&this.tags.isAllowed(a,b.parentElement))b.insertAdjacentElement("beforebegin",a);else if(this.tags.isAllowed(a,this.content))this.content.appendChild(a);else throw"Invalid argument"}insertText(a){this.document.execCommand("inserttext",!1,a)}format(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.window.getSelection(),c=b.anchorNode instanceof Text?b.anchorNode.parentElement:b.anchorNode,d=this.getSelectedEditable();if(b.isCollapsed||!b.toString().trim()||!(c instanceof HTMLElement)||!d)return;const f=b.getRangeAt(0),g=this.tags.get(c),e=!g||g.group==="format"?c.parentElement:c;f.startContainer instanceof Text&&f.startContainer.parentElement!==e&&f.setStartBefore(f.startContainer.parentElement),f.endContainer instanceof Text&&f.endContainer.parentElement!==e&&f.setEndAfter(f.endContainer.parentElement);const h=f.toString(),m=f.cloneContents().childNodes,n=Array.from(m).every(k=>k instanceof Text&&!k.textContent.trim()||k instanceof HTMLElement&&k.localName===a.localName);f.deleteContents(),e.isContentEditable&&this.tags.isAllowed(a,e)&&h.trim()&&(!g||!n)?(a.textContent=h,f.insertNode(a)):f.insertNode(this.createText(h)),e.normalize()}registerElement(a,b,c=null){typeof this.window.customElements.get(a)==="undefined"&&this.window.customElements.define(a,b,c?{extends:c}:null)}createElement(a,{attributes:b={},html:c="",is:d=null}={}){const f=this.document.createElement(a,d?{is:d}:null);return f.innerHTML=c,Object.entries(b).forEach(([g,e])=>{e&&f.setAttribute(g,`${e}`)}),f}createText(a){return this.document.createTextNode(a)}getSelectedElement(){const a=this.window.getSelection(),b=a.anchorNode instanceof Text?a.anchorNode.parentElement:a.anchorNode,c=a.focusNode instanceof Text?a.focusNode.parentElement:a.focusNode;return b instanceof HTMLElement&&c instanceof HTMLElement&&b===c&&this.content.contains(b)?b:null}getSelectedEditable(){const a=this.window.getSelection(),b=a.anchorNode instanceof Text?a.anchorNode.parentElement:a.anchorNode,c=a.focusNode instanceof Text?a.focusNode.parentElement:a.focusNode;if(b instanceof HTMLElement&&c instanceof HTMLElement){const d=b.closest("[contenteditable=true]"),f=c.closest("[contenteditable=true]");if(d instanceof HTMLElement&&d===f&&this.content.contains(d))return d}return null}focusEnd(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.document.createRange(),c=this.window.getSelection();a.focus(),b.selectNodeContents(a),b.collapse(),c.removeAllRanges(),c.addRange(b)}observe(a,{target:b=null,config:c={childList:!0,subtree:!0}}={}){if(!(a instanceof l)||b&&!(b instanceof HTMLElement))throw"Invalid argument";const d=new MutationObserver(f=>a.observe(f));d.observe(b||this.content,c)}isKey(a,b,{alt:c=!1,ctrl:d=!1,shift:f=!1}={}){return(Array.isArray(b)&&b.includes(a.key)||a.key===b)&&a.altKey===c&&a.ctrlKey===d&&a.shiftKey===f}url(a){const b=this.window.origin||this.window.location.origin,c=this.createElement("a",{attributes:{href:a}});return b===c.origin?c.pathname:c.href}static create(a,b={}){const c=new this(a,b);return c.init(),c}}class o{constructor(a,b,c=null){this.editor=void 0,this.name=void 0,this.tagName=null;if(!(a instanceof s)||!b||typeof b!=="string"||c&&typeof c!=="string")throw"Invalid argument";this.editor=a,this.name=b,this.tagName=c}get tag(){return this.tagName?this.editor.tags.get(this.tagName):null}get dialog(){return this.editor.dialogs.get(this.name)}execute(){this.dialog?this.openDialog():this.insert(this.selectedAttributes())}insert(a={}){if(this.tag){Object.keys(a).forEach(c=>this.tag.attributes.includes(c)||delete a[c]);const b=this.editor.createElement(this.tag.name,{attributes:a});this.tag.group==="format"?this.editor.format(b):this.editor.insert(b)}}openDialog(){this.dialog.open(a=>this.insert(a),this.selectedAttributes())}selectedElement(){const a=this.editor.getSelectedElement();return a&&a.localName===this.tagName?a:null}selectedAttributes(){const a=this.selectedElement(),b={};return a&&this.tag&&Array.from(a.attributes).forEach(c=>{this.tag.attributes.includes(c.nodeName)&&(b[c.nodeName]=c.nodeValue)}),b}}class P extends o{constructor(a){super(a,"audio")}insert({src:a,caption:b="",width:c="",height:d="",controls:f="controls"}={}){if(!a)throw"Invalid argument";const g=this.editor.createElement("figure",{attributes:{class:"audio"}});g.appendChild(this.editor.createElement("audio",{attributes:{src:this.editor.url(a),width:c,height:d,controls:f}})),g.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(g)}}class Q extends q{constructor(a){super(a,"audio")}getFieldsetHtml(){return`
            <legend>${this.t("Audio")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}class R extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.parentElement===this.editor.content&&c.hasAttribute("data-alignable")&&this.keyboard(c)}))}keyboard(a){a.addEventListener("keydown",b=>{const c={ArrowUp:null,ArrowLeft:"left",ArrowDown:"center",ArrowRight:"right"};b.target===a&&this.editor.isKey(b,Object.keys(c),{shift:!0})&&(b.preventDefault(),b.cancelBubble=!0,a.classList.remove(...Object.values(c)),c[b.key]&&a.classList.add(c[b.key]))})}}class S extends t{filter(a){const b=this.editor.tags.get(a),c=this.editor.tags.isAllowed("p",a),d=b.editable||b.group==="format";let f=[];const g=(e=null)=>{c&&f.length>0&&(a.insertBefore(this.editor.createElement("p",{html:f.join(" ")}),e),f=[])};Array.from(a.childNodes).forEach(e=>{if(e instanceof HTMLElement){e=this.convert(e);const h=this.editor.tags.get(e),m=e.textContent.trim();h&&this.editor.tags.isAllowed(e,a)?(g(e),this.filterElement(e,h)):h&&h.group==="format"&&c?(e=this.filterElement(e,h))&&(f.push(e.outerHTML),a.removeChild(e)):!d&&m&&c?(f.push(m),a.removeChild(e)):d&&m?a.replaceChild(this.editor.createText(m),e):a.removeChild(e)}else if(e instanceof Text){const h=e.textContent.trim();!d&&h&&c&&f.push(h),(!d||!h)&&a.removeChild(e)}else a.removeChild(e)}),g(),this.filterLinebreaks(a)}convert(a){const b=this.editor.config.base.filter[a.localName];if(!b)return a;const c=this.editor.createElement(b,{html:a.innerHTML});return a.parentElement.replaceChild(c,a),c}filterElement(a,b){return Array.from(a.attributes).forEach(c=>!b.attributes.includes(c.name)&&a.removeAttribute(c.name)),a.hasChildNodes()&&this.editor.filters.filter(a),a.hasChildNodes()||b.empty?a:(a.parentElement.removeChild(a),null)}filterLinebreaks(a){a.innerHTML=a.innerHTML.replace(/^\s*(<br\s*\/?>\s*)+/gi,"").replace(/\s*(<br\s*\/?>\s*)+$/gi,""),a instanceof HTMLParagraphElement?a.outerHTML=a.outerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"</p><p>"):a.innerHTML=a.innerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"<br>")}}class T extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(c.hasAttribute("data-deletable")&&this.keyboard(c),c.querySelectorAll("[data-deletable]").forEach(d=>this.keyboard(d)))}))}keyboard(a){a.addEventListener("keydown",b=>{b.target===a&&this.editor.isKey(b,"Delete",{ctrl:!0})&&(a.previousElementSibling instanceof HTMLElement&&this.editor.focusEnd(a.previousElementSibling),a.parentElement.removeChild(a),b.preventDefault(),b.cancelBubble=!0)})}}class U extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(c.isContentEditable&&this.init(c),c.querySelectorAll("[contenteditable=true]").forEach(d=>this.init(d)))}))}init(a){a.addEventListener("keydown",b=>{this.onKeydownBreak(b),this.onKeydownEnter(b),this.onKeydownBackspace(b)})}onKeydownBreak(a){this.editor.isKey(a,"Enter",{shift:!0})&&!this.editor.tags.isAllowed("br",a.target)&&(a.preventDefault(),a.cancelBubble=!0)}onKeydownEnter(a){let b;if(this.editor.isKey(a,"Enter")){a.preventDefault(),a.cancelBubble=!0;if((b=this.editor.tags.get(a.target))&&b.enter){let c=a.target;do if(this.editor.tags.isAllowed(b.enter,c.parentElement)){c.insertAdjacentElement("afterend",this.editor.createElement(b.enter));break}while((c=c.parentElement)&&this.editor.content.contains(c)&&c!==this.editor.content)}}}onKeydownBackspace(a){this.editor.isKey(a,"Backspace")&&!a.target.textContent&&a.target.hasAttribute("data-deletable")&&(a.target.previousElementSibling&&this.editor.focusEnd(a.target.previousElementSibling),a.target.parentElement.removeChild(a.target),a.preventDefault(),a.cancelBubble=!0)}}class V extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.hasAttribute("data-focusable")&&c.focus()}))}}class W extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(c.hasAttribute("data-navigable")&&this.init(c),c.querySelectorAll("[data-navigable]").forEach(d=>this.init(d)))}))}init(a){a.tabIndex=0,this.keyboard(a)}keyboard(a){a.addEventListener("keydown",b=>{if(b.target===a&&this.editor.isKey(b,["ArrowUp","ArrowDown","Home","End"])&&this.isAllowed(a)){const c=a.previousElementSibling,d=a.nextElementSibling,f=a.parentElement.firstElementChild,g=a.parentElement.lastElementChild,e=a===f,h=a===g;b.key==="ArrowUp"&&!e&&c.hasAttribute("data-navigable")?c.focus():b.key==="ArrowDown"&&!h&&d.hasAttribute("data-navigable")?d.focus():(b.key==="Home"||b.key==="ArrowDown"&&h)&&f.hasAttribute("data-navigable")?f.focus():(b.key==="End"||b.key==="ArrowUp"&&e)&&g.hasAttribute("data-navigable")&&g.focus(),b.preventDefault(),b.cancelBubble=!0}})}isAllowed(a){if(!a.isContentEditable)return!0;const b=this.editor.window.getSelection(),c=this.editor.getSelectedEditable(),d=this.editor.getSelectedElement();return b.isCollapsed&&b.anchorOffset===0&&[c,a.firstChild].includes(d)}}class X extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLSlotElement?this.keyboard(c):c instanceof HTMLElement&&c.querySelectorAll("slot").forEach(d=>this.keyboard(d))}))}keyboard(a){a.addEventListener("keydown",b=>{b.preventDefault(),b.cancelBubble=!0})}}class Y extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(c.hasAttribute("data-sortable")&&this.init(c),c.querySelectorAll("[data-sortable]").forEach(d=>this.init(d)))}))}init(a){this.keyboard(a),this.dragndrop(a)}keyboard(a){a.addEventListener("keydown",b=>{if(b.target===a&&this.editor.isKey(b,["ArrowUp","ArrowDown","Home","End"],{ctrl:!0})){const c=a.parentElement,d=a.previousElementSibling,f=a.nextElementSibling,g=c.firstElementChild,e=c.lastElementChild,h=a===g,m=a===e;b.key==="ArrowUp"&&!h&&d.hasAttribute("data-sortable")?(d.insertAdjacentHTML("beforebegin",a.outerHTML),c.removeChild(a)):b.key==="ArrowDown"&&!m&&f.hasAttribute("data-sortable")?(f.insertAdjacentHTML("afterend",a.outerHTML),c.removeChild(a)):(b.key==="Home"&&!h||b.key==="ArrowDown"&&m)&&g.hasAttribute("data-sortable")?(g.insertAdjacentHTML("beforebegin",a.outerHTML),c.removeChild(a)):(b.key==="End"&&!m||b.key==="ArrowUp"&&h)&&e.hasAttribute("data-sortable")&&(e.insertAdjacentHTML("afterend",a.outerHTML),c.removeChild(a)),b.preventDefault(),b.cancelBubble=!0}})}dragndrop(a){const b="text/x-editor-name",c="text/x-editor-html",d=()=>this.editor.content.querySelectorAll(".editor-dragover").forEach(e=>{e.classList.length>1?e.classList.remove("editor-dragover"):e.removeAttribute("class")}),f=()=>{const e=a.hasAttribute("draggable");this.editor.content.querySelectorAll("[draggable]").forEach(h=>{h.removeAttribute("draggable"),h.hasAttribute("contenteditable")&&h.setAttribute("contenteditable","true")}),e||(a.setAttribute("draggable","true"),a.hasAttribute("contenteditable")&&a.setAttribute("contenteditable","false"))},g=e=>{if(e.target===a){const h=e.dataTransfer.getData(b);h&&this.editor.tags.isAllowed(h,a.parentElement)&&(e.preventDefault(),e.cancelBubble=!0,a.classList.add("editor-dragover"),e.dataTransfer.dropEffect="move")}};a.addEventListener("dblclick",e=>{e.target===a&&(e.preventDefault(),e.cancelBubble=!0,f())}),a.addEventListener("dragstart",e=>{e.target===a&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData(b,a.localName),e.dataTransfer.setData(c,a.outerHTML))}),a.addEventListener("dragend",e=>{e.target===a&&(e.dataTransfer.dropEffect==="move"&&a.parentElement.removeChild(a),f())}),a.addEventListener("dragenter",g),a.addEventListener("dragover",g),a.addEventListener("dragleave",d),a.addEventListener("drop",e=>{d();if(e.target===a){const h=e.dataTransfer.getData(b),m=e.dataTransfer.getData(c);e.preventDefault(),e.cancelBubble=!0,h&&this.editor.tags.isAllowed(h,a.parentElement)&&m&&a.insertAdjacentHTML("beforebegin",m)}})}}class Z extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(this.init(c),c.querySelectorAll("*").forEach(d=>this.init(d)))}))}init(a){const b=this.editor.tags.get(a);b&&(b.alignable&&(a.dataset.alignable=""),b.deletable&&(a.dataset.deletable=""),b.editable&&(a.contentEditable="true"),b.focusable&&(a.dataset.focusable=""),b.navigable&&(a.dataset.navigable=""),b.sortable&&(a.dataset.sortable=""))}}class _ extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&(c.hasAttribute("data-command")&&this.click(c),this.editor.toolbar===c.parentElement&&(c.tabIndex=-1,this.keyboard(c)),c.querySelectorAll("[data-command]").forEach(d=>this.click(d)))}))}click(a){a.addEventListener("click",()=>this.editor.commands.execute(a.getAttribute("data-command")))}keyboard(a){a.addEventListener("keydown",b=>{if(this.editor.isKey(b,["ArrowLeft","ArrowRight","Home","End"])){const c=a.previousElementSibling,d=a.nextElementSibling,f=a.parentElement.firstElementChild,g=a.parentElement.lastElementChild,e=a===f,h=a===g;b.key==="ArrowLeft"&&!e?c.focus():b.key==="ArrowRight"&&!h?d.focus():b.key==="Home"||b.key==="ArrowRight"&&h?f.focus():(b.key==="End"||b.key==="ArrowLeft"&&e)&&g.focus(),b.preventDefault(),b.cancelBubble=!0}})}}class j extends i{static get name(){return"base"}static get config(){return{browser:{},filter:{},lang:null,plugins:[],tags:[],toolbar:[]}}init(){this.editor.tags.create({name:"editor-content",group:"root",children:["block","container","figure","heading","list","paragraph"]}),this.editor.tags.create({name:"slot",group:"slot",editable:!0,focusable:!0,navigable:!0}),this.editor.tags.create({name:"br",group:"break",empty:!0}),this.editor.observe(new Z(this.editor)),this.editor.observe(new _(this.editor),{target:this.editor.toolbar}),this.editor.observe(new U(this.editor)),this.editor.observe(new X(this.editor)),this.editor.observe(new T(this.editor)),this.editor.observe(new W(this.editor)),this.editor.observe(new Y(this.editor)),this.editor.observe(new R(this.editor)),this.editor.observe(new V(this.editor)),this.editor.filters.add(new S(this.editor))}}class u extends q{constructor(a,b,c){super(a,b);this.url=void 0,this.opts=Object.assign({alwaysRaised:"yes",dependent:"yes",height:`${this.editor.window.screen.height}`,location:"no",menubar:"no",minimizable:"no",modal:"yes",resizable:"yes",scrollbars:"yes",toolbar:"no",width:`${this.editor.window.screen.width}`},this.editor.config.base.browser);if(!c||typeof c!=="string")throw"Invalid argument";this.url=c}open(a,b={}){const c=Object.entries(this.opts).map(e=>`${e[0]}=${e[1]}`).join(","),d=this.editor.createElement("a",{attributes:{href:this.url}}),f=new URL(d.href);Object.entries(b).forEach(([e,h])=>f.searchParams.set(e,`${h}`));const g=this.editor.window.open(f.toString(),this.name,c);this.editor.window.addEventListener("message",e=>{e.origin===f.origin&&e.source===g&&(a(e.data),g.close())},!1)}}class $ extends t{filter(a){a.querySelectorAll("figure > figcaption:only-child").forEach(b=>b.parentElement.removeChild(b))}}class aa extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.localName==="figure"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("figure").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > figcaption")||a.appendChild(this.editor.createElement("figcaption"))}}class r extends i{static get name(){return"figure"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"figure",group:"figure",alignable:!0,attributes:["class"],children:["audio","caption","figure","iframe","image","quote","table","video"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"figcaption",group:"caption",children:["format"],editable:!0,enter:"p",navigable:!0}),this.editor.observe(new aa(this.editor)),this.editor.filters.add(new $(this.editor))}}const ba={de:{Audio:"Audio",Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class ca extends i{static get name(){return"audio"}static get dependencies(){return[j,r]}static get config(){return{browser:null}}init(){this.editor.tags.create({name:"audio",group:"audio",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(ba),this.editor.config.audio.browser?this.editor.dialogs.set(new u(this.editor,"audio",this.editor.config.audio.browser)):this.editor.dialogs.set(new Q(this.editor)),this.editor.commands.set(new P(this.editor))}}class da extends o{constructor(a){super(a,"block")}insert({id:a}={}){if(!a)throw"Invalid argument";this.editor.insert(this.editor.createElement("app-block",{attributes:{id:a}}))}}class ea extends q{constructor(a){super(a,"block")}getFieldsetHtml(){return`
            <legend>${this.t("Block")}</legend>
            <div class="editor-required">
                <label for="editor-id">${this.t("ID")}</label>
                <input id="editor-id" name="id" type="text" required />
            </div>
        `}}class B extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}get content(){return this.shadowRoot.innerHTML}set content(a){this.shadowRoot.innerHTML=a}}class fa extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof B&&c.id&&this.editor.config.block.api?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("app-block").forEach(d=>this.init(d))}))}async init(a){if(!a.id||!this.editor.config.block.api)return;try{const b=await fetch(this.editor.config.block.api.replace("{id}",a.id),{mode:"no-cors"});if(b.ok){let c="";this.editor.config.block.css&&(c=this.editor.config.block.css.split(",").map(f=>`<link rel="stylesheet" href="${f}">`).join(""));const d=await b.text();a.content=c+d}}catch(b){console.error(b)}}}const C={de:{Cancel:"Abbrechen",Height:"Höhe",Ifrane:"Iframe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class ga extends i{static get name(){return"block"}static get dependencies(){return[j]}static get config(){return{api:null,browser:null,css:null}}init(){this.editor.registerElement("app-block",B),this.editor.tags.create({name:"app-block",group:"block",attributes:["id"],deletable:!0,empty:!0,focusable:!0,navigable:!0,sortable:!0}),this.registerTranslator(C),this.editor.observe(new fa(this.editor)),this.editor.config.block.browser?this.editor.dialogs.set(new u(this.editor,"block",this.editor.config.block.browser)):this.editor.dialogs.set(new ea(this.editor)),this.editor.commands.set(new da(this.editor))}}class ha extends i{static get name(){return"bold"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"b",group:"format"}),this.registerCommand("bold","b")}}class ia extends t{filter(a){a.querySelectorAll("details > summary:only-child").forEach(b=>b.parentElement.removeChild(b))}}class ja extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{if(c instanceof HTMLDetailsElement)this.init(c);else if(c instanceof HTMLElement){c.querySelectorAll("details").forEach(f=>this.init(f));const d=c.closest("details");d&&this.editor.content.contains(d)&&(d.open=!0)}}))}init(a){a.open=!0,a.querySelectorAll(":scope > summary:not(:first-child)").forEach(b=>a.removeChild(b)),a.querySelector(":scope > summary:first-child")||a.insertAdjacentElement("afterbegin",this.editor.createElement("summary")),a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}class ka extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.localName==="summary"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("summary").forEach(d=>this.init(d))}))}init(a){const b=()=>{a.textContent.trim()||(a.textContent=this.editor.i18n.translate("details","Details"))};b(),a.addEventListener("blur",b),a.addEventListener("keydown",c=>{c.key===" "&&(c.preventDefault(),c.cancelBubble=!0,this.editor.insertText(" "))})}}const la={de:{Details:"Details"}};class ma extends i{static get name(){return"details"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"details",group:"container",children:["figure","list","paragraph","summary"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"summary",group:"summary",editable:!0,enter:"p",navigable:!0}),this.editor.observe(new ja(this.editor)),this.editor.observe(new ka(this.editor)),this.registerTranslator(la),this.registerCommand("details","details"),this.editor.filters.add(new ia(this.editor))}}class na extends q{constructor(a){super(a,"div")}getFieldsetHtml(){return`
            <legend>${this.t("Division")}</legend>
            <div>
                <label for="editor-class">${this.t("CSS class")}</label>
                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />
            </div>
        `}}class oa extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLDivElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("div").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}const pa={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse",Division:"Division","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern"}};class qa extends i{static get name(){return"div"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"div",group:"container",attributes:["class"],children:["block","figure"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.editor.observe(new oa(this.editor)),this.registerTranslator(pa),this.editor.dialogs.set(new na(this.editor)),this.registerCommand("div","div")}}class ra extends o{constructor(a){super(a,"fullscreen")}execute(){this.editor.element.classList.toggle("editor-fullscreen")}}class sa extends i{static get name(){return"fullscreen"}static get dependencies(){return[j]}init(){this.editor.commands.set(new ra(this.editor))}}class ta extends o{constructor(a){super(a,"gallery")}insert(a={}){a.class="gallery",this.editor.insert(this.editor.createElement("figure",{attributes:a}))}}class ua extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.localName==="figure"&&c.classList.contains("gallery")?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("figure.gallery").forEach(d=>this.init(d))}))}init(a){if(!a.querySelector(":scope > slot")){const b=this.editor.createElement("slot"),c=a.querySelector(":scope > figcaption");c?c.insertAdjacentElement("beforebegin",b):a.appendChild(b)}}}class va extends i{static get name(){return"gallery"}static get dependencies(){return[j,r]}init(){this.editor.observe(new ua(this.editor)),this.editor.commands.set(new ta(this.editor))}}class wa extends i{static get name(){return"heading"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"h2",group:"heading",deletable:!0,editable:!0,enter:"p",focusable:!0,navigable:!0,sortable:!0}),this.registerCommand("heading","h2")}}class xa extends o{constructor(a){super(a,"iframe")}insert({src:a,caption:b="",width:c="",height:d="",allowfullscreen:f="allowfullscreen"}={}){if(!a)throw"Invalid argument";const g=this.editor.createElement("figure",{attributes:{class:"iframe"}});g.appendChild(this.editor.createElement("iframe",{attributes:{src:this.editor.url(a),width:c,height:d,allowfullscreen:f}})),g.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(g)}}class ya extends q{constructor(a){super(a,"iframe")}getFieldsetHtml(){return`
            <legend>${this.t("Iframe")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}class za extends i{static get name(){return"iframe"}static get dependencies(){return[j,r]}static get config(){return{browser:null}}init(){this.editor.tags.create({name:"iframe",group:"iframe",attributes:["allowfullscreen","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(C),this.editor.config.iframe.browser?this.editor.dialogs.set(new u(this.editor,"iframe",this.editor.config.iframe.browser)):this.editor.dialogs.set(new ya(this.editor)),this.editor.commands.set(new xa(this.editor))}}class Aa extends o{constructor(a){super(a,"image")}insert({src:a,caption:b="",width:c="",height:d="",alt:f=""}={}){if(!a)throw"Invalid argument";const g=this.editor.createElement("figure",{attributes:{class:"image"}});g.appendChild(this.editor.createElement("img",{attributes:{src:this.editor.url(a),width:c,height:d,alt:f}})),g.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(g)}}class Ba extends q{constructor(a){super(a,"image")}getFieldsetHtml(){return`
            <legend>${this.t("Image")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-alt">${this.t("Alternative text")}</label>
                <input id="editor-alt" name="alt" type="text" placeholder="${this.t("Replacement text for use when media elements are not available")}" />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}const Ca={de:{"Alternative text":"Alternativtext",Cancel:"Abbrechen",Height:"Höhe",Image:"Bild","Insert URL to media element":"URL zum Medienelement eingeben","Replacement text for use when media elements are not available":"Ersatztext, falls Medienelemente nicht verfügbar sind",Save:"Speichern",URL:"URL",Width:"Breite"}};class Da extends i{static get name(){return"image"}static get dependencies(){return[j,r]}static get config(){return{browser:null}}init(){this.editor.tags.create({name:"img",group:"image",attributes:["alt","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(Ca),this.editor.config.image.browser?this.editor.dialogs.set(new u(this.editor,"image",this.editor.config.image.browser)):this.editor.dialogs.set(new Ba(this.editor)),this.editor.commands.set(new Aa(this.editor))}}class Ea extends i{static get name(){return"italic"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"i",group:"format"}),this.registerCommand("italic","i")}}class Fa extends o{constructor(a){super(a,"link","a")}insert({href:a=null}={}){const b=this.selectedElement();b&&a?b.setAttribute("href",this.editor.url(a)):b?b.parentElement.replaceChild(this.editor.createText(b.textContent),b):a&&this.editor.format(this.editor.createElement("a",{attributes:{href:this.editor.url(a)}}))}}class Ga extends q{constructor(a){super(a,"link")}getFieldsetHtml(){return`
            <legend>${this.t("Link")}</legend>
            <div>
                <label for="editor-href">${this.t("URL")}</label>
                <input id="editor-href" name="href" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to add a link or leave empty to unlink")}" />
            </div>
        `}}const Ha={de:{Cancel:"Abbrechen","Insert URL to add a link or leave empty to unlink":"URL eingeben um zu verlinken oder leer lassen um Link zu entfernen",Link:"Link",Save:"Speichern",URL:"URL"}};class Ia extends i{static get name(){return"link"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"a",group:"format",attributes:["href"]}),this.registerTranslator(Ha),this.editor.dialogs.set(new Ga(this.editor)),this.editor.commands.set(new Fa(this.editor))}}class Ja extends l{observe(a){a.forEach(b=>{b.addedNodes.forEach(c=>{c instanceof HTMLOListElement||c instanceof HTMLUListElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("ol, ul").forEach(d=>this.init(d))}),b.removedNodes.length>0&&(b.target instanceof HTMLOListElement||b.target instanceof HTMLUListElement)&&b.target.children.length===0&&b.target.parentElement.removeChild(b.target)})}init(a){a.children.length===0&&a.appendChild(this.editor.createElement("li"))}}class D extends i{static get name(){return"list"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"li",group:"listitem",children:["break","format"],deletable:!0,editable:!0,enter:"li",focusable:!0,navigable:!0,sortable:!0}),this.editor.observe(new Ja(this.editor))}}class Ka extends i{static get name(){return"orderedlist"}static get dependencies(){return[j,D]}init(){this.editor.tags.create({name:"ol",group:"list",children:["listitem"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.registerCommand("orderedlist","ol")}}class La extends i{static get name(){return"paragraph"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"p",group:"paragraph",children:["break","format"],deletable:!0,editable:!0,enter:"p",focusable:!0,navigable:!0,sortable:!0}),this.registerCommand("paragraph","p")}}class Ma extends o{constructor(a){super(a,"quote")}insert(a={}){a.class="quote";const b=this.editor.createElement("figure",{attributes:a});b.appendChild(this.editor.createElement("blockquote")),this.editor.insert(b)}}class Na extends l{observe(a){a.forEach(b=>b.removedNodes.forEach(c=>{c instanceof HTMLElement&&c.localName==="blockquote"&&b.target.localName==="figure"&&b.target.classList.contains("quote")&&b.target.parentElement.removeChild(b.target)}))}}class Oa extends i{static get name(){return"quote"}static get dependencies(){return[j,r]}init(){this.editor.tags.create({name:"blockquote",group:"quote",children:["break","format"],deletable:!0,editable:!0,enter:"p",navigable:!0}),this.editor.commands.set(new Ma(this.editor)),this.editor.observe(new Na(this.editor))}}class Pa extends q{constructor(a){super(a,"section")}getFieldsetHtml(){return`
            <legend>${this.t("Section")}</legend>
            <div>
                <label for="editor-class">${this.t("CSS class")}</label>
                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />
            </div>
        `}}class Qa extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.localName==="section"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("section").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}const Ra={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern",Section:"Sektion"}};class Sa extends i{static get name(){return"section"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"section",group:"container",attributes:["class"],children:["figure","heading","list","paragraph"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.editor.observe(new Qa(this.editor)),this.registerTranslator(Ra),this.editor.dialogs.set(new Pa(this.editor)),this.registerCommand("section","section")}}class Ta extends i{static get name(){return"subheading"}static get dependencies(){return[j]}init(){this.editor.tags.create({name:"h3",group:"heading",deletable:!0,editable:!0,enter:"p",focusable:!0,navigable:!0,sortable:!0}),this.registerCommand("subheading","h3")}}class Ua extends o{constructor(a){super(a,"table")}insert({rows:a=1,cols:b=1}={}){a=a>1?a:1,b=b>1?b:1;const c=this.editor.createElement("figure",{attributes:{class:"table"}}),d=this.editor.createElement("table"),f=this.editor.createElement("tbody");for(let g=0;g<a;g++){const e=this.editor.createElement("tr");f.appendChild(e);for(let h=0;h<b;++h)e.appendChild(this.editor.createElement("td"))}d.appendChild(f),c.appendChild(d),this.editor.insert(c)}}class Va extends q{constructor(a){super(a,"table")}getFieldsetHtml(){return`
            <legend>${this.t("Table")}</legend>
            <div class="editor-required">
                <label for="editor-rows">${this.t("Rows")}</label>
                <input id="editor-rows" name="rows" type="number" value="1" min="1" required />
            </div>
            <div class="editor-required">
                <label for="editor-cols">${this.t("Columns")}</label>
                <input id="editor-cols" name="cols" type="number" value="1" min="1" required />
            </div>
        `}}class Wa extends t{filter(a){if(a instanceof HTMLTableRowElement&&!a.querySelector("th:not(:empty), td:not(:empty)")||a instanceof HTMLTableSectionElement&&a.rows.length<=0||a instanceof HTMLTableElement&&a.querySelector("thead, tfoot")&&!a.querySelector("tbody"))for(;a.firstChild;)a.removeChild(a.firstChild)}}class Xa extends l{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLTableElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("table").forEach(d=>this.init(d))}))}init(a){this.sections(a),this.keyboard(a)}sections(a){if(a.tBodies.length>0&&a.tBodies[0].rows[0]&&(!a.tHead||!a.tFoot)){const b=a.tBodies[0].rows[0].cells.length;let c;if(!a.tHead){c=a.createTHead().insertRow();for(let d=0;d<b;d++)c.appendChild(this.editor.createElement("th"))}if(!a.tFoot){c=a.createTFoot().insertRow();for(let d=0;d<b;d++)c.insertCell()}}}keyboard(a){a.addEventListener("keydown",b=>{const c=b.target,d=c.parentElement,f=d.parentElement,g=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"];if(c instanceof HTMLTableCellElement&&d instanceof HTMLTableRowElement&&(f instanceof HTMLTableElement||f instanceof HTMLTableSectionElement)&&(this.editor.isKey(b,g,{alt:!0})||this.editor.isKey(b,g,{alt:!0,shift:!0}))){const e=d.cells.length,h=f.rows.length,m=f instanceof HTMLTableElement?d.rowIndex:d.sectionRowIndex;let n;if(b.shiftKey&&(b.key==="ArrowLeft"&&c.cellIndex>0||b.key==="ArrowRight"&&c.cellIndex<e-1))n=c.cellIndex+(b.key==="ArrowLeft"?-1:1),Array.from(a.rows).forEach(k=>k.deleteCell(n));else if(b.shiftKey&&(b.key==="ArrowUp"&&m>0||b.key==="ArrowDown"&&m<h-1))n=m+(b.key==="ArrowUp"?-1:1),f.deleteRow(n);else if(!b.shiftKey&&(b.key==="ArrowLeft"||b.key==="ArrowRight"))n=c.cellIndex+(b.key==="ArrowLeft"?0:1),Array.from(a.rows).forEach(k=>{k.parentElement.localName==="thead"?k.insertBefore(this.editor.createElement("th"),k.cells[n]):k.insertCell(n)});else if(!b.shiftKey&&(b.key==="ArrowUp"||b.key==="ArrowDown")){n=m+(b.key==="ArrowUp"?0:1);const k=f.insertRow(n);for(let p=0;p<e;p++)k.parentElement.localName==="thead"?k.appendChild(this.editor.createElement("th")):k.insertCell()}b.preventDefault(),b.cancelBubble=!0}})}}const Ya={de:{Cancel:"Abbrechen",Columns:"Spalten",Rows:"Zeilen",Save:"Speichern",Table:"Tabelle"}};class Za extends i{static get name(){return"table"}static get dependencies(){return[j,r]}init(){this.editor.tags.create({name:"table",group:"table",children:["tablesection"],deletable:!0,navigable:!0,sortable:!0}),["thead","tbody","tfoot"].forEach(a=>this.editor.tags.create({name:a,group:"tablesection",children:["tablerow"]})),this.editor.tags.create({name:"tr",group:"tablerow",children:["tablecell"]}),["td","th"].forEach(a=>this.editor.tags.create({name:a,group:"tablecell",children:["break","format"],editable:!0,empty:!0})),this.editor.observe(new Xa(this.editor)),this.registerTranslator(Ya),this.editor.filters.add(new Wa(this.editor)),this.editor.dialogs.set(new Va(this.editor)),this.editor.commands.set(new Ua(this.editor))}}class _a extends i{static get name(){return"unorderedlist"}static get dependencies(){return[j,D]}init(){this.editor.tags.create({name:"ul",group:"list",children:["listitem"],deletable:!0,focusable:!0,navigable:!0,sortable:!0}),this.registerCommand("unorderedlist","ul")}}class $a extends o{constructor(a){super(a,"video")}insert({src:a,caption:b="",width:c="",height:d="",controls:f="controls"}={}){if(!a)throw"Invalid argument";const g=this.editor.createElement("figure",{attributes:{class:"video"}});g.appendChild(this.editor.createElement("video",{attributes:{src:this.editor.url(a),width:c,height:d,controls:f}})),g.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(g)}}class ab extends q{constructor(a){super(a,"video")}getFieldsetHtml(){return`
            <legend>${this.t("Video")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}const bb={de:{Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Video:"Video",Width:"Breite"}};class cb extends i{static get name(){return"video"}static get dependencies(){return[j,r]}static get config(){return{browser:null}}init(){this.editor.tags.create({name:"video",group:"video",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(bb),this.editor.config.video.browser?this.editor.dialogs.set(new u(this.editor,"video",this.editor.config.video.browser)):this.editor.dialogs.set(new ab(this.editor)),this.editor.commands.set(new $a(this.editor))}}class db extends s{static get defaultConfig(){return{base:{filter:{em:"i",strong:"b"},plugins:[ca,ga,ha,ma,qa,sa,va,wa,za,Da,Ea,Ia,Ka,La,Oa,Sa,Ta,Za,_a,cb],toolbar:["fullscreen","bold","italic","link","paragraph","heading","subheading","unorderedlist","orderedlist","quote","image","video","audio","iframe","table","section","details","block","div","gallery"]}}}}export default db;
