class F extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof n))throw"Invalid argument";super.set(a.name,a)}execute(a){if(!this.has(a))throw"Invalid argument";this.get(a).execute()}}class o{constructor(a,b){this.editor=void 0,this.name=void 0;if(!(a instanceof p)||!b||typeof b!=="string")throw"Invalid argument";this.editor=a,this.name=b}open(a,b={}){this.editor.document.querySelectorAll("dialog.editor-dialog").forEach(l=>l.parentElement.removeChild(l));const c=this.editor.window.getSelection(),d=c.rangeCount>0?c.getRangeAt(0):null,e=this.editor.createElement("dialog",{attributes:{class:"editor-dialog"}}),f=this.editor.createElement("form"),h=this.editor.createElement("fieldset"),g=this.editor.createElement("button",{attributes:{class:"editor-cancel",type:"button"},html:this.t("Cancel")}),i=this.editor.createElement("button",{attributes:{class:"editor-save"},html:this.t("Save")}),k=()=>{d&&(c.removeAllRanges(),c.addRange(d)),e.parentElement.removeChild(e)};e.appendChild(f),e.addEventListener("click",l=>{l.target===e&&k()}),typeof e.open!=="boolean"&&this.polyfill(e),e.open=!0,h.insertAdjacentHTML("beforeend",this.getFieldsetHtml());for(let[l,s]of Object.entries(b))h.elements[l]&&(h.elements[l].value=s);f.appendChild(h),f.addEventListener("submit",l=>{l.preventDefault(),k();const s={};Array.from(h.elements).forEach(A=>s[A.name]=A.value),a(s)}),g.addEventListener("click",k),f.appendChild(g),f.appendChild(i),this.editor.element.appendChild(e)}getFieldsetHtml(){return""}t(a){return this.editor.i18n.translate(this.name,a)}polyfill(a){Object.defineProperty(a,"open",{get:function(){return a.hasAttribute("open")},set:function(b){b?a.setAttribute("open",""):a.removeAttribute("open")}})}}class G extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof o))throw"Invalid argument";super.set(a.name,a)}}class q{constructor(a,b){this.editor=void 0,this.name=void 0;if(!(a instanceof p)||!b||typeof b!=="string")throw"Invalid argument";this.editor=a,this.name=b}filter(a){throw"Not implemented"}}class H extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof q))throw"Invalid argument";super.set(a.name,a)}filter(a){if(!(a instanceof HTMLElement))throw"Invalid argument";this.forEach(b=>{a.normalize(),b.filter(a)})}}class I extends Map{get(a){return super.get(a)||null}set(a,b){if(!a||typeof a!=="string"||!(b instanceof Object))throw"Invalid argument";super.set(a,b)}translate(a,b){const c=this.get(a);return c&&c[b]?c[b]:b}}class m{constructor(a){this.editor=void 0;if(!(a instanceof p))throw"Invalid argument";this.editor=a}observe(a){throw"Not implemented"}}class j{constructor(a,b){this.editor=void 0,this.name=void 0;if(!(a instanceof p)||!b||typeof b!=="string")throw"Invalid argument";this.editor=a,this.name=b}init(){throw"Not implemented"}registerTranslator(a){a[this.editor.config.base.lang]&&this.editor.i18n.set(this.name,a[this.editor.config.base.lang])}registerCommand(a,b=null){this.editor.commands.set(new n(this.editor,a,b))}static defaultConfig(){return{}}}class J extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof j))throw"Invalid argument";super.set(a.name,a)}init(){this.forEach(a=>a.init())}}class x{constructor({name:a,group:b,...c}={}){this.name=void 0,this.group=void 0,this.attributes=[],this.children=[],this.deletable=!1,this.editable=!1,this.empty=!1,this.enter=null,this.navigable=!1,this.sortable=!1;if(!a||typeof a!=="string"||!b||typeof b!=="string")throw"Invalid argument";this.name=a,this.group=b,this.enter=c.enter&&typeof c.enter==="string"?c.enter:null,["attributes","children"].forEach(d=>this[d]=Array.isArray(c[d])?c[d]:[]),["deletable","editable","empty","navigable","sortable"].forEach(d=>this[d]=c[d]===!0)}}class K extends Map{constructor(a=[]){super();a.forEach(b=>this.set(b))}get(a){return super.get(a)||null}set(a){if(!(a instanceof x))throw"Invalid argument";super.set(a.name,a)}create(a){this.set(new x(a))}isAllowed(a,b){const c=this.get(a),d=this.get(b);return c&&d&&d.children.includes(c.group)}isAllowedElement(a,b){return a instanceof HTMLElement&&b instanceof HTMLElement&&this.isAllowed(a.tagName.toLowerCase(),b.tagName.toLowerCase())}isAllowedText(a){const b=this.get(a);return b&&b.children.includes("text")}deletable(){return Array.from(this.values()).filter(a=>a.deletable).map(a=>a.name)}editable(){return Array.from(this.values()).filter(a=>a.editable).map(a=>a.name)}empty(){return Array.from(this.values()).filter(a=>a.empty).map(a=>a.name)}navigable(){return Array.from(this.values()).filter(a=>a.navigable).map(a=>a.name)}sortable(){return Array.from(this.values()).filter(a=>a.sortable).map(a=>a.name)}isDeletable(a){const b=this.get(a);return b&&b.deletable}isEditable(a){const b=this.get(a);return b&&b.editable}isEmpty(a){const b=this.get(a);return b&&b.empty}isNavigable(a){const b=this.get(a);return b&&b.navigable}isSortable(a){const b=this.get(a);return b&&b.sortable}isElementDeletable(a){return a instanceof HTMLElement&&this.isDeletable(a.tagName.toLowerCase())}isElementEmpty(a){return a instanceof HTMLElement&&this.isEmpty(a.tagName.toLowerCase())}isElementEditable(a){return a instanceof HTMLElement&&this.isEditable(a.tagName.toLowerCase())}isElementNavigable(a){return a instanceof HTMLElement&&this.isNavigable(a.tagName.toLowerCase())}isElementSortable(a){return a instanceof HTMLElement&&this.isSortable(a.tagName.toLowerCase())}}class p{constructor(a,b={}){this.orig=void 0,this.document=void 0,this.window=void 0,this.origin=void 0,this.element=void 0,this.toolbar=void 0,this.content=void 0,this.config={},this.i18n=new I(),this.tags=new K(),this.filters=new H(),this.dialogs=new G(),this.commands=new F(),this.plugins=new J();if(!(a instanceof HTMLElement)||!(b instanceof Object))throw"Invalid argument";this.orig=a,this.document=this.orig.ownerDocument,this.window=this.document.defaultView,this.origin=this.window.origin||this.window.location.origin,this.toolbar=this.createElement("editor-toolbar",{attributes:{role:"toolbar"}}),this.content=this.createElement("editor-content"),this.element=this.createElement("akilli-editor"),this.element.appendChild(this.toolbar),this.element.appendChild(this.content),this.config=b}init(){this.plugins.size===0&&(this.initConfig(),this.initPlugins(),this.initToolbar()),this.initContent(),this.initDom()}initConfig(){for(let[a,b]of Object.entries(this.constructor.defaultConfig()))this.config[a]=Object.assign({},b,this.config[a]||{})}initPlugins(){this.config.base.plugins.map(a=>{const b=a.defaultConfig(),c=new a(this);Object.keys(b).length>0&&(this.config[c.name]=Object.assign({},b,this.config[c.name]||{})),this.plugins.set(c)}),this.plugins.init()}initToolbar(){this.config.base.toolbar.forEach(a=>this.toolbar.appendChild(this.createElement("button",{attributes:{type:"button","data-command":a,title:a},html:a})))}initContent(){this.orig instanceof HTMLTextAreaElement?(this.orig.form.addEventListener("submit",()=>this.save()),this.setHtml(this.orig.value.replace("/&nbsp;/g"," "))):this.setHtml(this.orig.innerHTML)}initDom(){this.orig.insertAdjacentElement("afterend",this.element),this.orig.hidden=!0}destroy(){this.element.parentElement.removeChild(this.element),this.orig.hidden=!1}getHtml(){const a=this.content.cloneNode(!0);return this.filters.filter(a),a.innerHTML}setHtml(a){const b=this.content.cloneNode(!1);b.innerHTML=a,this.filters.filter(b),this.content.innerHTML=b.innerHTML}save(){this.orig instanceof HTMLTextAreaElement?this.orig.value=this.getHtml():this.orig.innerHTML=this.getHtml()}insert(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.getSelectedEditable();if(b&&b instanceof HTMLSlotElement&&this.tags.isAllowedElement(a,b.parentElement))b.insertAdjacentElement("beforebegin",a);else if(this.tags.isAllowedElement(a,this.content))this.content.appendChild(a);else throw"Invalid argument"}insertText(a){this.document.execCommand("inserttext",!1,a)}format(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.window.getSelection(),c=b.anchorNode instanceof Text?b.anchorNode.parentElement:b.anchorNode,d=this.getSelectedEditable();if(b.isCollapsed||!b.toString().trim()||!(c instanceof HTMLElement)||!d)return;const e=b.getRangeAt(0),f=this.tags.get(c.tagName.toLowerCase()),h=!f||f.group==="format"?c.parentElement:c;e.startContainer instanceof Text&&e.startContainer.parentElement!==h&&e.setStartBefore(e.startContainer.parentElement),e.endContainer instanceof Text&&e.endContainer.parentElement!==h&&e.setEndAfter(e.endContainer.parentElement);const g=e.toString(),i=e.cloneContents().childNodes;let k=Array.from(i).every(l=>l instanceof Text&&!l.textContent.trim()||l instanceof HTMLElement&&l.tagName===a.tagName);e.deleteContents(),h.isContentEditable&&this.tags.isAllowedElement(a,h)&&g.trim()&&(!f||!k)?(a.textContent=g,e.insertNode(a)):e.insertNode(this.createText(g)),h.normalize()}registerElement(a,b,c=null){typeof this.window.customElements.get(a)==="undefined"&&this.window.customElements.define(a,b,c?{extends:c}:null)}createElement(a,{attributes:b={},html:c="",is:d=null}={}){const e=this.document.createElement(a,d?{is:d}:null);e.innerHTML=c;for(let[f,h]of Object.entries(b))h&&e.setAttribute(f,`${h}`);return e}createText(a){return this.document.createTextNode(a)}getSelectedElement(){const a=this.window.getSelection(),b=a.anchorNode instanceof Text?a.anchorNode.parentElement:a.anchorNode,c=a.focusNode instanceof Text?a.focusNode.parentElement:a.focusNode;return b instanceof HTMLElement&&c instanceof HTMLElement&&b===c&&this.content.contains(b)?b:null}getSelectedEditable(){const a=this.window.getSelection(),b=a.anchorNode instanceof Text?a.anchorNode.parentElement:a.anchorNode,c=a.focusNode instanceof Text?a.focusNode.parentElement:a.focusNode;if(b instanceof HTMLElement&&c instanceof HTMLElement){const d=b.closest("[contenteditable=true]"),e=c.closest("[contenteditable=true]");if(d&&e&&d===e&&this.content.contains(d))return d}return null}focusEnd(a){if(!(a instanceof HTMLElement))throw"Invalid argument";const b=this.document.createRange(),c=this.window.getSelection();a.focus(),b.selectNodeContents(a),b.collapse(),c.removeAllRanges(),c.addRange(b)}observe(a,{target:b=null,config:c={childList:!0,subtree:!0}}={}){if(!(a instanceof m)||b&&!(b instanceof HTMLElement))throw"Invalid argument";const d=new MutationObserver(e=>a.observe(e));d.observe(b||this.content,c)}isContent(a){if(!(a instanceof HTMLElement))throw"Invalid argument";return this.content===a||a.tagName.toLowerCase()==="editor-content"}url(a){const b=this.createElement("a",{attributes:{href:a}});return b.origin===this.origin?b.pathname:b.href}static defaultConfig(){return{}}static create(a,b={}){const c=new this(a,b);return c.init(),c}}class n{constructor(a,b,c=null){this.editor=void 0,this.name=void 0,this.tagName=null;if(!(a instanceof p)||!b||typeof b!=="string"||c&&typeof c!=="string")throw"Invalid argument";this.editor=a,this.name=b,this.tagName=c}execute(){const a=this.editor.dialogs.get(this.name);a?a.open(b=>this.insert(b),this.selectedAttributes()):this.insert()}insert(a={}){const b=this.tagName?this.editor.tags.get(this.tagName):null;if(b){Object.keys(a).forEach(d=>b.attributes.includes(d)||delete a[d]);const c=this.editor.createElement(b.name,{attributes:a});b.group==="format"?this.editor.format(c):this.editor.insert(c)}}selectedAttributes(){const a={},b=this.editor.getSelectedElement();return b instanceof HTMLElement&&b.tagName.toLowerCase()===this.tagName&&Array.from(b.attributes).forEach(c=>a[c.nodeName]=c.nodeValue),a}}class L extends n{constructor(a){super(a,"audio")}insert({src:a,caption:b="",width:c="",height:d="",controls:e="controls"}={}){if(!a)throw"Invalid argument";const f=this.editor.createElement("figure",{attributes:{class:"audio"}});f.appendChild(this.editor.createElement("audio",{attributes:{src:this.editor.url(a),width:c,height:d,controls:e}})),f.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(f)}}class M extends o{constructor(a){super(a,"audio")}getFieldsetHtml(){return`
            <legend>${this.t("Audio")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}class r extends o{constructor(a,b,c){super(a,b);this.url=void 0,this.opts=Object.assign({alwaysRaised:"yes",dependent:"yes",height:`${this.editor.window.screen.height}`,location:"no",menubar:"no",minimizable:"no",modal:"yes",resizable:"yes",scrollbars:"yes",toolbar:"no",width:`${this.editor.window.screen.width}`},this.editor.config.base.browser);if(!c||typeof c!=="string")throw"Invalid argument";this.url=c}open(a,b={}){const c=Object.entries(this.opts).map(f=>`${f[0]}=${f[1]}`).join(","),d=this.editor.window.open(this.url,this.name,c),e=this.editor.createElement("a",{attributes:{href:this.url}});this.editor.window.addEventListener("message",f=>{f.origin===e.origin&&f.source===d&&(a(f.data),d.close())},!1)}}const N={de:{Audio:"Audio",Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class O extends j{constructor(a){super(a,"audio")}init(){this.editor.tags.create({name:"audio",group:"media",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(N),this.editor.config.audio.browser?this.editor.dialogs.set(new r(this.editor,"audio",this.editor.config.audio.browser)):this.editor.dialogs.set(new M(this.editor)),this.editor.commands.set(new L(this.editor))}static defaultConfig(){return{browser:null}}}class P extends q{constructor(a){super(a,"base")}filter(a){const b=a.tagName.toLowerCase(),c=this.editor.isContent(a);Array.from(a.childNodes).forEach(d=>{if(d instanceof HTMLElement){d=this.convert(d);const e=d.tagName.toLowerCase(),f=this.editor.tags.get(e),h=d.textContent.trim();f&&(this.editor.tags.isAllowed(e,b)||c&&f.group==="format"&&this.editor.tags.isAllowed("p",b))?(Array.from(d.attributes).forEach(g=>{f.attributes.includes(g.name)||d.removeAttribute(g.name)}),d.hasChildNodes()&&this.editor.filters.filter(d),!d.hasChildNodes()&&!f.empty?a.removeChild(d):this.editor.tags.isAllowed(e,b)||a.replaceChild(this.editor.createElement("p",{html:d.outerHTML}),d)):c&&h&&this.editor.tags.isAllowed("p",b)?a.replaceChild(this.editor.createElement("p",{html:h}),d):h&&this.editor.tags.isAllowedText(b)?a.replaceChild(this.editor.createText(h),d):a.removeChild(d)}else if(d instanceof Text){const e=d.textContent.trim();c&&e&&this.editor.tags.isAllowed("p",b)?a.replaceChild(this.editor.createElement("p",{html:e}),d):(!e||!this.editor.tags.isAllowedText(b))&&a.removeChild(d)}else a.removeChild(d)}),this.linebreaks(a)}convert(a){const b=this.editor.config.base.filter[a.tagName.toLowerCase()];if(!b)return a;const c=this.editor.createElement(b,{html:a.innerHTML});return a.parentElement.replaceChild(c,a),c}linebreaks(a){a.innerHTML=a.innerHTML.replace(/^\s*(<br\s*\/?>\s*)+/gi,"").replace(/\s*(<br\s*\/?>\s*)+$/gi,""),a instanceof HTMLParagraphElement?a.outerHTML=a.outerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"</p><p>"):a.innerHTML=a.innerHTML.replace(/\s*(<br\s*\/?>\s*){2,}/gi,"<br>")}}class Q extends m{observe(a){const b=this.editor.tags.deletable(),c=b.join(", ");a.forEach(d=>d.addedNodes.forEach(e=>{e instanceof HTMLElement&&(b.includes(e.tagName.toLowerCase())&&this.keyboard(e),c&&e.querySelectorAll(c).forEach(f=>this.keyboard(f)))}))}keyboard(a){a.addEventListener("keyup",b=>{b.target===a&&b.ctrlKey&&b.key==="Delete"&&(a.previousElementSibling&&this.editor.focusEnd(a.previousElementSibling),a.parentElement.removeChild(a),b.preventDefault(),b.cancelBubble=!0)})}}class R extends m{observe(a){const b=this.editor.tags.editable(),c=b.join(", ");a.forEach(d=>d.addedNodes.forEach(e=>{e instanceof HTMLElement&&(b.includes(e.tagName.toLowerCase())?this.init(e):c&&e.querySelectorAll(c).forEach(f=>this.init(f)))}))}init(a){a.contentEditable="true",a.addEventListener("keydown",b=>{this.onKeydownEnter(b),this.onKeydownBackspace(b)}),a.addEventListener("keyup",b=>this.onKeyupEnter(b))}onKeydownEnter(a){a.key==="Enter"&&(!a.shiftKey||!this.editor.tags.isAllowed("br",a.target.tagName.toLowerCase()))&&(a.preventDefault(),a.cancelBubble=!0)}onKeyupEnter(a){let b;if(a.key==="Enter"&&!a.shiftKey&&(b=this.editor.tags.get(a.target.tagName.toLowerCase()))&&b.enter){let c=a.target,d;a.preventDefault(),a.cancelBubble=!0;do{d=c.parentElement.tagName.toLowerCase();if(this.editor.tags.isAllowed(b.enter,d)){c.insertAdjacentElement("afterend",this.editor.createElement(b.enter));break}}while((c=c.parentElement)&&this.editor.content.contains(c)&&!this.editor.isContent(c))}}onKeydownBackspace(a){a.key==="Backspace"&&!a.shiftKey&&!a.target.textContent&&this.editor.tags.isElementDeletable(a.target)&&(a.target.previousElementSibling&&this.editor.focusEnd(a.target.previousElementSibling),a.target.parentElement.removeChild(a.target),a.preventDefault(),a.cancelBubble=!0)}}class S extends q{constructor(a){super(a,"figure")}filter(a){a.querySelectorAll("figure > figcaption:only-child").forEach(b=>b.parentElement.removeChild(b))}}class T extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.tagName.toLowerCase()==="figure"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("figure").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > figcaption")||a.appendChild(this.editor.createElement("figcaption")),a.parentElement instanceof HTMLElement&&this.editor.isContent(a.parentElement)&&this.keyboard(a)}keyboard(a){a.addEventListener("keyup",b=>{const c={ArrowLeft:"left",ArrowRight:"right"};if(b.target===a&&b.ctrlKey&&Object.keys(c).includes(b.key)){b.preventDefault(),b.cancelBubble=!0;const d=c[b.key]&&a.classList.contains(c[b.key]);a.classList.remove(...Object.values(c)),d||a.classList.add(c[b.key])}})}}class U extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{(this.editor.tags.isElementNavigable(c)||this.editor.tags.isElementEditable(c))&&(c.tabIndex=0,c.focus())}))}}class V extends m{observe(a){const b=this.editor.tags.navigable(),c=b.join(", ");a.forEach(d=>d.addedNodes.forEach(e=>{e instanceof HTMLElement&&(b.includes(e.tagName.toLowerCase())&&this.keyboard(e),c&&e.querySelectorAll(c).forEach(f=>this.keyboard(f)))}))}keyboard(a){a.addEventListener("keyup",b=>{if(b.target===a&&!b.ctrlKey&&["ArrowUp","ArrowDown","Home","End"].includes(b.key)){const c=a.previousElementSibling,d=a.nextElementSibling,e=a.parentElement.firstElementChild,f=a.parentElement.lastElementChild,h=a===e,g=a===f;b.key==="ArrowUp"&&!h?c.focus():b.key==="ArrowDown"&&!g?d.focus():b.key==="Home"||b.key==="ArrowDown"&&g?e.focus():(b.key==="End"||b.key==="ArrowUp"&&h)&&f.focus(),b.preventDefault(),b.cancelBubble=!0}})}}class W extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLSlotElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("slot").forEach(d=>this.init(d))}))}init(a){const b=c=>{c.preventDefault(),c.cancelBubble=!0};a.addEventListener("keydown",b),a.addEventListener("keyup",b)}}class X extends m{observe(a){const b=this.editor.tags.sortable(),c=b.join(", ");a.forEach(d=>d.addedNodes.forEach(e=>{e instanceof HTMLElement&&(b.includes(e.tagName.toLowerCase())&&this.init(e),c&&e.querySelectorAll(c).forEach(f=>this.init(f)))}))}init(a){this.keyboard(a),this.dragndrop(a)}keyboard(a){a.addEventListener("keyup",b=>{if(b.target===a&&b.ctrlKey&&["ArrowUp","ArrowDown","Home","End"].includes(b.key)){const c=a.parentElement,d=a.previousElementSibling,e=a.nextElementSibling,f=c.firstElementChild,h=c.lastElementChild,g=a===f,i=a===h;b.key==="ArrowUp"&&!g&&this.editor.tags.isElementSortable(d)?(d.insertAdjacentHTML("beforebegin",a.outerHTML),c.removeChild(a)):b.key==="ArrowDown"&&!i&&this.editor.tags.isElementSortable(e)?(e.insertAdjacentHTML("afterend",a.outerHTML),c.removeChild(a)):(b.key==="Home"&&!g||b.key==="ArrowDown"&&i)&&this.editor.tags.isElementSortable(f)?(f.insertAdjacentHTML("beforebegin",a.outerHTML),c.removeChild(a)):(b.key==="End"&&!i||b.key==="ArrowUp"&&g)&&this.editor.tags.isElementSortable(h)&&(h.insertAdjacentHTML("afterend",a.outerHTML),c.removeChild(a)),b.preventDefault(),b.cancelBubble=!0}})}dragndrop(a){const b="text/x-editor-name",c="text/x-editor-html",d=a.parentElement.tagName.toLowerCase(),e=()=>{this.editor.content.querySelectorAll(".editor-dragover").forEach(g=>{g.classList.length>1?g.classList.remove("editor-dragover"):g.removeAttribute("class")})},f=()=>{const g=a.hasAttribute("draggable");this.editor.content.querySelectorAll("[draggable]").forEach(i=>{i.removeAttribute("draggable"),i.hasAttribute("contenteditable")&&i.setAttribute("contenteditable","true")}),g||(a.setAttribute("draggable","true"),a.hasAttribute("contenteditable")&&a.setAttribute("contenteditable","false"))},h=g=>{if(g.target===a){const i=g.dataTransfer.getData(b);i&&this.editor.tags.isAllowed(i,d)&&(g.preventDefault(),g.cancelBubble=!0,a.classList.add("editor-dragover"),g.dataTransfer.dropEffect="move")}};a.addEventListener("dblclick",g=>{g.target===a&&(g.preventDefault(),g.cancelBubble=!0,f())}),a.addEventListener("dragstart",g=>{g.target===a&&(g.dataTransfer.effectAllowed="move",g.dataTransfer.setData(b,a.tagName.toLowerCase()),g.dataTransfer.setData(c,a.outerHTML))}),a.addEventListener("dragend",g=>{g.target===a&&(g.dataTransfer.dropEffect==="move"&&a.parentElement.removeChild(a),f())}),a.addEventListener("dragenter",h),a.addEventListener("dragover",h),a.addEventListener("dragleave",e),a.addEventListener("drop",g=>{e();if(g.target===a){const i=g.dataTransfer.getData(b),k=g.dataTransfer.getData(c);g.preventDefault(),g.cancelBubble=!0,i&&this.editor.tags.isAllowed(i,d)&&k&&a.insertAdjacentHTML("beforebegin",k)}})}}class Y extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLButtonElement?this.click(c):c instanceof HTMLElement&&c.querySelectorAll("button").forEach(d=>this.click(d)),c instanceof HTMLElement&&this.editor.toolbar===c.parentElement&&(c.tabIndex=-1,this.keyboard(c))}))}click(a){a.addEventListener("click",()=>this.editor.commands.execute(a.getAttribute("data-command")))}keyboard(a){a.addEventListener("keyup",b=>{["ArrowLeft","ArrowRight","Home","End"].includes(b.key)&&(b.key==="ArrowLeft"?a.previousElementSibling?a.previousElementSibling.focus():a.parentElement.lastElementChild.focus():b.key==="ArrowRight"?a.nextElementSibling?a.nextElementSibling.focus():a.parentElement.firstElementChild.focus():b.key==="Home"?a.parentElement.firstElementChild.focus():b.key==="End"&&a.parentElement.lastElementChild.focus(),b.preventDefault(),b.cancelBubble=!0)})}}class Z extends j{constructor(a){super(a,"base")}init(){this.editor.tags.create({name:"editor-content",group:"root",children:["figure","heading","list","paragraph","section"]}),this.editor.tags.create({name:"slot",group:"slot",editable:!0,navigable:!0}),this.editor.tags.create({name:"br",group:"break",empty:!0}),this.editor.tags.create({name:"figure",group:"figure",attributes:["class"],children:["caption","figure","media","quote","table"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"figcaption",group:"caption",children:["format","text"],editable:!0,enter:"p",navigable:!0}),this.editor.observe(new Y(this.editor),{target:this.editor.toolbar}),this.editor.observe(new R(this.editor)),this.editor.observe(new W(this.editor)),this.editor.observe(new Q(this.editor)),this.editor.observe(new V(this.editor)),this.editor.observe(new X(this.editor)),this.editor.observe(new U(this.editor)),this.editor.observe(new T(this.editor)),this.editor.filters.set(new P(this.editor)),this.editor.filters.set(new S(this.editor))}static defaultConfig(){return{browser:{},filter:{},lang:null,plugins:[],tags:[],toolbar:[]}}}class _ extends n{constructor(a){super(a,"block")}insert({id:a}={}){if(!a)throw"Invalid argument";this.editor.insert(this.editor.createElement("app-block",{attributes:{id:a}}))}}class $ extends o{constructor(a){super(a,"block")}getFieldsetHtml(){return`
            <legend>${this.t("Block")}</legend>
            <div class="editor-required">
                <label for="editor-id">${this.t("ID")}</label>
                <input id="editor-id" name="id" type="text" required />
            </div>
        `}}class y extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}get content(){return this.shadowRoot.innerHTML}set content(a){this.shadowRoot.innerHTML=a}}class aa extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof y&&c.id&&this.editor.config.block.api?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("app-block").forEach(d=>this.init(d))}))}async init(a){if(!a.id||!this.editor.config.block.api)return;try{const b=await fetch(this.editor.config.block.api.replace("{id}",a.id),{mode:"no-cors"});if(b.ok){let c="";this.editor.config.block.css&&(c=this.editor.config.block.css.split(",").map(e=>`<link rel="stylesheet" href="${e}">`).join(""));const d=await b.text();a.content=c+d}}catch(b){console.error(b)}}}const z={de:{Cancel:"Abbrechen",Height:"Höhe",Ifrane:"Iframe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Width:"Breite"}};class ba extends j{constructor(a){super(a,"block")}init(){this.editor.registerElement("app-block",y),this.editor.tags.create({name:"app-block",group:"section",attributes:["id"],deletable:!0,empty:!0,navigable:!0,sortable:!0}),this.registerTranslator(z),this.editor.observe(new aa(this.editor)),this.editor.config.block.browser?this.editor.dialogs.set(new r(this.editor,"block",this.editor.config.block.browser)):this.editor.dialogs.set(new $(this.editor)),this.editor.commands.set(new _(this.editor))}static defaultConfig(){return{api:null,browser:null,css:null}}}class ca extends j{constructor(a){super(a,"bold")}init(){this.editor.tags.create({name:"b",group:"format",children:["text"]}),this.registerCommand("bold","b")}}class da extends n{constructor(a){super(a,"details")}insert(a={}){this.editor.insert(this.editor.createElement("details"))}}class ea extends q{constructor(a){super(a,"details")}filter(a){a.querySelectorAll("details > summary:only-child").forEach(b=>b.parentElement.removeChild(b))}}class fa extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{if(c instanceof HTMLDetailsElement)this.init(c);else if(c instanceof HTMLElement){c.querySelectorAll("details").forEach(e=>this.init(e));const d=c.closest("details");d&&this.editor.content.contains(d)&&(d.open=!0)}}))}init(a){a.open=!0,a.querySelectorAll(":scope > summary:not(:first-child)").forEach(b=>a.removeChild(b)),a.querySelector(":scope > summary:first-child")||a.insertAdjacentElement("afterbegin",this.editor.createElement("summary")),a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}class ga extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.tagName.toLowerCase()==="summary"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("summary").forEach(d=>this.init(d))}))}init(a){const b=()=>{a.textContent.trim()||(a.textContent=this.editor.i18n.translate("details","Details"))};b(),a.addEventListener("blur",b),a.addEventListener("keydown",c=>{c.key===" "&&(c.preventDefault(),c.cancelBubble=!0)}),a.addEventListener("keyup",c=>{c.key===" "&&(this.editor.insertText(" "),c.preventDefault(),c.cancelBubble=!0)})}}const ha={de:{Details:"Details"}};class ia extends j{constructor(a){super(a,"details")}init(){this.editor.tags.create({name:"details",group:"section",children:["figure","list","paragraph","summary"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"summary",group:"summary",children:["text"],editable:!0,enter:"p",navigable:!0}),this.editor.observe(new fa(this.editor)),this.editor.observe(new ga(this.editor)),this.registerTranslator(ha),this.editor.commands.set(new da(this.editor)),this.editor.filters.set(new ea(this.editor))}}class ja extends n{constructor(a){super(a,"div")}insert(a={}){this.editor.insert(this.editor.createElement("div",{attributes:a}))}}class ka extends o{constructor(a){super(a,"div")}getFieldsetHtml(){return`
            <legend>${this.t("Division")}</legend>
            <div>
                <label for="editor-class">${this.t("CSS class")}</label>
                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />
            </div>
        `}}class la extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLDivElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("div").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}const ma={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse",Division:"Division","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern"}};class na extends j{constructor(a){super(a,"div")}init(){this.editor.tags.create({name:"div",group:"section",attributes:["class"],children:["block","figure"],deletable:!0,navigable:!0,sortable:!0}),this.editor.observe(new la(this.editor)),this.registerTranslator(ma),this.editor.dialogs.set(new ka(this.editor)),this.editor.commands.set(new ja(this.editor))}}class oa extends n{constructor(a){super(a,"fullscreen")}execute(){this.editor.element.classList.contains("editor-fullscreen")?this.editor.element.classList.remove("editor-fullscreen"):this.editor.element.classList.add("editor-fullscreen")}}class pa extends j{constructor(a){super(a,"fullscreen")}init(){this.editor.commands.set(new oa(this.editor))}}class qa extends n{constructor(a){super(a,"gallery")}insert(a={}){this.editor.insert(this.editor.createElement("figure",{attributes:{class:"gallery"}}))}}class ra extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.tagName.toLowerCase()==="figure"&&c.classList.contains("gallery")?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("figure.gallery").forEach(d=>this.init(d))}))}init(a){if(!a.querySelector(":scope > slot")){const b=this.editor.createElement("slot"),c=a.querySelector(":scope > figcaption");c?c.insertAdjacentElement("beforebegin",b):a.appendChild(b)}}}class sa extends j{constructor(a){super(a,"gallery")}init(){this.editor.observe(new ra(this.editor)),this.editor.commands.set(new qa(this.editor))}}class ta extends j{constructor(a){super(a,"heading")}init(){this.editor.tags.create({name:"h2",group:"heading",children:["text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("heading","h2")}}class ua extends n{constructor(a){super(a,"iframe")}insert({src:a,caption:b="",width:c="",height:d="",allowfullscreen:e="allowfullscreen"}={}){if(!a)throw"Invalid argument";const f=this.editor.createElement("figure",{attributes:{class:"iframe"}});f.appendChild(this.editor.createElement("iframe",{attributes:{src:this.editor.url(a),width:c,height:d,allowfullscreen:e}})),f.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(f)}}class va extends o{constructor(a){super(a,"iframe")}getFieldsetHtml(){return`
            <legend>${this.t("Iframe")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}class wa extends j{constructor(a){super(a,"iframe")}init(){this.editor.tags.create({name:"iframe",group:"media",attributes:["allowfullscreen","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(z),this.editor.config.iframe.browser?this.editor.dialogs.set(new r(this.editor,"iframe",this.editor.config.iframe.browser)):this.editor.dialogs.set(new va(this.editor)),this.editor.commands.set(new ua(this.editor))}static defaultConfig(){return{browser:null}}}class xa extends n{constructor(a){super(a,"image")}insert({src:a,caption:b="",width:c="",height:d="",alt:e=""}={}){if(!a)throw"Invalid argument";const f=this.editor.createElement("figure",{attributes:{class:"image"}});f.appendChild(this.editor.createElement("img",{attributes:{src:this.editor.url(a),width:c,height:d,alt:e}})),f.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(f)}}class ya extends o{constructor(a){super(a,"image")}getFieldsetHtml(){return`
            <legend>${this.t("Image")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-alt">${this.t("Alternative text")}</label>
                <input id="editor-alt" name="alt" type="text" placeholder="${this.t("Replacement text for use when media elements are not available")}" />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}const za={de:{"Alternative text":"Alternativtext",Cancel:"Abbrechen",Height:"Höhe",Image:"Bild","Insert URL to media element":"URL zum Medienelement eingeben","Replacement text for use when media elements are not available":"Ersatztext, falls Medienelemente nicht verfügbar sind",Save:"Speichern",URL:"URL",Width:"Breite"}};class Aa extends j{constructor(a){super(a,"image")}init(){this.editor.tags.create({name:"img",group:"media",attributes:["alt","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(za),this.editor.config.image.browser?this.editor.dialogs.set(new r(this.editor,"image",this.editor.config.image.browser)):this.editor.dialogs.set(new ya(this.editor)),this.editor.commands.set(new xa(this.editor))}static defaultConfig(){return{browser:null}}}class Ba extends j{constructor(a){super(a,"italic")}init(){this.editor.tags.create({name:"i",group:"format",children:["text"]}),this.registerCommand("italic","i")}}class Ca extends n{constructor(a){super(a,"link")}insert({href:a=null}={}){const b=this.editor.getSelectedElement(),c=b instanceof HTMLAnchorElement?b:null;a&&c?c.setAttribute("href",this.editor.url(a)):a?this.editor.format(this.editor.createElement("a",{attributes:{href:this.editor.url(a)}})):c&&c.parentElement.replaceChild(this.editor.createText(c.textContent),c)}}class Da extends o{constructor(a){super(a,"link")}getFieldsetHtml(){return`
            <legend>${this.t("Link")}</legend>
            <div>
                <label for="editor-href">${this.t("URL")}</label>
                <input id="editor-href" name="href" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to add a link or leave empty to unlink")}" />
            </div>
        `}}const Ea={de:{Cancel:"Abbrechen","Insert URL to add a link or leave empty to unlink":"URL eingeben um zu verlinken oder leer lassen um Link zu entfernen",Link:"Link",Save:"Speichern",URL:"URL"}};class Fa extends j{constructor(a){super(a,"link")}init(){this.editor.tags.create({name:"a",group:"format",attributes:["href"]}),this.registerTranslator(Ea),this.editor.dialogs.set(new Da(this.editor)),this.editor.commands.set(new Ca(this.editor))}}class Ga extends m{observe(a){a.forEach(b=>b.removedNodes.forEach(c=>{c instanceof HTMLLIElement&&b.target.children.length<=0&&b.target.parentElement.removeChild(b.target)}))}}class Ha extends n{constructor(a){super(a,"orderedlist")}insert(a={}){const b=this.editor.createElement("ol");b.appendChild(this.editor.createElement("li")),this.editor.insert(b)}}class Ia extends n{constructor(a){super(a,"unorderedlist")}insert(a={}){const b=this.editor.createElement("ul");b.appendChild(this.editor.createElement("li")),this.editor.insert(b)}}class Ja extends j{constructor(a){super(a,"list")}init(){this.editor.tags.create({name:"ul",group:"list",children:["listitem"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"ol",group:"list",children:["listitem"],deletable:!0,navigable:!0,sortable:!0}),this.editor.tags.create({name:"li",group:"listitem",children:["break","format","text"],deletable:!0,editable:!0,enter:"li",navigable:!0,sortable:!0}),this.editor.commands.set(new Ia(this.editor)),this.editor.commands.set(new Ha(this.editor)),this.editor.observe(new Ga(this.editor))}}class Ka extends j{constructor(a){super(a,"paragraph")}init(){this.editor.tags.create({name:"p",group:"paragraph",children:["break","format","text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("paragraph","p")}}class La extends n{constructor(a){super(a,"quote")}insert(a={}){const b=this.editor.createElement("figure",{attributes:{class:"quote"}});b.appendChild(this.editor.createElement("blockquote")),b.appendChild(this.editor.createElement("figcaption")),this.editor.insert(b)}}class Ma extends m{observe(a){a.forEach(b=>b.removedNodes.forEach(c=>{c instanceof HTMLElement&&c.tagName.toLowerCase()==="blockquote"&&b.target.tagName.toLowerCase()==="figure"&&b.target.classList.contains("quote")&&b.target.parentElement.removeChild(b.target)}))}}class Na extends j{constructor(a){super(a,"quote")}init(){this.editor.tags.create({name:"blockquote",group:"quote",children:["break","format","text"],deletable:!0,editable:!0,enter:"p",navigable:!0}),this.editor.commands.set(new La(this.editor)),this.editor.observe(new Ma(this.editor))}}class Oa extends n{constructor(a){super(a,"section")}insert(a={}){this.editor.insert(this.editor.createElement("section",{attributes:a}))}}class Pa extends o{constructor(a){super(a,"section")}getFieldsetHtml(){return`
            <legend>${this.t("Section")}</legend>
            <div>
                <label for="editor-class">${this.t("CSS class")}</label>
                <input id="editor-class" name="class" type="text" placeholder="${this.t("Insert CSS class")}" />
            </div>
        `}}class Qa extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLElement&&c.tagName.toLowerCase()==="section"?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("section").forEach(d=>this.init(d))}))}init(a){a.querySelector(":scope > slot")||a.appendChild(this.editor.createElement("slot"))}}const Ra={de:{Cancel:"Abbrechen","CSS class":"CSS-Klasse","Insert CSS class":"CSS-Klasse eingeben",Save:"Speichern",Section:"Sektion"}};class Sa extends j{constructor(a){super(a,"section")}init(){this.editor.tags.create({name:"section",group:"section",attributes:["class"],children:["figure","heading","list","paragraph"],deletable:!0,navigable:!0,sortable:!0}),this.editor.observe(new Qa(this.editor)),this.registerTranslator(Ra),this.editor.dialogs.set(new Pa(this.editor)),this.editor.commands.set(new Oa(this.editor))}}class Ta extends j{constructor(a){super(a,"subheading")}init(){this.editor.tags.create({name:"h3",group:"heading",children:["text"],deletable:!0,editable:!0,enter:"p",navigable:!0,sortable:!0}),this.registerCommand("subheading","h3")}}class Ua extends n{constructor(a){super(a,"table")}insert({rows:a=1,cols:b=1}={}){if(a<=0||b<=0)throw"Invalid argument";const c=this.editor.createElement("table");["thead","tbody","tfoot"].forEach(e=>{const f=this.editor.createElement(e),h=e==="thead"?"th":"td",g=e==="tbody"?a:1;let i;c.appendChild(f);for(let k=0;k<g;k++){i=this.editor.createElement("tr"),f.appendChild(i);for(let l=0;l<b;++l)i.appendChild(this.editor.createElement(h))}});const d=this.editor.createElement("figure",{attributes:{class:"table"}});d.appendChild(c),d.appendChild(this.editor.createElement("figcaption")),this.editor.insert(d)}}class Va extends o{constructor(a){super(a,"table")}getFieldsetHtml(){return`
            <legend>${this.t("Table")}</legend>
            <div class="editor-required">
                <label for="editor-rows">${this.t("Rows")}</label>
                <input id="editor-rows" name="rows" type="number" value="1" min="1" required />
            </div>
            <div class="editor-required">
                <label for="editor-cols">${this.t("Columns")}</label>
                <input id="editor-cols" name="cols" type="number" value="1" min="1" required />
            </div>
        `}}class Wa extends q{constructor(a){super(a,"table")}filter(a){if(a instanceof HTMLTableRowElement&&!a.querySelector("th:not(:empty), td:not(:empty)")||a instanceof HTMLTableSectionElement&&a.rows.length<=0||a instanceof HTMLTableElement&&a.querySelector("thead, tfoot")&&!a.querySelector("tbody"))for(;a.firstChild;)a.removeChild(a.firstChild)}}class Xa extends m{observe(a){a.forEach(b=>b.addedNodes.forEach(c=>{c instanceof HTMLTableElement?this.init(c):c instanceof HTMLElement&&c.querySelectorAll("table").forEach(d=>this.init(d))}))}init(a){this.sections(a),this.keyboard(a)}sections(a){if(a.tBodies.length>0&&a.tBodies[0].rows[0]&&(!a.tHead||!a.tFoot)){const b=a.tBodies[0].rows[0].cells.length;let c;if(!a.tHead){c=a.createTHead().insertRow();for(let d=0;d<b;d++)c.appendChild(this.editor.createElement("th"))}if(!a.tFoot){c=a.createTFoot().insertRow();for(let d=0;d<b;d++)c.insertCell()}}}keyboard(a){a.addEventListener("keydown",b=>{const c=b.target,d=c.parentElement,e=d.parentElement;if(c instanceof HTMLTableCellElement&&d instanceof HTMLTableRowElement&&(e instanceof HTMLTableElement||e instanceof HTMLTableSectionElement)&&b.altKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(b.key)){const f=d.cells.length,h=e.rows.length,g=e instanceof HTMLTableElement?d.rowIndex:d.sectionRowIndex;let i;if(b.shiftKey&&(b.key==="ArrowLeft"&&c.cellIndex>0||b.key==="ArrowRight"&&c.cellIndex<f-1))i=c.cellIndex+(b.key==="ArrowLeft"?-1:1),Array.from(a.rows).forEach(k=>k.deleteCell(i));else if(b.shiftKey&&(b.key==="ArrowUp"&&g>0||b.key==="ArrowDown"&&g<h-1))i=g+(b.key==="ArrowUp"?-1:1),e.deleteRow(i);else if(!b.shiftKey&&(b.key==="ArrowLeft"||b.key==="ArrowRight"))i=c.cellIndex+(b.key==="ArrowLeft"?0:1),Array.from(a.rows).forEach(k=>{k.querySelector(":scope > td")?k.insertCell(i):k.insertBefore(this.editor.createElement("th"),k.cells[i])});else if(!b.shiftKey&&(b.key==="ArrowUp"||b.key==="ArrowDown")){i=g+(b.key==="ArrowUp"?0:1);const k=e.insertRow(i);for(let l=0;l<f;l++)k.insertCell()}b.preventDefault(),b.cancelBubble=!0}})}}const Ya={de:{Cancel:"Abbrechen",Columns:"Spalten",Rows:"Zeilen",Save:"Speichern",Table:"Tabelle"}};class Za extends j{constructor(a){super(a,"table")}init(){this.editor.tags.create({name:"table",group:"table",children:["tablesection"],deletable:!0,navigable:!0,sortable:!0}),["thead","tbody","tfoot"].forEach(a=>this.editor.tags.create({name:a,group:"tablesection",children:["tablerow"]})),this.editor.tags.create({name:"tr",group:"tablerow",children:["tablecell"]}),["td","th"].forEach(a=>this.editor.tags.create({name:a,group:"tablecell",children:["break","format","text"],editable:!0,empty:!0})),this.editor.observe(new Xa(this.editor)),this.registerTranslator(Ya),this.editor.filters.set(new Wa(this.editor)),this.editor.dialogs.set(new Va(this.editor)),this.editor.commands.set(new Ua(this.editor))}}class _a extends n{constructor(a){super(a,"video")}insert({src:a,caption:b="",width:c="",height:d="",controls:e="controls"}={}){if(!a)throw"Invalid argument";const f=this.editor.createElement("figure",{attributes:{class:"video"}});f.appendChild(this.editor.createElement("video",{attributes:{src:this.editor.url(a),width:c,height:d,controls:e}})),f.appendChild(this.editor.createElement("figcaption",{html:b})),this.editor.insert(f)}}class $a extends o{constructor(a){super(a,"video")}getFieldsetHtml(){return`
            <legend>${this.t("Video")}</legend>
            <div class="editor-required">
                <label for="editor-src">${this.t("URL")}</label>
                <input id="editor-src" name="src" type="text" pattern="(https?|/).+" placeholder="${this.t("Insert URL to media element")}" required />
            </div>
            <div>
                <label for="editor-width">${this.t("Width")}</label>
                <input id="editor-width" name="width" type="number" />
            </div>
            <div>
                <label for="editor-height">${this.t("Height")}</label>
                <input id="editor-height" name="height" type="number" />
            </div>
        `}}const ab={de:{Cancel:"Abbrechen",Height:"Höhe","Insert URL to media element":"URL zum Medienelement eingeben",Save:"Speichern",URL:"URL",Video:"Video",Width:"Breite"}};class bb extends j{constructor(a){super(a,"video")}init(){this.editor.tags.create({name:"video",group:"media",attributes:["controls","height","src","width"],empty:!0,navigable:!0}),this.registerTranslator(ab),this.editor.config.video.browser?this.editor.dialogs.set(new r(this.editor,"video",this.editor.config.video.browser)):this.editor.dialogs.set(new $a(this.editor)),this.editor.commands.set(new _a(this.editor))}static defaultConfig(){return{browser:null}}}class cb extends p{static defaultConfig(){return{base:{filter:{em:"i",strong:"b"},plugins:[Z,O,ba,ca,ia,na,pa,sa,ta,wa,Aa,Ba,Fa,Ja,Ka,Na,Sa,Ta,Za,bb],toolbar:["fullscreen","bold","italic","link","paragraph","heading","subheading","unorderedlist","orderedlist","quote","image","video","audio","iframe","table","section","details","block","div","gallery"]}}}}export default cb;
